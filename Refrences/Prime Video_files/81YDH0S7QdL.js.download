(()=>{"use strict";var e,t={"./node_modules/@amzn/kirup/dist/src/@types/configuration.js":(e,t)=>{var n,a;Object.defineProperty(t,"__esModule",{value:!0}),t.Transports=t.Environment=void 0,function(e){e[e.DOM=1]="DOM",e[e.NODE=2]="NODE",e[e.WEBWORKER=3]="WEBWORKER",e[e.SERVICEWORKER=4]="SERVICEWORKER"}(n||(t.Environment=n={})),function(e){e[e.MINERVA=1]="MINERVA",e[e.METRICAGENT=2]="METRICAGENT",e[e.INSIGHTS=3]="INSIGHTS",e[e.CONSOLE=4]="CONSOLE",e[e.RTLA=5]="RTLA"}(a||(t.Transports=a={}))},"./node_modules/@amzn/kirup/dist/src/@types/storage.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LogTypes=void 0,t.LogTypes=["debug","info","warn","error","fatal","count"]},"./node_modules/@amzn/kirup/dist/src/browser.js":function(e,t,n){var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,i)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.RTLA_RECOMMENDED=t.INSIGHTS_RECOMMENDED=t.MINERVA_RECOMMENDED=t.CONSOLE_RECOMMENDED=t.KirupLogger=void 0;var r=n("./node_modules/@amzn/kirup/dist/src/kirup.browser.js");Object.defineProperty(t,"KirupLogger",{enumerable:!0,get:function(){return r.KirupLogger}});var o=n("./node_modules/@amzn/kirup/dist/src/configuration/console.js");Object.defineProperty(t,"CONSOLE_RECOMMENDED",{enumerable:!0,get:function(){return o.CONSOLE_RECOMMENDED}});var l=n("./node_modules/@amzn/kirup/dist/src/configuration/minerva.js");Object.defineProperty(t,"MINERVA_RECOMMENDED",{enumerable:!0,get:function(){return l.MINERVA_RECOMMENDED}});var s=n("./node_modules/@amzn/kirup/dist/src/configuration/insights.js");Object.defineProperty(t,"INSIGHTS_RECOMMENDED",{enumerable:!0,get:function(){return s.INSIGHTS_RECOMMENDED}});var c=n("./node_modules/@amzn/kirup/dist/src/configuration/rtla.js");Object.defineProperty(t,"RTLA_RECOMMENDED",{enumerable:!0,get:function(){return c.RTLA_RECOMMENDED}}),i(n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),t)},"./node_modules/@amzn/kirup/dist/src/configuration/console.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CONSOLE_RECOMMENDED=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.CONSOLE_RECOMMENDED={name:a.Transports.CONSOLE,support:[a.Environment.DOM,a.Environment.NODE],persistence:!1,canHandleErrorObject:!0,retries:0,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:0}},"./node_modules/@amzn/kirup/dist/src/configuration/insights.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INSIGHTS_RECOMMENDED=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.INSIGHTS_RECOMMENDED={name:a.Transports.INSIGHTS,support:[a.Environment.DOM],persistence:!1,canHandleErrorObject:!1,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:20}},"./node_modules/@amzn/kirup/dist/src/configuration/minerva.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MINERVA_RECOMMENDED=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.MINERVA_RECOMMENDED={name:a.Transports.MINERVA,support:[a.Environment.DOM,a.Environment.SERVICEWORKER,a.Environment.WEBWORKER],persistence:!0,canHandleErrorObject:!0,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:100}},"./node_modules/@amzn/kirup/dist/src/configuration/rtla.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RTLA_RECOMMENDED=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");t.RTLA_RECOMMENDED={name:a.Transports.RTLA,support:[a.Environment.DOM],persistence:!1,canHandleErrorObject:!1,retries:3,maxDataAge:3e5,maxRateLimit:1e4,maxBatchSize:20}},"./node_modules/@amzn/kirup/dist/src/events.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupEvents=void 0;t.KirupEvents=class{constructor(e){this.action=e,this.onWindowLoad=this.onWindowLoad.bind(this),this.onDocumentVisibilityChange=this.onDocumentVisibilityChange.bind(this),this.onDocumentPageHide=this.onDocumentPageHide.bind(this),this.attach()}attach(){document.addEventListener("visibilitychange",this.onDocumentVisibilityChange),document.addEventListener("pagehide",this.onDocumentPageHide),window.addEventListener("load",this.onWindowLoad)}onDocumentVisibilityChange(){this.action()}onDocumentPageHide(){this.action()}onWindowLoad(){this.action()}}},"./node_modules/@amzn/kirup/dist/src/kirup.browser.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupLogger=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/kirup.js"),i=n("./node_modules/@amzn/kirup/dist/src/transports/transport.js"),r=n("./node_modules/@amzn/kirup/dist/src/transports/transport.browser.js");class o extends a.KirupLoggerBase{constructor(e){super(e,i.KirupTransport,r.loadTransportFromConfig)}}t.KirupLogger=o},"./node_modules/@amzn/kirup/dist/src/kirup.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupLoggerBase=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),i=n("./node_modules/@amzn/kirup/dist/src/events.js"),r=n("./node_modules/@amzn/kirup/dist/src/latency.js"),o=n("./node_modules/@amzn/kirup/dist/src/storage.js"),l=n("./node_modules/@amzn/kirup/dist/src/utils/environment.js"),s=n("./node_modules/@amzn/kirup/dist/src/utils/store.js"),c=n("./node_modules/@amzn/kirup/dist/src/utils/variables.js");t.KirupLoggerBase=class{constructor(e,t,n){this._env=(0,l.getCurrentEnvironment)(),this._config=this._applyConfiguration(e),this._transports=this._getTransports(t,n),this._processEntries=this._processEntries.bind(this),this._env===a.Environment.DOM&&new i.KirupEvents(this._processEntries),[a.Environment.DOM,a.Environment.WEBWORKER,a.Environment.SERVICEWORKER].includes(this._env)&&(this._storage=new o.KirupStorage),this.latency=new r.Latency(this._env,this._transports)}_applyConfiguration(e){return Object.assign(e,{transports:e.transports.filter((e=>e.support.includes(this._env)))})}_getTransports(e,t){const n=[];return this._config.transports.forEach((a=>{n.push(new e(a,t))})),n}async _processEntries(e){var t,n;for(let a=0;a<this._transports.length;a++){const i=this._transports[a];null===(n=(t=i.instance).clearSchedule)||void 0===n||n.call(t);const r=i.config.name.toString();!this._storage||void 0!==e&&e!==r||await this._storage.retrieveAndUpdate(r,i.config,(e=>{var t,n;return(null===(n=(t=i.instance).batch)||void 0===n?void 0:n.call(t,e))||Promise.resolve(e)}))}}async _processStore(e,t){var n,a;(0,s.getStoreSize)(t)>=e.config.maxBatchSize?await this._processEntries(e.config.name.toString()):null===(a=(n=e.instance).scheduleNextProcessing)||void 0===a||a.call(n,this._processEntries)}async count(e,t,n){var a,i,r,o;for(let l=0;l<this._transports.length;l++){const s=this._transports[l],c=null===(i=(a=s.config).pageContext)||void 0===i?void 0:i.call(a);if(void 0===s.config.allowLogType||s.config.allowLogType.includes("count"))if(!1===s.config.persistence)s.instance.count(e,t,n,c);else{if(!this._storage)throw new Error(`Your environment ${this._env} does not support persistence.`);{const a=await this._storage.add(s.config.name.toString(),"count",[e,t,n,c]);await this._processStore(s,a)}}null===(o=(r=s.config).postLogAction)||void 0===o||o.call(r,"count",e,t||1,this)}}async fatal(e,t,n){var a,i,r,o,l;for(let s=0;s<this._transports.length;s++){const d=this._transports[s],u=null===(i=(a=d.config).pageContext)||void 0===i?void 0:i.call(a);if(void 0===d.config.allowLogType||d.config.allowLogType.includes("fatal"))if(!1===d.config.persistence)d.instance.fatal(e,t,n,u);else{if(!this._storage)throw new Error(`Your environment ${this._env} does not support persistence.`);{const a=await this._storage.add(d.config.name.toString(),"fatal",[e,t,n,u]);await this._processStore(d,a)}}const m=null===(r=[t,n].find(c.isVariables))||void 0===r?void 0:r.logID;m&&this.count(`Fatal_${m}`),null===(l=(o=d.config).postLogAction)||void 0===l||l.call(o,"fatal",e)}}async error(e,t,n){var a,i,r,o,l;for(let s=0;s<this._transports.length;s++){const d=this._transports[s],u=null===(i=(a=d.config).pageContext)||void 0===i?void 0:i.call(a);if(void 0===d.config.allowLogType||d.config.allowLogType.includes("error"))if(!1===d.config.persistence)d.instance.error(e,t,n);else{if(!this._storage)throw new Error(`Your environment ${this._env} does not support persistence.`);{const a=await this._storage.add(d.config.name.toString(),"error",[e,t,n,u]);await this._processStore(d,a)}}const m=null===(r=[t,n].find(c.isVariables))||void 0===r?void 0:r.logID;m&&this.count(`Error_${m}`),null===(l=(o=d.config).postLogAction)||void 0===l||l.call(o,"error",e)}}async warn(e,t,n){var a,i,r,o,l;for(let s=0;s<this._transports.length;s++){const d=this._transports[s],u=null===(i=(a=d.config).pageContext)||void 0===i?void 0:i.call(a);if(void 0===d.config.allowLogType||d.config.allowLogType.includes("warn"))if(!1===d.config.persistence)d.instance.warn(e,t,n,u);else{if(!this._storage)throw new Error(`Your environment ${this._env} does not support persistence.`);{const a=await this._storage.add(d.config.name.toString(),"warn",[e,t,n,u]);await this._processStore(d,a)}}const m=null===(r=[t,n].find(c.isVariables))||void 0===r?void 0:r.logID;m&&this.count(`Warning_${m}`),null===(l=(o=d.config).postLogAction)||void 0===l||l.call(o,"warn",e)}}async info(e,t){var n,a,i,r;for(let o=0;o<this._transports.length;o++){const l=this._transports[o],s=null===(a=(n=l.config).pageContext)||void 0===a?void 0:a.call(n);if(void 0===l.config.allowLogType||l.config.allowLogType.includes("info"))if(!1===l.config.persistence)l.instance.info(e,t,s);else{if(!this._storage)throw new Error(`Your environment ${this._env} does not support persistence.`);{const n=await this._storage.add(l.config.name.toString(),"info",[e,t,s]);await this._processStore(l,n)}}null===(r=(i=l.config).postLogAction)||void 0===r||r.call(i,"info",e)}}async debug(e,t){var n,a,i,r;for(let o=0;o<this._transports.length;o++){const l=this._transports[o],s=null===(a=(n=l.config).pageContext)||void 0===a?void 0:a.call(n);if(void 0===l.config.allowLogType||l.config.allowLogType.includes("debug"))if(!1===l.config.persistence)l.instance.debug(e,t,s);else{if(!this._storage)throw new Error(`Your environment ${this._env} does not support persistence.`);{const n=await this._storage.add(l.config.name.toString(),"debug",[e,t,s]);await this._processStore(l,n)}}null===(r=(i=l.config).postLogAction)||void 0===r||r.call(i,"debug",e)}}}},"./node_modules/@amzn/kirup/dist/src/latency.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Latency=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),i=n("./node_modules/@amzn/kirup/dist/src/utils/environment.js"),r="kirup-navigate",o=["domInteractive","domComplete"];t.Latency=class{constructor(e,t){this._env=e,this._transports=t}navigate(){(0,i.isSupportingPerformanceTiming)()&&this._onNavigation()}_onNavigation(){performance.mark(r)}_getNavigationType(){var e;const t=performance.getEntriesByType("navigation");return(null===(e=null==t?void 0:t[0])||void 0===e?void 0:e.type)||"unknown"}_legacyCalculateLatency(e){var t,n,a;const i=performance.getEntriesByType("navigation"),o=null===(t=null==i?void 0:i[0])||void 0===t?void 0:t.requestStart,l=performance.getEntriesByName(r,"mark"),s=null===(n=null==l?void 0:l[0])||void 0===n?void 0:n.startTime,c=performance.getEntriesByName(e,"mark"),d=null===(a=null==c?void 0:c[0])||void 0===a?void 0:a.startTime;if(void 0!==d){return d-(void 0!==s?s:o||0)}throw new Error(`You're ending a marker (${e}) that is not started and undefined (legacy).`)}_calculateLatency(e){var t,n,a,i,o;const l=performance.getEntriesByType("navigation"),s=null===(t=null==l?void 0:l[l.length-1])||void 0===t?void 0:t.startTime,c=performance.getEntriesByName(r,"mark"),d=null===(n=null==c?void 0:c[c.length-1])||void 0===n?void 0:n.startTime,u=performance.getEntriesByName(e,"mark"),m="number"==typeof(null===(a=null==l?void 0:l[l.length-1])||void 0===a?void 0:a[e])?Number(null===(i=null==l?void 0:l[l.length-1])||void 0===i?void 0:i[e]):null===(o=null==u?void 0:u[u.length-1])||void 0===o?void 0:o.startTime;if(void 0!==m){return m-(void 0!==d?d:s||0)}throw new Error(`You're ending a marker (${e}) that is not started and undefined.`)}start(e){return(0,i.isSupportingPerformanceTiming)()?(performance.mark(e),this):this}end(e){if(!(0,i.isSupportingPerformanceTiming)())return this;const t=`${e}-end`;performance.mark(t);const n=performance.measure("duration",e,t).duration;return this._transports.forEach((t=>{(void 0===t.config.allowLogType||t.config.allowLogType.includes("count"))&&t.instance.count(e,n)})),this}clickToATF(){this.clickToX("atf")}clickToCF(){this.clickToX("cf")}clickToInteractive(){this.clickToX("ci")}clickToX(e){if(this._env!==a.Environment.DOM)throw new Error(`Your environment ${this._env} does not support clickTo* metrics.`);(0,i.isSupportingPerformanceTiming)()&&(performance.mark(e),this._transports.forEach((t=>{(void 0===t.config.allowLogType||t.config.allowLogType.includes("count"))&&t.instance.count(e,this._legacyCalculateLatency(e))})))}timeToInteractive(e){this.timeToX("timeToInteractive",e)}timeToATF(e){this.timeToX("timeToATF",e)}timeToCF(e){this.timeToX("timeToCF",e)}timeToX(e,t){if(this._env!==a.Environment.DOM)throw new Error(`Your environment ${this._env} does not support timeTo* metrics.`);(0,i.isSupportingPerformanceTiming)()&&(o.includes(e)||performance.mark(e),this._transports.forEach((n=>{(void 0===n.config.allowLogType||n.config.allowLogType.includes("count"))&&n.instance.count(e,this._calculateLatency(e),{NavigationType:this._getNavigationType(),DeviceType:n.config.deviceType||"Desktop",Pivot:t?Object.entries(t).map((([e,t])=>`${e}=${t}`)).join("|"):"NONE"})})))}}},"./node_modules/@amzn/kirup/dist/src/storage.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupStorage=t.EMPTY_STORE=void 0;const a=n("./node_modules/idb-keyval/dist/index.js"),i=n("./node_modules/@amzn/kirup/dist/src/utils/errorObject.js");t.EMPTY_STORE={debug:[],info:[],warn:[],error:[],fatal:[],count:[]};t.KirupStorage=class{constructor(){this.queue=Promise.resolve(t.EMPTY_STORE)}enqueue(e){return this.queue=this.queue.then((()=>e()),(()=>e())),this.queue}add(e,t,n){return this.enqueue((()=>(0,a.get)(e).then((r=>{const o=r||{};return o[t]||(o[t]=[]),n[0]instanceof Error&&(n[0]=(0,i.errorToObject)(n[0])),o[t].push({time:Date.now(),args:n}),(0,a.set)(e,o).then((()=>o))}))))}retrieveAndUpdate(e,n,a){return this.enqueue((()=>this.retrieve(e,n).then((n=>n?a(n).then((n=>n?this.updateStore(e,n):t.EMPTY_STORE)):t.EMPTY_STORE))))}updateStore(e,t){return(0,a.set)(e,t).then((()=>t))}retrieve(e,n){const r=Date.now();return(0,a.get)(e).then((e=>{var a,o,l,s,c,d;return e?(e.count=null===(a=e.count)||void 0===a?void 0:a.filter((e=>r-e.time<n.maxDataAge)),e.debug=null===(o=e.debug)||void 0===o?void 0:o.filter((e=>r-e.time<n.maxDataAge)),e.info=null===(l=e.info)||void 0===l?void 0:l.filter((e=>r-e.time<n.maxDataAge)),e.warn=null===(s=e.warn)||void 0===s?void 0:s.filter((e=>r-e.time<n.maxDataAge)).map((e=>(n.canHandleErrorObject&&e.args&&(0,i.isErrorObject)(e.args[0])&&(e.args[0]=(0,i.objectToError)(e.args[0])),e))),e.error=null===(c=e.error)||void 0===c?void 0:c.filter((e=>r-e.time<n.maxDataAge)).map((e=>(n.canHandleErrorObject&&e.args&&(0,i.isErrorObject)(e.args[0])&&(e.args[0]=(0,i.objectToError)(e.args[0])),e))),e.fatal=null===(d=e.fatal)||void 0===d?void 0:d.filter((e=>r-e.time<n.maxDataAge)).map((e=>(n.canHandleErrorObject&&e.args&&(0,i.isErrorObject)(e.args[0])&&(e.args[0]=(0,i.objectToError)(e.args[0])),e))),e):t.EMPTY_STORE}))}}},"./node_modules/@amzn/kirup/dist/src/transports/base.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TransportBase=void 0;t.TransportBase=class{constructor(e){this.config=e}scheduleNextProcessing(e){void 0===this.timeout&&(this.timeout=setTimeout((async()=>{await e(this.config.name.toString())}),this.config.maxRateLimit))}clearSchedule(){clearTimeout(this.timeout),this.timeout=void 0}}},"./node_modules/@amzn/kirup/dist/src/transports/console/console.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),i=n("./node_modules/@amzn/kirup/dist/src/transports/base.js");class r extends i.TransportBase{batch(e){var t,n,a,i,r,o;return e.debug=null===(t=e.debug)||void 0===t?void 0:t.filter((e=>!this.debug(e.args[0],e.args[1]))),e.info=null===(n=e.info)||void 0===n?void 0:n.filter((e=>!this.info(e.args[0],e.args[1]))),e.warn=null===(a=e.warn)||void 0===a?void 0:a.filter((e=>!this.warn(e.args[0],e.args[1],e.args[2]))),e.error=null===(i=e.error)||void 0===i?void 0:i.filter((e=>!this.error(e.args[0],e.args[1],e.args[2]))),e.fatal=null===(r=e.fatal)||void 0===r?void 0:r.filter((e=>!this.fatal(e.args[0],e.args[1],e.args[2]))),e.count=null===(o=e.count)||void 0===o?void 0:o.filter((e=>!this.count(e.args[0],e.args[1],e.args[2]))),Promise.resolve(e)}count(e,t,n){return"number"==typeof t&&n?this._countDimensionValue(e,t,n):"number"==typeof t?this._countValue(e,t):t&&!n?this._countDimension(e,t):this._countName(e),!0}_countName(e){console.log(`count: ${e}`)}_countValue(e,t){console.log(`count: ${e}, value: ${t}`)}_countDimension(e,t){console.log(`count: ${e}, dimensions: `,t)}_countDimensionValue(e,t,n){console.log(`count: ${e}, value: ${t}, dimensions: `,n)}fatal(e,t,n){return a.untangleOverload.call(this,"fatal",e,t,n),!0}_fatalMessage(e){console.error(`fatal: ${e}`)}_fatalWithError(e){console.error(e)}_fatalWithErrorAndMessage(e,t){console.error(`fatal: ${e}`,t)}_fatalWithVariables(e,t){console.error(`fatal: ${e}`,t)}_fatalWithErrorAndVariables(e,t,n){console.error(`fatal: ${e}`,t,n)}error(e,t,n){return a.untangleOverload.call(this,"error",e,t,n),!0}_errorMessage(e){console.error(`error: ${e}`)}_errorWithErrorAndMessage(e,t){console.error(`error: ${e}`,t)}_errorWithError(e){console.error(e)}_errorWithVariables(e,t){console.error(`error: ${e}`,t)}_errorWithErrorAndVariables(e,t,n){console.error(`error: ${e}`,t,n)}warn(e,t,n){return a.untangleOverload.call(this,"warn",e,t,n),!0}_warnMessage(e){console.warn(`warn: ${e}`)}_warnWithErrorAndMessage(e,t){console.warn(`warn: ${e}`,t)}_warnWithError(e){console.warn(e)}_warnWithVariables(e,t){console.warn(`warn: ${e}`,t)}_warnWithErrorAndVariables(e,t,n){console.warn(`warn: ${e}`,t,n)}info(e,t){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e){console.info(`info: ${e}`)}_infoWithVariables(e,t){console.info(`info: ${e}`,t)}debug(e,t){return t?this._debugWithVariables(e,t):this._debugMessage(e),!0}_debugMessage(e){console.debug(`debug: ${e}`)}_debugWithVariables(e,t){console.debug(`debug: ${e}`,t)}}t.default=r},"./node_modules/@amzn/kirup/dist/src/transports/insights/insights.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),i=n("./node_modules/@amzn/kirup/dist/src/transports/base.js");class r extends i.TransportBase{constructor(e){super(e),this.config=e,this.instance=e.getInstance()}_getAttribution(e){return this.config.attribution&&this.config.attribution(e)||"Kirup"}count(e,t,n,a){return this.config.getInstance().enqueueEvent({message:`[COUNT] ${e}:${"object"!=typeof t?"number"!=typeof t?1:t:JSON.stringify(t)} ${n?JSON.stringify(n):""}`.trim(),stack:"NONE"},"INFO",this._getAttribution(a)),!0}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}fatal(e,t,n,i){return a.untangleOverload.call(this,"fatal",e,t,n,i),!0}_fatalMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"fatal"),stack:"NONE"},"FATAL",this._getAttribution(t))}_fatalWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"fatal"),stack:e.stack},"FATAL",this._getAttribution(t))}_fatalWithErrorAndMessage(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"fatal"),stack:t.stack},"FATAL",this._getAttribution(n))}_fatalWithVariables(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"fatal"),stack:"NONE"},"FATAL",this._getAttribution(n))}_fatalWithErrorAndVariables(e,t,n,a){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"fatal"),stack:t.stack},"FATAL",this._getAttribution(a))}error(e,t,n,i){return a.untangleOverload.call(this,"error",e,t,n,i),!0}_errorMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"error"),stack:"NONE"},"ERROR",this._getAttribution(t))}_errorWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"error"),stack:e.stack},"ERROR",this._getAttribution(t))}_errorWithErrorAndMessage(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"error"),stack:t.stack},"ERROR",this._getAttribution(n))}_errorWithVariables(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"error"),stack:"NONE"},"ERROR",this._getAttribution(n))}_errorWithErrorAndVariables(e,t,n,a){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"error"),stack:t.stack},"ERROR",this._getAttribution(a))}warn(e,t,n,i){return a.untangleOverload.call(this,"warn",e,t,n),!0}_warnMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"warn"),stack:"NONE"},"WARN",this._getAttribution(t))}_warnWithErrorAndMessage(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()}`,"warn"),stack:t.stack},"WARN",this._getAttribution(n))}_warnWithError(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e.message,"warn"),stack:e.stack},"WARN",this._getAttribution(t))}_warnWithVariables(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"warn"),stack:"NONE"},"WARN",this._getAttribution(n))}_warnWithErrorAndVariables(e,t,n,a){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"warn"),stack:t.stack},"WARN",this._getAttribution(a))}info(e,t,n){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e,t){this.config.getInstance().enqueueEvent({message:this._formatLog(e,"info"),stack:"NONE"},"INFO",this._getAttribution(t))}_infoWithVariables(e,t,n){this.config.getInstance().enqueueEvent({message:this._formatLog(`${e} ${JSON.stringify(t)}`,"info"),stack:"NONE"},"INFO",this._getAttribution(n))}debug(){return!0}}t.default=r},"./node_modules/@amzn/kirup/dist/src/transports/minerva/minerva.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n("./node_modules/@amzn/minerva-ts-client/dist/index.js"),i=n("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),r=n("./node_modules/@amzn/kirup/dist/src/utils/store.js"),o=n("./node_modules/@amzn/kirup/dist/src/transports/base.js");class l extends o.TransportBase{constructor(e){var t,n;super(e),this._fixedValue=e=>Number(e.toFixed(4)),this.config=e,this.metrics=this._setMetrics(e.metrics);const i={deviceInfoProvider:e.deviceInfoProvider,kpiMetricsSchemaIdentifier:e.kpiMetricsSchemaIdentifier||{schemaId:"ckpi/2/00f30233",groupId:"aminerva"}},r={getConfig:e.getConfig},o={getAccessToken:e.getAccessToken?e.getAccessToken:()=>{}},l={isChildProfile:e.isChildProfile?e.isChildProfile:()=>!1},s={isUsageCollectionEnabled:e.isUsageCollectionEnabled?e.isUsageCollectionEnabled:()=>!0};this.client=new a.MinervaTSClient(r,o,l,s,i),null===(n=(t=this.config).getLogger)||void 0===n||n.call(t).then((e=>{this.logger=e,this.client.setLogger(e)}))}_setMetrics(e){const t=new Map;return e.forEach((e=>{t.set(e.name,{schemaId:e.schemaId,groupId:e.groupId})})),t}tryCatch(e){var t;try{return e()}catch(e){return null===(t=this.logger)||void 0===t||t.error(e.toString()),!1}}async batch(e){var t,n,a,i,o,l;return 0===(0,r.getStoreSize)(e)||(e.debug=null===(t=e.debug)||void 0===t?void 0:t.filter((e=>this.tryCatch((()=>!this.debug(e.args[0],e.args[1]))))),e.info=null===(n=e.info)||void 0===n?void 0:n.filter((e=>this.tryCatch((()=>!this.info(e.args[0],e.args[1]))))),e.warn=null===(a=e.warn)||void 0===a?void 0:a.filter((e=>this.tryCatch((()=>!this.warn(e.args[0],e.args[1],e.args[2]))))),e.error=null===(i=e.error)||void 0===i?void 0:i.filter((e=>this.tryCatch((()=>!this.error(e.args[0],e.args[1],e.args[2]))))),e.fatal=null===(o=e.fatal)||void 0===o?void 0:o.filter((e=>this.tryCatch((()=>!this.fatal(e.args[0],e.args[1],e.args[2]))))),e.count=null===(l=e.count)||void 0===l?void 0:l.filter((e=>this.tryCatch((()=>!this.count(...e.args))))),await this.client.forceUpload()),Promise.resolve(e)}count(e,t,n,a){return"number"==typeof t&&n?this._recordIntegerMetricEvent(e,t,n,a):"number"==typeof t?this._recordIntegerMetricEvent(e,t,{},a):t&&!n?this._recordIntegerMetricEvent(e,1,t,a):this._recordIntegerMetricEvent(e,1,{},a),!0}_recordIntegerMetricEvent(e,t=1,n={},i){var r,o;const l=this.metrics.get(e);if(!l)throw new Error(`Minerva metric with name ${e} has not been configured.`);{if(null===(o=(r=this.config).filter)||void 0===o?void 0:o.call(r,e))return;const s=Object.entries(n).filter((([,e])=>"number"==typeof e)).reduce(((e,[t,n])=>(e[t]=n,e)),{});void 0===s.Count&&(s.Count=this._fixedValue(t));const c=Object.entries(n).filter((([,e])=>"string"==typeof e)).reduce(((e,[t,n])=>(e[t]={val:n,dataType:a.MinervaValueDataType.STRING},e)),{}),d=this.config.getDefaultDimensions(i);Object.keys(s).forEach((t=>{const n={keyValuePairs:{[e]:{val:this._fixedValue(s[t]),dataType:a.MinervaValueDataType.DOUBLE},Metric:{val:t,dataType:a.MinervaValueDataType.STRING},...c,...d},minervaMetricIdentifier:l};this.client.record(n)}))}}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}_recordStringMetricEvent(e,t,n,i={}){const r=this.metrics.get(e);if(!r)throw new Error(`Minerva metric with name ${e} has not been configured.`);{const o={};Object.keys(i).forEach((e=>{o[e]={val:i[e],dataType:a.MinervaValueDataType.STRING}}));const l={keyValuePairs:{[e]:{val:this._formatLog(`${t}${n?` ${n.toString()}`:""}`,e),dataType:a.MinervaValueDataType.STRING},...o},minervaMetricIdentifier:r};this.client.record(l)}}fatal(e,t,n){return i.untangleOverload.call(this,"fatal",e,t,n),!0}_fatalMessage(e){this._recordStringMetricEvent("fatal",e)}_fatalWithError(e){this._recordStringMetricEvent("fatal","",e)}_fatalWithErrorAndMessage(e,t){this._recordStringMetricEvent("fatal",e,t)}_fatalWithVariables(e,t){this._recordStringMetricEvent("fatal",e,void 0,t)}_fatalWithErrorAndVariables(e,t,n){this._recordStringMetricEvent("fatal",e,t,n)}error(e,t,n){return i.untangleOverload.call(this,"error",e,t,n),!0}_errorMessage(e){this._recordStringMetricEvent("error",e)}_errorWithError(e){this._recordStringMetricEvent("error","",e)}_errorWithErrorAndMessage(e,t){this._recordStringMetricEvent("error",e,t)}_errorWithVariables(e,t){this._recordStringMetricEvent("error",e,void 0,t)}_errorWithErrorAndVariables(e,t,n){this._recordStringMetricEvent("error",e,t,n)}warn(e,t,n){return i.untangleOverload.call(this,"warn",e,t,n),!0}_warnMessage(e){this._recordStringMetricEvent("warn",e)}_warnWithError(e){this._recordStringMetricEvent("warn","",e)}_warnWithErrorAndMessage(e,t){this._recordStringMetricEvent("warn",e,t)}_warnWithVariables(e,t){this._recordStringMetricEvent("warn",e,void 0,t)}_warnWithErrorAndVariables(e,t,n){this._recordStringMetricEvent("warn",e,t,n)}info(e,t){return t?this._infoWithVariables(e,t):this._infoMessage(e),!0}_infoMessage(e){this._recordStringMetricEvent("info",e)}_infoWithVariables(e,t){this._recordStringMetricEvent("info",e,void 0,t)}debug(e,t){return t?this._debugWithVariables(e,t):this._debugMessage(e),!0}_debugMessage(e){this._recordStringMetricEvent("debug",e)}_debugWithVariables(e,t){this._recordStringMetricEvent("debug",e,void 0,t)}}t.default=l},"./node_modules/@amzn/kirup/dist/src/transports/rtla/rtla.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const a=n("./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js"),i=n("./node_modules/@amzn/kirup/dist/src/transports/base.js");class r extends i.TransportBase{constructor(e){super(e),this.config=e}_getAttribution(e){return this.config.attribution(e)||"Kirup"}count(){return!0}_logRTLA(e,t){"undefined"!=typeof window&&void 0!==window.ueLogError&&window.ueLogError(e,t)}_formatLog(e,t){return this.config.formatLog?this.config.formatLog(e,t).trim():e.trim()}fatal(e,t,n,i){return a.untangleOverload.call(this,"fatal",e,t,n,i),!0}_fatalMessage(e,t){this._logRTLA(new Error(e),{logLevel:"FATAL",attribution:this._getAttribution(t),message:this._formatLog(e,"fatal")})}_fatalWithError(e,t){this._logRTLA(e,{logLevel:"FATAL",attribution:this._getAttribution(t),message:this._formatLog(e.message,"fatal")})}_fatalWithErrorAndMessage(e,t,n){this._logRTLA(t,{logLevel:"FATAL",attribution:this._getAttribution(n),message:this._formatLog(e,"fatal")})}_fatalWithVariables(e,t,n){this._logRTLA(new Error(e),{logLevel:"FATAL",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"fatal")})}_fatalWithErrorAndVariables(e,t,n,a){this._logRTLA(t,{logLevel:"FATAL",attribution:this._getAttribution(a),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"fatal")})}error(e,t,n,i){return a.untangleOverload.call(this,"error",e,t,n,i),!0}_errorMessage(e,t){this._logRTLA(new Error(e),{logLevel:"ERROR",attribution:this._getAttribution(t),message:this._formatLog(e,"error")})}_errorWithError(e,t){this._logRTLA(e,{logLevel:"ERROR",attribution:this._getAttribution(t),message:this._formatLog(e.message,"error")})}_errorWithErrorAndMessage(e,t,n){this._logRTLA(t,{logLevel:"ERROR",attribution:this._getAttribution(n),message:this._formatLog(e,"error")})}_errorWithVariables(e,t,n){this._logRTLA(new Error(e),{logLevel:"ERROR",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"error")})}_errorWithErrorAndVariables(e,t,n,a){this._logRTLA(t,{logLevel:"ERROR",attribution:this._getAttribution(a),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"error")})}warn(e,t,n,i){return a.untangleOverload.call(this,"warn",e,t,n),!0}_warnMessage(e,t){this._logRTLA(new Error(e),{logLevel:"WARN",attribution:this._getAttribution(t),message:this._formatLog(e,"warn")})}_warnWithErrorAndMessage(e,t,n){this._logRTLA(t,{logLevel:"WARN",attribution:this._getAttribution(n),message:this._formatLog(e,"warn")})}_warnWithError(e,t){this._logRTLA(e,{logLevel:"WARN",attribution:this._getAttribution(t),message:this._formatLog(e.message,"warn")})}_warnWithVariables(e,t,n){this._logRTLA(new Error(e),{logLevel:"WARN",attribution:this._getAttribution(n),message:this._formatLog(`${e} ${JSON.stringify(t)}`,"warn")})}_warnWithErrorAndVariables(e,t,n,a){this._logRTLA(t,{logLevel:"WARN",attribution:this._getAttribution(a),message:this._formatLog(`${e} ${t.toString()} ${JSON.stringify(n)}`,"warn")})}info(){return!0}debug(){return!0}}t.default=r},"./node_modules/@amzn/kirup/dist/src/transports/transport.browser.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.loadTransportFromConfig=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js"),i=n("./node_modules/@amzn/kirup/dist/src/transports/console/console.js"),r=n("./node_modules/@amzn/kirup/dist/src/transports/insights/insights.js"),o=n("./node_modules/@amzn/kirup/dist/src/transports/minerva/minerva.js"),l=n("./node_modules/@amzn/kirup/dist/src/transports/rtla/rtla.js");t.loadTransportFromConfig=function(e){let t;switch(e.name){case a.Transports.CONSOLE:t=new i.default(e);break;case a.Transports.MINERVA:if(!function(e){return void 0!==e.metrics&&void 0!==e.getConfig&&void 0!==e.deviceInfoProvider&&void 0!==e.getDefaultDimensions}(e))throw new Error("Minerva Transport is not configured correctly");t=new o.default(e);break;case a.Transports.INSIGHTS:if(!function(e){return void 0!==e.getInstance}(e))throw new Error("Insights Transport is not configured correctly");t=new r.default(e);break;case a.Transports.RTLA:if(!function(e){return void 0!==e.attribution}(e))throw new Error("RTLA Transport is not configured correctly");t=new l.default(e);break;default:throw new Error(`Unknown Transport name: ${e.name}`)}return t}},"./node_modules/@amzn/kirup/dist/src/transports/transport.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KirupTransport=void 0;t.KirupTransport=class{constructor(e,t){this.config=e,this.instance=t(e)}}},"./node_modules/@amzn/kirup/dist/src/utils/environment.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getCurrentEnvironment=t.isSupportingPerformanceTiming=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/configuration.js");function i(){return"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function r(){return"undefined"!=typeof self&&"undefined"!=typeof ServiceWorkerGlobalScope&&self instanceof ServiceWorkerGlobalScope}function o(){return!1==("undefined"==typeof window&&"undefined"==typeof document)&&!1===r()&&!1===i()}function l(){return o()?a.Environment.DOM:r()?a.Environment.SERVICEWORKER:i()?a.Environment.WEBWORKER:a.Environment.NODE}t.isSupportingPerformanceTiming=function(){var e,t,n,i,r,o,s,c;return l()!==a.Environment.DOM||"performance"in window&&void 0!==window.performance.mark&&void 0!==(null===(i=null===(n=null===(t=(e=window.performance).getEntriesByType)||void 0===t?void 0:t.call(e,"navigation"))||void 0===n?void 0:n[0])||void 0===i?void 0:i.domInteractive)&&void 0!==(null===(c=null===(s=null===(o=(r=window.performance).getEntriesByType)||void 0===o?void 0:o.call(r,"navigation"))||void 0===s?void 0:s[0])||void 0===c?void 0:c.domComplete)},t.getCurrentEnvironment=l},"./node_modules/@amzn/kirup/dist/src/utils/errorObject.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isErrorObject=t.objectToError=t.errorToObject=void 0,t.errorToObject=function(e){return{message:e.message,name:e.name,stack:e.stack}},t.objectToError=function(e){const t=new Error(e.message);return t.name=e.name,t.stack=e.stack,t},t.isErrorObject=function(e){return"object"==typeof e&&null!=e&&"string"==typeof e.name&&"string"==typeof e.message}},"./node_modules/@amzn/kirup/dist/src/utils/errorOverload.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.untangleOverload=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/utils/variables.js");t.untangleOverload=function(e,t,n,i,r){let o="",l=null,s=null;"string"==typeof t?(o=t,(0,a.isVariables)(n)&&(s=n)):t instanceof Error&&(l=t,"string"==typeof n?(o=n,(0,a.isVariables)(i)&&(s=i)):(0,a.isVariables)(n)&&(s=n)),l&&s?this[`_${e}WithErrorAndVariables`](o,l,s,r):l&&o?this[`_${e}WithErrorAndMessage`](o,l,r):l?this[`_${e}WithError`](l,r):s?this[`_${e}WithVariables`](o,s,r):this[`_${e}Message`](o,r)}},"./node_modules/@amzn/kirup/dist/src/utils/store.js":(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreSize=void 0;const a=n("./node_modules/@amzn/kirup/dist/src/@types/storage.js");t.getStoreSize=e=>a.LogTypes.reduce(((t,n)=>{var a;return t+((null===(a=e[n])||void 0===a?void 0:a.length)||0)}),0)},"./node_modules/@amzn/kirup/dist/src/utils/variables.js":(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isVariables=void 0,t.isVariables=function(e){return"object"==typeof e&&null!==e&&!(e instanceof Error)}},"./src/entrypoints/hydration/landing-page.tsx":(e,t,n)=>{var a=n("./src/util/hydration/hydrateWidgets.tsx"),i=n("./node_modules/react/index.js"),r=n("./src/util/api/WPSClient.ts"),o=n("./src/util/utils/geoToken.ts"),l=n("./src/util/csm/clickstreamPageParams.ts"),s=n("./src/util/wrappers/ArgsContext.tsx"),c=n("./src/util/wrappers/LoggersContext.tsx"),d=n("./src/util/api/swiftPageParams.ts"),u=n("./src/util/api/swiftCommonArgs.ts"),m=n("./src/shared/Stores/context.ts");const p="OFFER_FILTER=",g=(e,t,n,a)=>{const i=(0,m.getRequestContext)(),{queryParameters:r}=i,{pageNumber:o,pageSize:l,startIndex:s,serviceToken:c,filterId:g,jic:v,targetId:h,resiliencyToken:f}=r,y=(0,d.VF)();let b=null==a?void 0:a.serviceToken;const E=null==v?void 0:v[0];if(a)return{context:i,pageType:y.pageType,pageId:y.pageId,...b&&{serviceToken:b},...E&&{journeyIngressContext:E},isLivePageActive:e,...(0,u.Xc)(i,"LandingPage",t,{isCleanSlate:!0,isLivePageActive:e})};const C=(null==n?void 0:n.pageNumber)||parseInt(null==o?void 0:o[0])||void 0,_=(null==n?void 0:n.pageSize)||parseInt(null==l?void 0:l[0])||void 0,T=(null==n?void 0:n.startIndex)||parseInt(null==s?void 0:s[0])||void 0;b=(null==n?void 0:n.serviceToken)||(null==c?void 0:c[0]);const k=(e=>{if(null!=e&&e.includes(p))return null==e?void 0:e.replace(p,"")})(null==g?void 0:g[0]),w=(null==n?void 0:n.targetId)||(null==h?void 0:h[0]),L=(null==f?void 0:f[0])||void 0;return{context:i,pageType:y.pageType,pageId:y.pageId,...C&&{pageNumber:C},..._&&{pageSize:_},...T&&{startIndex:T},...b&&{serviceToken:b},...k&&{filterId:k},...E&&{journeyIngressContext:E},...!n&&L&&{resiliencyToken:L},isLivePageActive:e,...w&&{targetId:w},...(0,u.Xc)(i,"LandingPage",t,{isCleanSlate:!0,isLivePageActive:e})}};var v=n("./node_modules/classnames/index.js"),h=n.n(v);const f=["--dv-carousel-column-margin","--dv-carousel-column-gap","--dv-current-target-screen","--side-panel-width"];let y=new Map;function b(e){var t;return null!==(t=y.get(e))&&void 0!==t?t:""}function E(e,t=0){const n=parseInt(b(e));return isNaN(n)?t:n}function C(){if("undefined"==typeof window)return;const e=new Map,t=window.getComputedStyle(document.documentElement);f.forEach((n=>{e.set(n,t.getPropertyValue(n))})),y=e}var _=n("./src/util/utils/swiftDevice.ts"),T=n("./src/util/utils/hooks/useHasMounted.ts"),k=n("./src/util/logger/kirup.ts"),w=n("./src/util/utils/debounce.ts"),L=n("./src/util/utils/array.ts");const I=i.createContext({});I.displayName="VerticalPaginationContext";const P=({children:e})=>{const[t,n]=i.useState(null),a=i.useRef([]);let r=i.useRef([]);const[o,l]=i.useState(void 0),s=i.useMemo((()=>{let e={type:"PAGE"};null!==t&&(e={type:"CONTAINER",containerIndex:t});return{entityWithLock:e,hideBelowContainerIndex:o,actions:{lock:e=>{var i;(a.current.includes(e)||a.current.push(e),null===t)&&n(null!==(i=a.current.shift())&&void 0!==i?i:null)},unlock:e=>{var i;t===e&&n(null!==(i=a.current.shift())&&void 0!==i?i:null)},hideBelow:e=>{void 0===o?l(e):r.current.includes(e)||r.current.push(e)},unhideBelow:e=>{o===e?l(r.current.shift()):r.current=r.current.filter((t=>t!==e))},resetAll:()=>{n(null),l(void 0),r.current=[]}}}}),[t,o]);return i.createElement(I.Provider,{value:s},e)};var D=n("./node_modules/fast-deep-equal/index.js");const S=[_.fv.DesktopLinuxVariant,_.fv.DesktopWindowsVariant,_.fv.DesktopOSXVariant,_.fv.DesktopDefaultVariant,_.fv.DesktopBrowserVariant],x=_.fv.TabletDefaultVariant,M=[_.fv.MshopIOSVariant,_.fv.MshopAndroidVariant,_.fv.MshopDefaultVariant,_.fv.MobileAndroidVariant,_.fv.MobileDefaultVariant],N=i.createContext({});N.displayName="PageContext",C();const R=e=>{const[t,n]=i.useState(0),[a,r]=i.useState(!0),[o,l]=i.useState(!0),[s,c]=i.useState(!1),[d,u]=i.useState(!1),[m,p]=i.useState(!1),[g,v]=i.useState({visible:new Map,min:null,max:null}),h=(0,T.f)();function f(){p(!0)}function y(){p(!1)}function b(){r("visible"===document.visibilityState)}i.useEffect((()=>{const t="undefined"!=typeof window&&"undefined"!=typeof navigator&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),a=e.os===_.U5.Windows&&window.matchMedia("(any-pointer: coarse)").matches;c(t),l((e=>{var t;if("undefined"==typeof window)return!0;const n=null===(t=navigator.userAgent)||void 0===t?void 0:t.match("[a-z]{2}-[a-z]{3}-[a-z]{3}@[a-z]{6}.[a-z]{3}");return window.matchMedia("(hover: hover)").matches||e||!!n&&n.length>0})(a)),u(a);const i=(n,a)=>{if(a){const i=t?"TouchScreen":"NonTouchScreen";e.logger.count(`DVWeb::Storefront::${n}::${i}::${a}`,1,!1),k.c.count("DVWebPageOrientation",{Page:n,InteractionType:i,Orientation:a})}},r=()=>"undefined"==typeof window?null:window.innerWidth<window.innerHeight?"Portrait":"Landscape";let o=r();i("OnLoad",o),C();const s=(0,w.D)((()=>{const e=r();e!==o&&(o=e,i("OnResize",o)),C(),n(window.innerWidth)}),300);return"undefined"!=typeof window&&(window.addEventListener("resize",s),n(window.innerWidth)),document.addEventListener("visibilitychange",b),document.addEventListener("PVVideoPlayerPlay",f),document.addEventListener("PVVideoPlayerClosed",y),()=>{"undefined"!=typeof window&&window.removeEventListener("resize",s),document.removeEventListener("visibilitychange",b),document.removeEventListener("PVVideoPlayerPlay",f),document.removeEventListener("PVVideoPlayerClosed",y)}}),[]);const E=i.useCallback(((e,t)=>{var n,a;const i=g.visible;i.set(e,t);const r=new Array;for(const[e,t]of i)t&&(0,L.y)(r,e);const o={visible:i,min:null!==(n=r[0])&&void 0!==n?n:null,max:null!==(a=r[r.length-1])&&void 0!==a?a:null};D(o,g)||v(o)}),[g]),I=S.indexOf(e.deviceVariant)>-1,R=e.deviceVariant===x,A=M.indexOf(e.deviceVariant)>-1,O=i.useCallback((t=>(e.strings||{})[t]||""),[e.strings]),V=e.swiftPageParameters&&"resiliencyHome"===e.swiftPageParameters.pageType||!1,W=i.useMemo((()=>{var n,i;return{pageWidth:t,isTouchDevice:s,isHoverEnabled:o,isDesktopDeviceVariant:I,isTabletDeviceVariant:R,isMobileDeviceVariant:A,isPageVisible:a,hasPageMounted:h,getString:O,theme:e.theme,shouldUseReducedMotion:e.shouldUseReducedMotion,isInResiliencyMode:V,clickstream:e.clickstream,clickstreamPageContext:e.clickstreamPageContext,onContainerVisibilityChange:E,containerVisibility:g,enableVerticalPerformantRender:null!==(n=e.enableVerticalPerformantRender)&&void 0!==n&&n,contingencies:e.contingencies,isPlayerVisible:m,isTouchEnabledWindowsDevice:d,isMiniDetailsMobileOn:e.isMiniDetailsMobileOn,isContentDensityExperimentOn:e.isContentDensityExperimentOn,shouldRemoveAutoCrop:null!==(i=e.shouldRemoveAutoCrop)&&void 0!==i&&i}}),[O,I,V,a,R,A,h,s,o,t,e.clickstream,e.clickstreamPageContext,e.shouldUseReducedMotion,e.theme,E,g,e.enableVerticalPerformantRender,e.contingencies,m,d,e.isMiniDetailsMobileOn,e.isContentDensityExperimentOn,e.shouldRemoveAutoCrop]);return i.createElement(N.Provider,{value:W},i.createElement(P,null,e.children))};R.displayName="PageContainer";const A=(0,c.ty)(R);var O=n("./node_modules/@amzn/dvui/dist/DvuiContainer.js"),V=n("./src/util/utils/hooks/useSiteWideWeblabs.ts"),W=n("./src/util/utils/cookies.ts"),B=n("./src/util/csm/csm.tsx"),G=n("./src/util/utils/marketplace.ts");const H="tixsA-",j="yL46mS",$="VYbJYb",z="Kdp+st",F="_2-Gs-v",U="W8x5CV",q="hWKsaH",K="uC2zhO",Q="OR2gU1",Z="kK-hEr";var J=n("./node_modules/@amzn/dvui/dist/Icons/Arrow.js"),X=n.n(J);const Y="_5j9-V+",ee="WpAacf",te="gJx+-W",ne="vKj17S",ae="H1HVMS";function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ie.apply(this,arguments)}let re=function(e){return e.Backward="backward",e.Forward="forward",e}({});const oe=({point:e=re.Forward,onClick:t,hide:n=!1,className:a,onMoveIn:r,onMoveOut:o,disabled:l=!1,testID:s,...c})=>i.createElement("button",ie({onMouseEnter:()=>null==r?void 0:r(),onMouseLeave:()=>null==o?void 0:o(),onClick:e=>{e.preventDefault(),l||null==t||t(e)},className:v(a,ee,{[Y]:n,[ae]:e===re.Backward,[ne]:e===re.Forward})},c,{"data-testid":s}),i.createElement("div",{className:te},i.createElement(X(),null)));oe.displayName="NavigationArrow";const le=oe,se=i.createContext({connected:!1,init:e=>{}}),ce=({children:e})=>{const[t,n]=i.useState(!1),[a,r]=i.useState();let o;return i.useEffect((()=>{const e=(0,w.D)((()=>n(!1)),500),t=()=>{n(!0),e()};return null==a||a.addEventListener("scroll",t,{passive:!0}),()=>null==a?void 0:a.removeEventListener("scroll",t)}),[a]),o=a?{connected:!!a,isScrolling:t,scrollContainer:a}:{connected:!1,init:e=>{e.current&&r(e.current)}},i.createElement(se.Provider,{value:o},e)},de="hj1e0s",ue="_70Gje9",me="tHfREs",pe="_3+3zj7",ge="krHwZu";function ve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class he{constructor(e,t,n,a){ve(this,"scrollContainerRef",void 0),ve(this,"cardsVisibilityThreshold",void 0),ve(this,"visibility",void 0),ve(this,"onVisibilityChange",void 0),ve(this,"obs",void 0),ve(this,"settledUpdate",void 0),ve(this,"isFirstUpdate",void 0),this.scrollContainerRef=e,this.cardsVisibilityThreshold=n,this.onVisibilityChange=a,this.visibility=new Map;for(let e=1;e<=t;e++)this.visibility.set(e,!1);this.isFirstUpdate=!0,this.settledUpdate=(0,w.D)(this.update.bind(this),200),this.setUpIntersectionObserver()}update(){const e=new Array;for(const[t,n]of this.visibility)n&&(0,L.y)(e,t);if(0===e.length)return;const[t]=e,n=e[e.length-1];this.onVisibilityChange({visible:new Map(this.visibility),min:t,max:n})}setUpIntersectionObserver(){this.obs=new IntersectionObserver((e=>{e.forEach((e=>{const{index:t}=e.target.dataset,n=parseInt(null!=t?t:"",10);if(isNaN(n))return;const a=e.isIntersecting&&e.intersectionRatio>=this.cardsVisibilityThreshold;this.visibility.set(n,a)})),Array.from(this.visibility.values()).every((e=>!1===e))||(this.isFirstUpdate?(this.isFirstUpdate=!1,this.update()):this.settledUpdate())}),{rootMargin:"100% 0px",threshold:this.cardsVisibilityThreshold}),this.onRenderedCardsChange()}onRenderedCardsChange(){this.obs.disconnect();this.scrollContainerRef.querySelectorAll("li[data-index]").forEach((e=>{this.obs.observe(e)}))}cleanup(){this.obs.disconnect()}}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fe.apply(this,arguments)}function ye({cards:e,cardsVisibilityThreshold:t=.8,render:n,className:a,overrideScrollContainerRef:r,performantRender:o},l){var c,d;const{isCarouselVisible:u,updateVisibility:m}=i.useContext(_e),{containerVisibility:p,enableVerticalPerformantRender:g,hasPageMounted:h}=i.useContext(N),{index:f}=i.useContext(_E),[y,b]=i.useState(!1),C=i.useCallback((()=>{const t=o?Math.min(e.length,Math.ceil(o.maxCardNum)):e.length,n=new Map;for(let a=1;a<=e.length;a++)n.set(a,a>=1&&a<=t);return{visible:n,min:1,max:t}}),[e.length,o]),[_,T]=i.useState(C());i.useEffect((()=>{let e;e=null===p.min||null===p.max?f<2:f>=p.min-2&&f<=p.max+2,b(e)}),[f,p.max,p.min]);const k=i.useCallback((()=>{if(!o)return{min:1,max:e.length};const t=Math.ceil(o.maxCardNum),n=Math.max(1,_.min-t-1);let a=Math.min(e.length,_.max+t+1);return h&&g&&(u||(a=y?Math.min(e.length,_.max+1):n)),{min:n,max:a}}),[o,_.min,_.max,e.length,h,u,y,g]),[w,L]=i.useState(k()),I=null!==(c=null===(d=(0,s.G4)().render)||void 0===d?void 0:d.isRTL)&&void 0!==c&&c,P=i.useRef(null),S=null!=r?r:P,x=i.useRef(null),M=i.useContext(se);i.useEffect((()=>{!M.connected&&S.current&&M.init(S)}),[S,M]);const R=i.useMemo((()=>e=>{T(e)}),[]);i.useEffect((()=>{if(null!=S&&S.current&&m){var n;if(u)x.current=new he(S.current,e.length,t,R);else null===(n=x.current)||void 0===n||n.cleanup();return()=>{var e;return null===(e=x.current)||void 0===e?void 0:e.cleanup()}}}),[u]),i.useEffect((()=>{var e;null===(e=x.current)||void 0===e||e.onRenderedCardsChange()}),[e]),i.useEffect((()=>{if(m(_),o){const e=k();D(e,w)||L(e)}}),[k]);const A=i.useRef(new Set);i.useEffect((()=>{if(!o)return;const e=new Set;for(let t=w.min;t<=w.max;t++)A.current.has(t)||(A.current.add(t),e.add(t));var t;e.size>0&&(null==o||null===(t=o.onFirstTimeCardRender)||void 0===t||t.call(o,e))}),[w]);const O=(e,t)=>{if(null==S||!S.current||!Number.isInteger(e))return;const n=Math.max(1,Math.min(t,e));return S.current.querySelector(`li[data-index="${n}"]`)||void 0},V=i.useCallback(((e,t)=>{e.scrollTo({left:t})}),[]),W=(t,n)=>{const a=O(t,e.length),i=O(_.max,e.length);if(!a||!i||!S.current)return!1;const r=E("--dv-carousel-column-margin"),o=a.offsetLeft,l=a.getBoundingClientRect().width,s=S.current.clientWidth,c=i.offsetLeft,d=S.current.scrollLeft;let u;u=I?"first"===n?o-s+r+l:o-r:"first"===n?o-r:o-(c-d);return(1===t||(I?-1*u<l:u<l))&&(u=0),V(S.current,u),!0};i.useImperativeHandle(l,(()=>({scrollToCard:t=>{const n=O(t,e.length);if(!n||!S.current)return!1;const a=E("--dv-carousel-column-margin"),{scrollLeft:i}=S.current,r=n.offsetLeft,o=n.getBoundingClientRect().width,l=S.current.clientWidth;let s;if(r>i){if(r+o<i+l)return!1;s=r-l+o+a}else s=r-a;return V(S.current,s),!0},scrollToCardFirstVisible:e=>W(e,"first"),scrollToCardLastVisible:e=>W(e,"last"),cardsRef:S})),[e.length,S,_.min,_.max]);const B=e.map(((t,r)=>{var l,s,c;const d=r+1,u=d>=w.min&&d<=w.max||d<(null!==(l=null==o?void 0:o.startIndexForVirtualisation)&&void 0!==l?l:0)||d>(null!==(s=null==o?void 0:o.endIndexForVirtualisation)&&void 0!==s?s:e.length),m={"data-index":`${d}`};return u||(m["data-hidden"]="true"),i.createElement("li",fe({key:r,className:v(me,a)},m),u&&n(t,null!==(c=_.visible.get(d))&&void 0!==c&&c,r))}));return i.createElement("ul",{className:ue,ref:P},B)}ye.displayName="CardContainer";const be=i.forwardRef(ye);var Ee=n("./src/util/utils/useInteractionObserver.tsx");function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ce.apply(this,arguments)}const _e=i.createContext({default:!0,state:{visible:new Map,min:0,max:0},isCarouselVisible:!1,scrollToCard:e=>!1,updateCarouselVisibility:e=>!1,updateVisibility:e=>{}});_e.displayName="CarouselContext";const Te=({cards:e,carouselVisibilityThreshold:t=0,cardsVisibilityThreshold:n,className:a,renderContainer:r,renderCard:o,footer:l,header:s,customCarouselContainer:c,overrideScrollContainerRef:d,performantRender:u,testID:m,...p},g)=>{var h;const f=i.useRef(null),{updateCarouselVisibility:y}=i.useContext(_e),{pageWidth:b}=i.useContext(N);i.useEffect((()=>{var e,t;null==f||null===(e=f.current)||void 0===e||null===(t=e.scrollBy)||void 0===t||t.call(e,0,0)}),[b]);const E=i.useCallback((([{isIntersecting:e,intersectionRatio:n}])=>{y(e&&n>=t)}),[]);(0,Ee.S)({enabled:!0,target:f,onIntersect:E,threshold:t});const C=v(de,a),_=i.createElement(be,{cards:e,render:o,cardsVisibilityThreshold:n,ref:g,overrideScrollContainerRef:d,performantRender:u}),T=null!=c?c:i.Fragment;return i.createElement(T,null,i.createElement("section",{"data-testid":m},s,i.createElement("div",Ce({className:C,ref:f},p),null!==(h=null==r?void 0:r({carousel:_}))&&void 0!==h?h:_),l))};Te.displayName="Carousel";const ke=i.forwardRef(Te),we="eSOPph",Le="yIoxDk",Ie="uryRTT",Pe="_3UoYy5",De="I-rccJ";function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Se.apply(this,arguments)}let xe=function(e){return e[e.None=0]="None",e[e.Framed=1]="Framed",e[e.Regular=2]="Regular",e}({}),Me=function(e){return e[e.Default=0]="Default",e[e.FirstVisible=1]="FirstVisible",e[e.LastVisible=2]="LastVisible",e}({});const Ne=e=>e,Re=i.memo(i.forwardRef((({navigation:e,isHalfSizedArrowFrame:t,cards:n,carouselVisibilityThreshold:a,cardsVisibilityThreshold:r,className:o,renderContainer:l,onNavigate:s,scrollType:c=Me.Default,wrapperClassName:d,hasCircleCard:u=!1,...m},p)=>{var g;const h=i.useContext(_e),{getString:f,onContainerVisibilityChange:y,isHoverEnabled:b}=i.useContext(N),{actions:E,hasMoreItems:C,index:_}=i.useContext(_E),T=i.useRef(null),k=null!==(g=p)&&void 0!==g?g:T,L=i.useRef(),[I,P]=i.useState({visible:new Map,min:0,max:0}),[S,x]=i.useState(!1),[M,R]=i.useState(!1),[A,O]=i.useState(!1),V=i.useCallback((()=>R(!0)),[]),W=i.useCallback((()=>R(!1)),[]),[B,G]=i.useState(!1),H=i.useCallback((()=>G(!0)),[]),j=i.useCallback((()=>G(!1)),[]),[$,z]=i.useState(!1),F=v(o,we,{[Ie]:e!==xe.None,[Pe]:e===xe.Framed,[De]:!0===t});i.useEffect((()=>{var e;const t=(0,w.D)((()=>{L.current=void 0}),25),n=null===(e=k.current)||void 0===e?void 0:e.cardsRef.current;return null==n||n.addEventListener("scroll",t,{passive:!0}),()=>{null==n||n.removeEventListener("scroll",t)}}),[k]),i.useEffect((()=>{h.default||(I.min=h.state.min,I.max=h.state.max);const e=I.max-I.min,t=n.length-2*e;I.min>=t&&C&&E&&E.onPaginateContainer&&E.onPaginateContainer()}),[I.min,I.max]);const U=i.useMemo((()=>({default:!1,state:I,isCarouselVisible:S,hasCircleCard:u,isCarouselHovered:M,isCarouselFocused:B,isHoveringNavArrows:A,scrollToCard:(e,t=Me.Default)=>{var n,a,i,r;return null!==(n=t===Me.FirstVisible?null===(a=k.current)||void 0===a?void 0:a.scrollToCardFirstVisible(e):t===Me.LastVisible?null===(i=k.current)||void 0===i?void 0:i.scrollToCardLastVisible(e):null===(r=k.current)||void 0===r?void 0:r.scrollToCard(e))&&void 0!==n&&n},updateCarouselVisibility:e=>{x(e),y(_,e)},updateVisibility:e=>{D(I,e)||P(e)}})),[I,S,u,M,B,A,c,k,y,_]),q=null!=l?l:Ne,K=i.useCallback((({carousel:t})=>{if(!e)return q(t);const a={state:I,scrollToCard:U.scrollToCard};h.default||(a.state=h.state,a.scrollToCard=h.scrollToCard);const r=e=>{var t;null!==(t=L.current)&&void 0!==t||(L.current=a.state.max);let i=L.current;i>=a.state.min&&i<=a.state.max?i=(e>0?a.state.max:a.state.min)+e:i+=e,L.current=Math.max(1,Math.min(n.length,i)),a.scrollToCard(L.current,c)};let o,l;const d=a.state.max-a.state.min;d>1?(o=f("DV_WEB_ARIA_PREVIOUS_N_TITLES").replace("{steps}",`${d}`),l=f("DV_WEB_ARIA_NEXT_N_TITLES").replace("{steps}",`${d}`)):(o=f("DV_WEB_ARIA_PREVIOUS_TITLE"),l=f("DV_WEB_ARIA_NEXT_TITLE"));const u=M||B;return i.createElement(i.Fragment,null,i.createElement(le,{className:Le,point:re.Backward,onClick:()=>{const e=null==s?void 0:s(re.Backward,I);e?r(e):a.scrollToCard(a.state.min-1,Me.LastVisible),z(!0),setTimeout((()=>{z(!1)}),1e3)},hide:!u||a.state.visible.get(1)||!b,"aria-label":o,onMoveIn:()=>O(!0),onMoveOut:()=>O(!1),testID:"left-arrow",disabled:$}),q(t),i.createElement(le,{className:Le,point:re.Forward,onClick:()=>{const e=null==s?void 0:s(re.Forward,I);e?r(e):a.scrollToCard(a.state.max+1,Me.FirstVisible),z(!0),setTimeout((()=>{z(!1)}),1e3)},hide:!u||a.state.visible.get(n.length)||!b,"aria-label":l,onMoveIn:()=>O(!0),onMoveOut:()=>O(!1),testID:"right-arrow",disabled:$}))}),[e,n.length,M,B,I,s,$]);return i.createElement(_e.Provider,{value:U},i.createElement("div",{onMouseEnter:V,onMouseLeave:W,onFocus:H,onBlur:j,className:d},i.createElement(ke,Se({},m,{className:F,cards:n,renderContainer:K,ref:k,carouselVisibilityThreshold:a,cardsVisibilityThreshold:r}))))})));Re.displayName="NavigationCarousel";const Ae=Re;var Oe=n("./node_modules/@amzn/dvui/dist/Text.js"),Ve=n("./node_modules/@amzn/dvui/dist/Icons/Entitled.js"),We=n.n(Ve),Be=n("./node_modules/@amzn/dvui/dist/Icons/Ads.js"),Ge=n.n(Be),He=n("./node_modules/@amzn/dvui/dist/Icons/Unentitled.js"),je=n.n(He),$e=n("./node_modules/@amzn/dvui/dist/EntitlementMessage.js");const ze="_8w2yV3",Fe="V33oTZ",Ue="w1sRPC",qe="Le7hMb",Ke="x5HxKQ",Qe="xe-Hy+";function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ze.apply(this,arguments)}const Je=({icon:e})=>{switch(e){case Xe.ENTITLED:return i.createElement("span",{className:qe,"data-testid":"entitled-icon"},i.createElement(We(),null));case Xe.ADS:return i.createElement("span",{className:Qe,"data-testid":"ads-icon"},i.createElement(Ge(),null));case Xe.OFFER:return i.createElement("span",{className:Ke,"data-testid":"unentitled-icon"},i.createElement(je(),null));default:return null}};let Xe=function(e){return e.OFFER="OFFER_ICON",e.ADS="ADS_ICON",e.ENTITLED="ENTITLED_ICON",e}({});function Ye(e){const t="string"==typeof e?e:null==e?void 0:e.string;return!t||/^\s*$/.test(t)}const et=({message:e,icon:t,className:n,labelClassName:a,hideIcon:r=!1,takeUpSpaceIfEmpty:o=!1})=>Ye(e)&&Ye(t)?o?i.createElement("div",{className:h()(ze,Fe,n)}," "):null:i.createElement("div",{className:h()(ze,n)},t&&!r&&i.createElement(Je,{icon:t}),e&&i.createElement(Oe.Text,{className:h()(Ue,a),string:e})),tt=e=>{switch(e){case Xe.ENTITLED:return $e.EntitlementType.entitled;case Xe.ADS:return $e.EntitlementType.ads;case Xe.OFFER:return $e.EntitlementType.offer;default:return}},nt=e=>{if((0,V.h)()("DV_WEB_FABLE_BADGE_MIGRATION_708245").isT1){const{icon:t,...n}=e;return i.createElement($e.EntitlementMessage,Ze({},n,{entitlementType:tt(t)}))}return i.createElement(et,e)};var at=n("./node_modules/@amzn/dvui/dist/Icons/Cancel.js"),it=n.n(at);const rt="var(--dvui-icon-small-height)",ot="var(--dvui-icon-small-width)",lt="BM30T6",st="gWrHlr",ct="wZ3MPH",dt="nK721o",ut="OLz56u",mt="_0tLEHl",pt="p7TDYn",gt="_308gAz";var vt=n("./node_modules/@amzn/dvui/dist/Fable/components/IconButton/index.js");const ht=({href:e,isDisabled:t,icon:n,isInverted:a,label:r,className:o,labelClassName:l,onSecondaryButtonClick:s,isTransparentBackground:c,ariaLabel:d,testID:u,smallIconVariant:m=!1})=>{if((0,V.h)()("DV_WEB_FABLE_ICON_MIGRATION_651317").isT1&&n){const l=a?vt.SecondaryIconButton:vt.PrimaryIconButton,p={href:e,icon:n,label:r,className:o,testID:u,disabled:t,onClick:s,size:m?"small":"standard",ariaLabel:d||r||"",showLabelOnTouchDevices:c};return i.createElement(l,p)}const p=e?"a":"button",g=v(o,lt,{[mt]:a,[dt]:c});return i.createElement("div",{className:g},i.createElement(p,{disabled:t,href:e,onClick:s,className:v(st,{[ut]:m}),"aria-label":d||r,"data-testid":u},n),r&&!t&&i.createElement("label",{className:v(l,ct,{[pt]:a,[gt]:c}),"aria-hidden":!0},r))},ft=({hideThisAction:e,titleID:t,buttonStyle:n,textStyle:a,callback:r,isInDropdown:o,isModalVariant:l})=>{const{actions:{onHideThis:s}}=i.useContext(_E),c=e=>{e.preventDefault(),s(e,t,r)},{tag:d,text:u,endpoint:{partialURL:m,query:p}={partialURL:"",query:{}}}=e,g=Object.keys(p).map((e=>i.createElement("input",{type:"hidden",name:e,defaultValue:p[e],key:e})));return i.createElement("form",{action:m,method:"POST"},g,o||l||"Hide"!==d?i.createElement("button",{type:"submit",className:n,onClick:c,"data-testid":"hide-this"},"Hide"===d&&i.createElement(it(),null),i.createElement("span",{className:a},u)):i.createElement(ht,{onSecondaryButtonClick:c,label:u,labelClassName:a,className:n,isInverted:!1,isDisabled:!1,icon:i.createElement(it(),{width:ot,height:rt}),smallIconVariant:!0,testID:"hide-this"}))};let yt=function(e){return e.SixteenByNine="16/9",e.ThreeByOne="3/1",e.TwoByThree="2/3",e.ThirtyTwoByFifteen="32/15",e.OneByOne="1/1",e.ThreeHundredFortyFiveByFiftySix="345/56",e}({});const bt={disableRightClick:!1,muted:!0,activeActivePlayer:null,activePassivePlayer:null,fullScreen:!1,updateContext:null},Et=i.createContext(bt);Et.displayName="VideoContext";var Ct=n("./src/util/logger/logger.ts");const _t=new Map,Tt=(e,t,n=1e3)=>{const a=e&&e.trackingEvents&&e.trackingEvents[t];if(a&&!_t.has(a)){wt(e,t,a,!1);const i=kt(n).then((()=>(_t.delete(a),fetch(a)))).catch((e=>{_t.delete(a),Lt("Error firing Draper tracking event with eventUrl: "+a,e)}));return _t.set(a,i),i.then((()=>{}))}return a&&wt(e,t,a,!0),Promise.resolve()},kt=e=>new Promise((t=>setTimeout(t,e))),wt=(e,t,n,a=!1)=>{window&&window.location.href.includes("draperDebug")&&window.console.log({eventLogged:t,trackingEventURL:n,videoURL:e.mediaFile,debounced:a})},Lt=(e,t)=>(0,B.rp)(t,{logLevel:Ct.in.ERROR,message:e,attribution:"DVWebNodeDraperPlayer"}),It="_0r6cJW",Pt="nQnwnT",Dt="gtWNAJ",St="U7TB9C",xt="VSsT7g",Mt="WTxGCk",Nt="ESUyK5",Rt="ir0qzn",At="_4TmRYM",Ot="RR3G1W",Vt="+LFxJa",Wt="_7tkjs4",Bt="+DtcwT",Gt="rC0Coh",Ht="sVB4J4",jt="OTNFD1",$t="g2IzQA";var zt={Superhero:0,Packshot:1,PackshotWithEntitlementCue:2,IntermissionHero:3,DetailHero:4,ChartsCarousel:5,StandardHero:6,ChartsContainer:7,StandardMiniDetails:8,TentpoleHero:9,SuperCarousel:10};function Ft(e){return e.playerIsActive?null===e.videoContext.activeActivePlayer:null===e.videoContext.activePassivePlayer}function Ut(e,t){return e.playerIsActive?e.videoContext.activeActivePlayer===t:e.videoContext.activePassivePlayer===t&&null===e.videoContext.activeActivePlayer}function qt(e,t){var n,a;if(e.playerIsActive&&e.videoContext.activeActivePlayer===t)null===(n=(a=e.videoContext).updateContext)||void 0===n||n.call(a,{...e.videoContext,activeActivePlayer:null});else if(e.videoContext.activePassivePlayer===t){var i,r;null===(i=(r=e.videoContext).updateContext)||void 0===i||i.call(r,{...e.videoContext,activePassivePlayer:null})}}const Kt=i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1",id:"svg2","aria-hidden":!0},i.createElement("defs",{id:"defs11"},i.createElement("mask",{maskUnits:"userSpaceOnUse",id:"mask4258"},i.createElement("g",{id:"g4260"},i.createElement("rect",{y:"0",x:"2",height:"24",width:"22",style:{fill:"#ffffff"}}),i.createElement("path",{d:"m 21.5,2 -16,20",style:{stroke:"#000000",strokeWidth:2}})))),i.createElement("circle",{style:{opacity:.7,fill:"#0f171e"},r:"20",cy:"20",cx:"20",id:"Oval"}),i.createElement("g",{style:{fill:"#ffffff"},transform:"translate(8,8)",id:"icon/unmuted",mask:"url(#mask4258)"},i.createElement("path",{id:"Fill-1",d:"m 4.5488,9 c -0.303,0 -0.549,0.247 -0.549,0.549 l 0,4.902 c 0,0.303 0.246,0.549 0.549,0.549 l 3.451,0 c 0.184,0 0.363,0.051 0.521,0.146 l 6.479,3.949 0,-14.392 -6.461,4.139 C 8.3788,8.945 8.1918,9 7.9998,9 l -3.451,0 z m 11.451,12.875 c -0.18,0 -0.36,-0.049 -0.52,-0.146 L 7.7198,17 4.5488,17 c -1.405,0 -2.549,-1.144 -2.549,-2.549 l 0,-4.902 C 1.9998,8.144 3.1438,7 4.5488,7 l 3.158,0 7.754,-4.967 c 0.31,-0.198 0.699,-0.21 1.019,-0.035 0.321,0.175 0.52,0.511 0.52,0.877 l 0,18 c 0,0.361 -0.195,0.695 -0.511,0.872 -0.151,0.085 -0.32,0.128 -0.489,0.128 l 0,0 z"}),i.createElement("path",{id:"Fill-3",d:"m 19,19 c -0.256,0 -0.512,-0.098 -0.707,-0.293 -0.39,-0.389 -0.391,-1.019 -0.004,-1.41 C 18.375,17.207 20,15.472 20,12 20,8.509 18.357,6.774 18.287,6.702 17.905,6.307 17.91,5.676 18.301,5.29 18.695,4.903 19.32,4.906 19.707,5.293 19.801,5.387 22,7.636 22,12 22,16.364 19.801,18.613 19.707,18.707 19.512,18.902 19.256,19 19,19"})),i.createElement("path",{style:{stroke:"#ffffff",strokeWidth:2,strokeLinecap:"round"},d:"M 27,10 11,30"})),Qt=i.createElement("svg",{width:"40px",height:"40px",viewBox:"0 0 40 40","aria-hidden":!0},i.createElement("g",{id:"icon/sound-on",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.createElement("circle",{id:"Oval",fill:"#0F171E",opacity:"0.7",cx:"20",cy:"20",r:"20"}),i.createElement("g",{id:"icon/unmuted",transform:"translate(8.000000, 8.000000)",fill:"#FFFFFF"},i.createElement("path",{d:"M4.5488,9 C4.2458,9 3.9998,9.247 3.9998,9.549 L3.9998,14.451 C3.9998,14.754 4.2458,15 4.5488,15 L7.9998,15 C8.1838,15 8.3628,15.051 8.5208,15.146 L14.9998,19.095 L14.9998,4.703 L8.5388,8.842 C8.3788,8.945 8.1918,9 7.9998,9 L4.5488,9 Z M15.9998,21.875 C15.8198,21.875 15.6398,21.826 15.4798,21.729 L7.7198,17 L4.5488,17 C3.1438,17 1.9998,15.856 1.9998,14.451 L1.9998,9.549 C1.9998,8.144 3.1438,7 4.5488,7 L7.7068,7 L15.4608,2.033 C15.7708,1.835 16.1598,1.823 16.4798,1.998 C16.8008,2.173 16.9998,2.509 16.9998,2.875 L16.9998,20.875 C16.9998,21.236 16.8048,21.57 16.4888,21.747 C16.3378,21.832 16.1688,21.875 15.9998,21.875 L15.9998,21.875 Z",id:"Fill-1"}),i.createElement("path",{d:"M19,19 C18.744,19 18.488,18.902 18.293,18.707 C17.903,18.318 17.902,17.688 18.289,17.297 C18.375,17.207 20,15.472 20,12 C20,8.509 18.357,6.774 18.287,6.702 C17.905,6.307 17.91,5.676 18.301,5.29 C18.695,4.903 19.32,4.906 19.707,5.293 C19.801,5.387 22,7.636 22,12 C22,16.364 19.801,18.613 19.707,18.707 C19.512,18.902 19.256,19 19,19",id:"Fill-3"})))),Zt=i.createElement("svg",{width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1","aria-hidden":!0},i.createElement("g",{id:"fullscreen-button",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.createElement("circle",{id:"Oval",fill:"#0F171E",opacity:"0.7",cx:"20",cy:"20",r:"20"}),i.createElement("g",{id:"fullscreen",fill:"#FFFFFF",transform:"translate(7.5, 7.5)"},i.createElement("path",{d:"M24.969,0.002 L24.969,0.002 L24.969,0 L21.969,0 L21.969,0.002 L15.969,0 L15.969,3 L19.723,3 L13.852,8.871 L15.973,10.992 L21.969,4.996 L21.969,9 L24.969,9 L24.969,2.25 L24.969,0.002 L24.969,0.002 Z",id:"Shape_1_"}),i.createElement("path",{d:"M9,22 L5.246,22 L11.117,16.129 L8.996,14.008 L3,20.004 L3,16 L0,16 L0,22.75 L0,25 L3,25 L9,25 L9,22 L9,22 Z",id:"Shape_2_"})))),Jt=i.createElement("svg",{width:"40px",height:"40px",viewBox:"0 0 40 40",version:"1.1","aria-hidden":!0},i.createElement("g",{id:"exit-fullscreen",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.createElement("circle",{id:"Oval",fill:"#0F171E",opacity:"0.7",cx:"20",cy:"20",r:"20"}),i.createElement("g",{id:"exit-fullscreen",fill:"#FFFFFF",transform:"translate(5, 7)"},i.createElement("path",{d:"M9.984,15 L3.984,15 L3.985,18 L7.738,18 L0.867,24.871 L2.989,26.992 L9.984,19.996 L9.984,24 L12.984,24 L12.984,17.25 L12.984,15.001 L9.984,15 Z",id:"Shape_1_"}),i.createElement("path",{d:"M21.262,9 L28.133,2.129 L26.012,0.008 L19.016,7.004 L19.016,3 L16.016,3 L16.016,9.75 L16.016,11.999 L19.016,12 L25.016,12 L25.016,9 L21.262,9 Z",id:"Shape_2_"})))),Xt="l-Wis8",Yt="ExYz7n",en="g4YeUe";var tn=n("./node_modules/@amzn/dvui/dist/Icons/Unmuted.js"),nn=n.n(tn),an=n("./node_modules/@amzn/dvui/dist/Icons/Muted.js"),rn=n.n(an);const on=e=>{const t=!e.disableUnmute;if(!t&&!e.enableFullscreen)return null;const n=i.createElement(i.Fragment,null,t&&e.videoContext.muted?i.createElement("button",{key:"unmute","aria-label":e.textMap.unmuteButton,onMouseDown:e.toggleMute,className:"tst-video-overlay-player-muted"},Kt):void 0,t&&!e.videoContext.muted?i.createElement("button",{key:"mute","aria-label":e.textMap.muteButton,onMouseDown:e.toggleMute,className:"tst-video-overlay-player-unmuted"},Qt):void 0),a=t?i.createElement(ht,{icon:e.videoContext.muted?i.createElement(rn(),null):i.createElement(nn(),null),isInverted:!0,onSecondaryButtonClick:e.toggleMute,testID:e.videoContext.muted?"unmute":"mute"}):null;return i.createElement("div",{className:v(Xt,{[Yt]:[zt.Packshot,zt.PackshotWithEntitlementCue].includes(e.placement),[en]:e.placement===zt.StandardMiniDetails})},e.useDefaultBackground?n:a,e.enableFullscreen&&!e.videoContext.fullScreen?i.createElement("button",{className:"tst-video-overlay-player-fullscreen","aria-label":e.textMap.enterFullscreen,key:"fullscreen",onMouseDown:e.toggleFullscreen},Zt):void 0,e.enableFullscreen&&e.videoContext.fullScreen?i.createElement("button",{className:"tst-video-overlay-player-exit-fullscreen","aria-label":e.textMap.exitFullscreen,key:"exit-fullscreen",onMouseDown:e.toggleFullscreen},Jt):void 0)};var ln=n("./src/util/api/APIClient.ts");let sn=function(e){return e.ATVMyStuff="ATVMyStuff",e.ATVProfiles="ATVProfiles",e.ATVDetail="ATVDetail",e.ATVHome="ATVHome",e.ATVBrowse="ATVBrowse",e.ATVPerson="ATVPerson",e.ATVUnknown="ATVUnknown",e.ATVDownloads="ATVDownloads",e.ATVSubscription="ATVSubscription",e.ATVSearch="ATVSearch",e.ATVMerch="ATVMerch",e.ATVWatchParty="ATVWatchParty",e.ATVMoviesAnywhere="ATVMoviesAnywhere",e.ATVModal="ATVModal",e.ATVLive="ATVLive",e.ATVGenre="ATVGenre",e.ATVCategories="ATVCategories",e.ATVRoadblock="ATVRoadblock",e.ATVSplash="ATVSplash",e.Detail="Detail",e.DetailWebView="DetailWebView",e.DetailAW="DetailAW",e.PVPerson="PVPerson",e.DVWebAjaxAnalytics="DVWebAjaxAnalytics",e.DVSPA="DVSPA",e}({}),cn=function(e){return e.Library="Library",e.Watchlist="Watchlist",e.Channels="Channels",e.Following="Following",e.Home="Home",e.Store="Store",e.FreeToMe="FreeToMe",e.TV="TV",e.Kids="Kids",e.Search="Search",e.SearchInput="SearchInput",e.Browse="Browse",e.Categories="Categories",e.WhosWatching="WhosWatching",e.Manage="Manage",e.Edit="Edit",e.Associate="Associate",e.Create="Create",e.PinAndLocks="PinAndLocks",e.Season="Season",e.Movie="Movie",e.Event="Event",e.InstantVideo="InstantVideo",e.TVSeason="TVSeason",e.SSM="SSM",e.Actor="Actor",e.Watch="Watch",e.Chat="Chat",e.PVWinApp="PVWinApp",e.GettingStarted="GettingStarted",e.IAS="IAS",e.Main="Main",e.Unknown="Unknown",e}({}),dn=function(e){return e.Explore="pvwindowsapp-explore",e.DetailPage="pvwindowsapp-dp",e.Live="pvwindowsapp-live",e.AccList="pvwindowsapp-al",e.WindowsApp="pvwindowsapp-main",e.Unknown="pvwindowsapp-unknown",e}({}),un=function(e){return e.Explore="pvweb-explore",e.DetailPage="pvweb-dp",e.Live="pvweb-live",e.AccList="pvweb-al",e.WindowsApp="pvweb-winapp",e.Unknown="pvweb-unknown",e}({}),mn=function(e){return e.Web="web",e.WinApp="winApp",e}({});const pn={[sn.ATVMyStuff]:{[mn.WinApp]:dn.AccList,[mn.Web]:un.AccList},[sn.ATVProfiles]:{[mn.WinApp]:dn.AccList,[mn.Web]:un.AccList},[sn.ATVDetail]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage},[sn.ATVPerson]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage},[sn.ATVWatchParty]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage},[sn.ATVMoviesAnywhere]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage},[sn.ATVHome]:{[mn.WinApp]:dn.Explore,[mn.Web]:un.Explore},[sn.ATVBrowse]:{[mn.WinApp]:dn.Explore,[mn.Web]:un.Explore},[sn.ATVSearch]:{[mn.WinApp]:dn.Explore,[mn.Web]:un.Explore},[sn.ATVMerch]:{[mn.WinApp]:dn.Explore,[mn.Web]:un.Explore},[sn.ATVSubscription]:{[mn.WinApp]:dn.Explore,[mn.Web]:un.Explore},[sn.ATVUnknown]:{[mn.WinApp]:dn.Unknown,[mn.Web]:un.Unknown},[sn.ATVDownloads]:{[mn.WinApp]:dn.WindowsApp,[mn.Web]:un.WindowsApp},[sn.DVSPA]:{[mn.WinApp]:dn.WindowsApp,[mn.Web]:un.WindowsApp},[sn.ATVModal]:{[mn.WinApp]:dn.Live,[mn.Web]:un.Live},[sn.ATVLive]:{[mn.WinApp]:dn.Explore,[mn.Web]:un.Explore},[sn.ATVGenre]:{[mn.WinApp]:dn.Explore,[mn.Web]:un.Explore},[sn.ATVCategories]:{[mn.WinApp]:dn.Explore,[mn.Web]:un.Explore},[sn.Detail]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage},[sn.DetailWebView]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage},[sn.DetailAW]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage},[sn.PVPerson]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage},[sn.DVWebAjaxAnalytics]:{[mn.WinApp]:dn.DetailPage,[mn.Web]:un.DetailPage}};let gn=function(e){return e.SignOut="SignOut",e.SignIn="SignIn",e.Share="Share",e.Search="Search",e.CarouselScroll="CarouselScroll",e.Purchase="Purchase",e.Rent="Rent",e.PlayTrailer="PlayTrailer",e.PlayStream="PlayStream",e.PlayDraper="PlayDraper",e.PlayDownload="PlayDownload",e.Download="Download",e.Click="Click",e.Back="Back",e.AddToWatchlist="AddToWatchlist",e.RemoveFromWatchlist="RemoveFromWatchlist",e.PageNavigate="PageNavigate",e.ModalRendered="ModalRendered",e.DefaultAction="Click",e}({}),vn=function(e){return e.PageHit="pageHit",e.PageTouch="pageTouch",e.PopUp="popUp",e.actionOnly="actionOnly",e.refreshButton="refreshButton",e.BackForwardButton="bf=10",e}({});var hn=n("./src/util/utils/device.ts"),fn=n("./src/shared/deviceProxy/marketplaceUtils.ts");const yn="AOAGZA014O5RE",bn=(e,t)=>`https://${(0,fn.getDeviceProxyEndpoint)(e.marketplaceID,t)}`,En=e=>({deviceID:e.deviceID,deviceTypeID:(0,hn.dz)().deviceTypeId,gascEnabled:(0,G.ST)()?"true":"false",marketplaceID:e.marketplaceID,uxLocale:e.locale});var Cn=n("./src/util/utils/refMarker.ts"),_n=n("./src/util/api/util.ts");let Tn=function(e){return e.DownloadActionDisable="DownloadAction:Disable",e.DownloadActionEnable="DownloadAction:Enable",e.DownloadActionResume="DownloadAction:Resume",e.DownloadActionHold="DownloadAction:Hold",e.DownloadActionPause="DownloadAction:Pause",e.DownloadActionRefresh="DownloadAction:Refresh",e.DownloadActionRemove="DownloadAction:Remove",e.DownloadActionRetry="DownloadAction:Retry",e.DownloadActionRelease="DownloadAction:Release",e.DownloadActionStarted="DownloadAction:Started",e.HeartbeatXPDownloads="DownloadActive:XP",e.DownloadEventDownloadError="DownloadEvent:DownloadError",e.DownloadEventStatusChange="DownloadEvent:StatusChange",e.DownloadEventLocalContentError="DownloadEvent:LocalContentError",e.DownloadEventRefreshed="DownloadEvent:Refreshed",e.DownloadEventRefreshing="DownloadEvent:Refreshing",e.DownloadEventRefreshError="DownloadEvent:RefreshError",e.DownloadEventProgress="DownloadEvent:Progress",e.DownloadEventTriggered="DownloadEvent:Triggered",e.DownloadOfflineDataSavingError="offline-data-saving-error",e.DownloadReportNoDownloads="dl-no-downloads",e.DownloadReportNoDownloadsButMetadata="dl-no-downloads-but-metadata",e.DownloadReportNoMetadataButDownloads="dl-no-metadata-but-downloads",e.DownloadReportNoMetadata="dl-no-metadata",e.DownloadReportNoDownloadsNoMetadata="dl-nothing",e.DownloadAdditionalLanguageDefault="download-additional-language-default",e.DownloadQualityDefault="download-download-quality-default",e.DownloadQualityDownloadSettingsPage="download-quality:settings-page",e.DownloadQualityDownloadSettingsModal="download-quality:download-settings-modal",e.DownloadSettingsModalDownloadQualityTabOpened="download-settings-modal-download-quality-tab-opened",e.DownloadSettingsModalLanguageTabOpened="download-settings-modal-language-tab-opened",e.DownloadSettingsModalDownloadStart="download-settings-modal:download-start",e.DownloadSettingsModalOpen="download-settings-modal:open",e.DownloadMissingAudioTracks="missing-audio-tracks",e.DownloadMultiDeleteRequested="multi-delete-requested",e.DownloadMissingDownloadsMetadata="missing-downloads-metadata",e.RepopulateDownloadMetadata="DownloadReport.RepopulateDownloadMetadata",e.DownloadNoAction="download-no-action",e.GetAllDownloadOperations="GetAllDownloadOperations",e.XPDownloadTimingDownloadsMetadataReceived="xp-download-timing:downloads-metadata-received",e.XPDownloadTimingDownloadsPayloadConstructed="xp-download-timing:downloads-payload-constructed",e.XPDownloadTimingLCMLoaded="xp-download-timing:lcm-loaded",e.XPDownloadTimingOperationsDataReceived="xp-download-timing:operations-data-received",e.XPDownloadTimingSDKLoaded="xp-download-timing:sdk-loaded",e.EditDownloadsClicked="edit-clicked",e.DownloadFallBackStreaming="fallback-streaming",e}({}),kn=function(e){return e.PlaybackOrigin="PlaybackOrigin",e.PlaybackOriginNativePlayback="PlaybackOrigin:NativePlayback",e.PlaybackOriginXpPlayback="PlaybackOrigin:XpPlayback",e.PlaybackTitleIdMismatch="playback-title-id-mismatch",e}({}),wn=function(e){return e.SWClearCache="sw-clear-cache",e.AssetLoadingFailed="AssetLoadingFailed",e.CXBlockingErrorRecovered="CXBlockingErrorRecovered",e.CXBlockingErrorUnknown="CXBlockingErrorUnknown",e.ChunkFailedToLoad="ChunkFailedToLoad",e.FetchResponseCode400="HTTP:400",e.FetchResponseCode403="HTTP:403",e.LogoutActionTimeout="LogoutAction-Timeout",e.ProfileSwitch="ProfileSwitch",e.SPAInitialisation="SPAInitialisation",e.Deeplink="deeplink",e.DeeplinkAction="deeplinkAction",e.NavBarToggle="navigationBar:toggle",e.ProfilesModalOpen="profilesModal:open",e.SpaEPAReload="spa-epa-reload",e.UXLanguageChangeShowErrorBanner="uxLanguageChange-show-error-banner",e.WidgetMount="widget-mount",e.AppUpdateBannerAction="AppUpdateBannerAction",e.AppUpdateSunsetAction="AppUpdateSunsetAction",e}({}),Ln=function(e){return e.CallClickStream="Call:Clickstream",e.CallConsumeRental="Call:ConsumeRental",e.CallRelease="Call:Release",e.CallSync="Call:Sync",e.CallUpdateStream="Call:UpdateStream",e.CallUndefined="Call:Undefined",e.SyncDisable="Sync:Disable",e.SyncRefresh="Sync:Refresh",e.SyncDelete="Sync:Delete",e.SyncNoAction="Sync:NoAction",e.SyncUnknown="Sync:Unknown",e}({});function In(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Pn={credentials:"include",headers:{},body:void 0};let Dn=function(e){return e.Clickstream="Clickstream",e.ConsumeRental="ConsumeRental",e.Release="Release",e.Sync="Sync",e.UpdateStream="UpdateStream",e.RecordIASFeedback="RecordIASFeedback",e}({});const Sn={Clickstream:Ln.CallClickStream,ConsumeRental:Ln.CallConsumeRental,Release:Ln.CallRelease,Sync:Ln.CallSync,UpdateStream:Ln.CallUpdateStream,RecordIASFeedback:Ln.CallClickStream};class xn{constructor({logger:e,retryLogic:t,logErrorAsWarning:n=!1}){In(this,"context",void 0),In(this,"logger",void 0),In(this,"retryLogic",void 0),In(this,"logErrorAsWarning",void 0),In(this,"defaultRetryCondition",(()=>!1)),In(this,"logError",((e,t,n)=>{this.logErrorAsWarning?this.logger.warn(t,{errorMessage:null==e?void 0:e.message,...n}):this.logger.error(`${e.toString()} ${t}`,n)})),this.context=(0,m.getRequestContext)(),this.logger=e;const a={maxRetries:0,retryOnStatusCode:this.defaultRetryCondition,retryOnException:this.defaultRetryCondition,retryOnDeserializationException:this.defaultRetryCondition};this.retryLogic={...a,...t},this.logErrorAsWarning=n}sleep(e){return new Promise((t=>setTimeout(t,e)))}async get(e,t){const n={...e.opts,method:"GET"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),n,t)}async post(e,t){const n={...e.opts,method:"POST"};return this.call(null==e?void 0:e.operationName,this.buildURL(e.uri,e.query),n,t)}buildURL(e,t={}){let n;try{n=new URL(e)}catch(t){n=new URL(e,window.location.origin)}for(const e in t)n.searchParams.set(e,`${t[e]}`);return n.toString().replace(/\/$/,"")}constructPostRequest({body:e,...t}){return{...Pn,...t,body:e?JSON.stringify(e):void 0}}async call(e,t,n,a){const i={...this.retryLogic,...a};let r=0;do{const a={};try{if(r>0&&i.backoffStrategy){const e=i.backoffStrategy(r);await this.sleep(e)}const o=await this.fetchResponse(e,t,n,a);let l=await this.parseResponse(e,o,a);return a.Success=1,l}catch(o){if(this.shouldRetry(o,t,n,e,a,i)&&r!=i.maxRetries)continue;throw a.Failure=1,o}finally{0!=r&&(a.Retry=1),void 0!==e?this.logger.count(Sn[e],a):this.logger.count(Ln.CallUndefined,a),r++}}while(r<=((null==i?void 0:i.maxRetries)||0));return Promise.reject()}async parseResponse(e,t,n){let a;try{a=await t.json()}catch(t){const a=new _n.xU(t.message);throw this.logError(a,"Could not parse response",{operationName:e}),n.DeserializationException=1,a}return a}async fetchResponse(e,t,n,a){const i=await fetch(t,n);if(a[`StatusCode_${i.status}`]=1,!i.ok){const n=await i.text(),r=new _n.jZ(n,i.status);throw 400===i.status?this.logger.count(wn.FetchResponseCode400,a):403===i.status?this.logger.count(wn.FetchResponseCode403,a):this.logError(r,"Non 2xx status code received",{statusCode:i.status,operationName:e,url:t,marketplaceId:this.context.marketplaceID,currentTerritory:this.context.currentTerritory,recordTerritory:this.context.recordTerritory,geoToken:this.context.geoToken,location:window.location.href}),r}return i}shouldRetry(e,t,n,a,i,r){return e instanceof _n.jZ&&r&&r.retryOnStatusCode?r.retryOnStatusCode(e,t,n):e instanceof _n.xU&&r&&r.retryOnDeserializationException?r.retryOnDeserializationException(e,t,n):(i.Exception=1,this.logError(e,`${n.method} request threw an exception`,{url:t,operationName:a}),!(!r||!r.retryOnException)&&r.retryOnException(e,t,n))}}function Mn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Nn{constructor(){Mn(this,"store",new Map),Mn(this,"push",(e=>{const t=this.store.size+e.startTime;return this.store.set(t,e),t})),Mn(this,"delete",(e=>{this.store.delete(e)})),Mn(this,"values",(()=>Array.from(this.store.values()))),Mn(this,"clear",(()=>{this.store.clear()}))}}class Rn{constructor(e,t){Mn(this,"storage",void 0),Mn(this,"callback",void 0),Mn(this,"parameters",void 0),Mn(this,"interval",null),Mn(this,"timer",(()=>{this.interval=setInterval(this.execute,1e3*this.parameters.duration)})),Mn(this,"add",(e=>{const t=this.storage.push(e);return this.storage.store.size===this.parameters.size?this.execute():null===this.interval&&this.timer(),t})),Mn(this,"remove",(e=>{this.storage.delete(e)})),Mn(this,"execute",(()=>{this.callback(this.storage.values()),this.reset()})),Mn(this,"reset",(()=>{this.storage.clear(),null!==this.interval&&clearInterval(this.interval),this.interval=null})),this.storage=new Nn,this.callback=t,this.parameters=e}}const An={hitType:Object.values(vn),action:Object.values(gn),pageType:Object.values(sn),subPageType:"string",clientVariant:[...Object.values(un),...Object.values(dn)],refMarker:"string",pageTypeId:"string",startTime:"number",deviceTypeId:"string",deviceId:"string",pageTypeIdSource:"string",preferredLanguage:"string",ue:"number",cf:"number",af:"number",id:"number",requiredProperties:["hitType","pageType","subPageType","startTime","deviceTypeId","action","clientVariant","refMarker"]};function On(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Vn{constructor(e){On(this,"clickstreamSchemaConfiguration",An),On(this,"isClickstreamPayload",((e,t)=>!!(e&&"object"==typeof e&&e instanceof Object&&Object.getPrototypeOf(e)===Object.prototype)||(t.message="Clickstream payload is not an object",!1))),e&&(this.clickstreamSchemaConfiguration=e)}isValid(e){let t={message:""};return this.isClickstreamPayload(e,t)&&this.checkProperties(e,t)?{isValid:!0}:{isValid:!1,errorMessage:t.message}}checkProperties(e,t){return this.checkProperty(e,"hitType",t)&&this.checkProperty(e,"action",t)&&this.checkProperty(e,"refMarker",t)&&this.checkProperty(e,"pageType",t)&&this.checkProperty(e,"pageTypeId",t)&&this.checkProperty(e,"subPageType",t)&&this.checkProperty(e,"startTime",t)&&this.checkProperty(e,"deviceId",t)&&this.checkProperty(e,"deviceTypeId",t)&&this.checkProperty(e,"clientVariant",t)&&this.checkProperty(e,"preferredLanguage",t)&&this.checkProperty(e,"ue",t)&&this.checkProperty(e,"cf",t)&&this.checkProperty(e,"id",t)&&this.checkAdditionalData(e,"additionalData",t)&&this.checkTags(e,"tags",t)}checkProperty(e,t,n){return this.isPropertyDefined(e,t)?this.isOfSpecifiedType(e,t,this.clickstreamSchemaConfiguration[t],n)&&this.propertySpecificCheck(e,t,n):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,n)}checkAdditionalData(e,t,n){return this.isPropertyDefined(e,t)?this.isPlainObject(e.additionalData,t,n):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,n)}checkTags(e,t,n){return this.isPropertyDefined(e,t)?this.isArray(e.tags,"tags",n)&&e.tags.every((e=>this.isOfSpecifiedType(e,"tags","string",n))):this.handleUndefinedProperty(e,t,this.clickstreamSchemaConfiguration.requiredProperties,n)}handleUndefinedProperty(e,t,n,a){return!this.isRequired(e,t,n)||(this.setUndefinedErrorMessage(t,a),!1)}isRequired(e,t,n){return n.indexOf(t)>=0||this.isMaybeRequired(e,t)}isMaybeRequired(e,t){if("pageTypeId"===t){const t=e.pageType,n=e.hitType,a=e.action;return n==vn.PageHit&&t==sn.ATVDetail&&a==gn.Click||n==vn.PageTouch&&(a==gn.Download||a==gn.PlayDownload)}return!1}isPropertyDefined(e,t){return Object.hasOwnProperty.call(e,t)}isPlainObject(e,t,n){const a=e instanceof Object&&Object.getPrototypeOf(e)===Object.prototype;return a||this.setIncorrectTypeErrorMessage(t,n,e),a}isArray(e,t,n){const a=Array.isArray(e);return a||this.setIncorrectTypeErrorMessage(t,n,e),a}isOfSpecifiedType(e,t,n,a){const i=Array.isArray(n)&&n.indexOf(e[t])>=0||typeof e[t]===n;return i||this.setIncorrectTypeErrorMessage(t,a,e[t]),i}setUndefinedErrorMessage(e,t){t.message=`ClickstreamValidationFailed - ${e} is not defined`}setIncorrectTypeErrorMessage(e,t,n){Array.isArray(n)?n="Array":n instanceof Object&&Object.getPrototypeOf(n)===Object.prototype&&(n="Object"),t.message=`ClickstreamValidationFailed - ${e} is of incorrect type, received value is ${n}`}propertySpecificCheck(e,t,n){switch(t){case"subPageType":return this.checkSubPageType(e,n);case"refMarker":return this.checkRefMarker(e,n);default:return!0}}checkSubPageType(e,t){const n=e.subPageType;return n?n.match(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/)?(t.message=`ClickstreamValidationFailed - subPageType must not contain special characters, received value is ${n}`,!1):n.charAt(0)===n.charAt(0).toUpperCase()||(t.message=`ClickstreamValidationFailed - subPageType is not CapitalizedCamelCase, received value is ${n}`,!1):(t.message="ClickstreamValidationFailed - subPageType must not be empty string",!1)}checkRefMarker(e,t){const n=e.refMarker;return n.match("^[A-Za-z0-9_|\\-]*$")?n.match("^[A-Za-z].*")?n.match(".*[A-Za-z0-9]$")?n.match("^(?!.*([-_|]){2,}).*$")?!(n.length<2||n.length>64)||(t.message=`ClickstreamValidationFailed - refMarker must be within the length limits, received value is ${n}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must not contain repeating punctuation, received value is ${n}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must end with alphanumeric character, received value is ${n}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must start with alphabetic character, received value is ${n}`,!1):(t.message=`ClickstreamValidationFailed - refMarker must contain alphanumeric characters and punctuation only, received value is ${n}`,!1)}}function Wn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Bn{constructor({DTID:e,logger:t=new Ct.Oc("DVWebNode:ClickstreamClient"),batchParameters:n,homeRegion:a}){Wn(this,"DTID",void 0),Wn(this,"context",void 0),Wn(this,"serviceClient",void 0),Wn(this,"queue",void 0),Wn(this,"dcsSchemaValidator",new Vn(An)),Wn(this,"logger",void 0),Wn(this,"homeRegion",void 0),Wn(this,"buildURL",(()=>{const e=new URLSearchParams({...En(this.context),deviceTypeID:this.DTID,firmware:"DVWebNode"});return`${bn(this.context,this.homeRegion)}/${Bn.CLICKSTREAM_URL}?${e.toString()}`})),Wn(this,"buildEntry",((e,t)=>Object.assign(t,{hitType:e,startTime:Date.now(),deviceTypeId:this.DTID}))),Wn(this,"getAdditionalParameters",(()=>({isStressTest:String(Boolean(this.context.isTest)),clientIp:this.context.customerIPAddress,currentClientTime:Date.now(),currentTerritory:this.context.currentTerritory,customerId:this.context.customerID,deviceId:this.context.deviceID,deviceTypeId:this.DTID,identityContext:this.context.identityContext,marketplaceId:this.context.marketplaceID,preferredLanguage:this.context.locale,sessionId:this.context.sessionID,videoCountryOfRecord:this.context.recordTerritory}))),Wn(this,"enqueue",(e=>{const t=this.dcsSchemaValidator.isValid(e);t.isValid||this.logger.debug("Invalid Clickstream entry",{validationError:(null==t?void 0:t.errorMessage)||"",invalidEntry:JSON.stringify(e)}),this.queue.add(e)})),Wn(this,"call",(async e=>{const t=JSON.stringify({EntryList:e,...this.getAdditionalParameters()});try{await this.serviceClient.post({operationName:Dn.Clickstream,uri:this.buildURL(),opts:{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:t}},Bn.strategy)}catch(e){}})),Wn(this,"hit",(({pageType:e,subPageType:t,clientVariant:n,refMarker:a,pageTypeId:i,A9SearchFields:r})=>{const o=this.buildEntry(vn.PageHit,{action:gn.Click,pageType:e,subPageType:t,clientVariant:n,...a&&{refMarker:a},...i&&{pageTypeId:i},...r&&{A9SearchFields:r}});this.enqueue(o)})),Wn(this,"hva",(({pageType:e,subPageType:t,action:n,clientVariant:a,refMarker:i,pageTypeId:r,hitType:o,A9SearchFields:l})=>{const s=this.buildEntry(null!=o?o:vn.PageTouch,{action:n,pageType:e,subPageType:t,clientVariant:a,...i&&{refMarker:i},...r&&{pageTypeId:r},...l&&{A9SearchFields:l}});this.enqueue(s)})),this.context=(0,m.getRequestContext)(),this.DTID=e,this.logger=t,this.serviceClient=new xn({logger:t,logErrorAsWarning:!0}),this.queue=new Rn(n,this.call),this.homeRegion=a}}function Gn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Wn(Bn,"CLICKSTREAM_URL","cdp/usage/Clickstream"),Wn(Bn,"strategy",{maxRetries:0,retryOnException:()=>!1});const Hn={size:1,duration:1};class jn extends Bn{constructor({homeRegion:e,logger:t}){super({DTID:jn.getDTID(),logger:t,homeRegion:e,batchParameters:jn.getBatchParameters()}),Gn(this,"previousParameters",void 0),Gn(this,"onNavigation",void 0),Gn(this,"backButtonData",void 0),Gn(this,"getClientVariant",(e=>pn[e]?pn[e][mn.Web]:un.Unknown)),Gn(this,"getA9SearchFields",(()=>{var e;const t=new URLSearchParams(window.location.search),n=e=>{if(null===e)return null;const t=parseInt(e,10);return isNaN(t)?null:t},a=n(t.get("qid")),i=t.get("sr"),r=null===i?null:n(i.split("-")[1]);return null!==a&&null!==r&&r>0?{qid:a,searchPositionIndex:r,keyword:null!==(e=t.get("keywords"))&&void 0!==e?e:""}:void 0})),Gn(this,"getRefmarker",(()=>{const e=window.location.href.match(Cn.oA);return e&&e[1]||"atv_unknown"})),Gn(this,"getParameters",((e,t,n,a)=>({pageType:e,subPageType:t,refMarker:n||this.getRefmarker(),clientVariant:a||this.getClientVariant(e),A9SearchFields:this.getA9SearchFields()}))),Gn(this,"recordBackButton",(()=>{const e=this.getRefmarker();this.backButtonData={ref:e+"_back",hitType:vn.BackForwardButton}})),Gn(this,"clearBackButton",(()=>{this.backButtonData=void 0})),Gn(this,"navigation",(e=>{const{pType:t,sPageType:n,ref:a,pageTypeId:i}=e;try{const{pageType:e,subPageType:r,refMarker:o,clientVariant:l,A9SearchFields:s}=this.getParameters(t,n,a);this.previousParameters={pageType:e,subPageType:r,refMarker:o,clientVariant:l,A9SearchFields:s},this.backButtonData&&(this.hva({pageType:e,subPageType:r,action:gn.Back,clientVariant:l,refMarker:this.backButtonData.ref,pageTypeId:i,hitType:this.backButtonData.hitType,A9SearchFields:s}),this.clearBackButton()),this.hit({pageType:e,subPageType:r,clientVariant:l,refMarker:o,pageTypeId:i,A9SearchFields:s}),this.onNavigation&&this.onNavigation({pageType:e,subPageType:r})}catch(e){this.logger.warn("PVClickstream navigation() error",e)}})),Gn(this,"action",(e=>{const{action:t,pType:n,sPageType:a,ref:i,pageTypeId:r,hitType:o,clientVariantOverride:l}=e;try{const{pageType:e,subPageType:s,refMarker:c,clientVariant:d}=n&&a?this.getParameters(n,a,i,l):this.previousParameters;this.previousParameters={pageType:e,subPageType:s,refMarker:c,clientVariant:d},this.hva({pageType:e,subPageType:s,action:t,clientVariant:null!=l?l:d,hitType:o,refMarker:null!=i?i:c,pageTypeId:r})}catch(e){this.logger.warn("PVClickstream action() error",e)}})),Gn(this,"setOnNavigation",(e=>this.onNavigation=e)),this.previousParameters={pageType:sn.ATVUnknown,subPageType:cn.Unknown,clientVariant:dn.Unknown,refMarker:"atv_unknown"}}}Gn(jn,"getBatchParameters",(()=>Hn)),Gn(jn,"getDTID",(()=>yn));let $n=null;const zn=e=>(null!=$n&&void 0===e||($n=new jn(e||{})),$n);function Fn(e,t,n,a,i,r,o,l){var s;i||(i=[void 0]);const c=l||zn();null===(s=i)||void 0===s||s.forEach((i=>{null==c||c.action({action:i||gn.DefaultAction,pageTypeId:a,ref:e,sPageType:n,pType:t,hitType:r,clientVariantOverride:o})}))}var Un=n("./node_modules/@amzn/dv-web-node-reftags/index.js");function qn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Kn="DVWeb::Storefront::PreRollPlayer",Qn=.1;class Zn extends i.PureComponent{constructor(e){super(e),qn(this,"playHandler",void 0),qn(this,"stopHandler",void 0),qn(this,"updateHandler",void 0),qn(this,"errorHandler",void 0),qn(this,"waitingHandler",void 0),qn(this,"videoStarted",void 0),qn(this,"firstQuartileReached",void 0),qn(this,"midpointReached",void 0),qn(this,"thirdQuartileReached",void 0),qn(this,"expectedReadyState",void 0),qn(this,"wrappers",{}),qn(this,"fadeAudioIntervalHandle",void 0),qn(this,"api",new ln.l),qn(this,"fadeAudio",(e=>new Promise((t=>{var n;this.fadeAudioIntervalHandle&&clearInterval(this.fadeAudioIntervalHandle),null!==(n=this.wrappers.videoPlayer)&&void 0!==n&&n.muted&&(this.wrappers.videoPlayer.muted=!1,this.wrappers.videoPlayer.volume=0);const a=()=>{this.fadeAudioIntervalHandle&&(clearInterval(this.fadeAudioIntervalHandle),this.fadeAudioIntervalHandle=void 0),t()};this.fadeAudioIntervalHandle=setInterval((()=>{if(this.wrappers.videoPlayer){const{volume:t}=this.wrappers.videoPlayer,n=t>e?t>e+Qn?t-Qn:e:t<e-Qn?t+Qn:e;this.wrappers.videoPlayer.volume=n,n===e&&a()}else a()}),30)})))),qn(this,"fadeOutAudio",(()=>this.fadeAudio(0))),qn(this,"fadeInAudio",(()=>this.state.originalVolume&&this.fadeAudio(this.state.originalVolume))),qn(this,"toggleMute",(e=>{var t,n;if(0!==e.button)return;e.preventDefault();const a=!this.props.videoContext.muted;null===(t=(n=this.props.videoContext).updateContext)||void 0===t||t.call(n,{...this.props.videoContext,muted:!this.props.videoContext.muted}),this.onMute(a)})),qn(this,"toggleFullscreen",(e=>{if(0===e.button)return this.updateFullscreen(!this.props.videoContext.fullScreen)})),qn(this,"setWrapperRef",(e=>{this.wrappers.videoWrapper=e})),qn(this,"setVideoPlayerRef",(e=>{this.wrappers.videoPlayer=e})),this.state={hasError:!1,playing:!1,paused:!1},this.videoStarted=!1,this.firstQuartileReached=!1,this.midpointReached=!1,this.thirdQuartileReached=!1,this.expectedReadyState=4,this.onVideoError=this.onVideoError.bind(this)}componentDidMount(){var e;this.setState({originalVolume:null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.volume}),this.wrappers.videoPlayer&&(this.wrappers.videoPlayer.preload="auto",this.wrappers.videoPlayer.muted=this.props.videoContext.muted)}componentDidUpdate(e){const t=Ut(this.props,this),n=Ut(e,this);this.state.playing&&t!==n?t?setTimeout((()=>{this.state.playing&&Ut(this.props,this)&&this.resumeWhenPaused()}),1500):this.props.playerIsActive?this.stop():this.pauseButKeepVisible():Ft(this.props)&&this.state.paused&&this.stop(),this.props.prerolls!=e.prerolls&&(this.videoStarted=!1,this.firstQuartileReached=!1,this.midpointReached=!1,this.thirdQuartileReached=!1);const{muted:a}=this.props.videoContext;a!=e.videoContext.muted&&(this.props.enableAudioFading?a?this.fadeOutAudio():this.fadeInAudio():this.wrappers.videoPlayer&&(this.wrappers.videoPlayer.muted=a))}componentWillUnmount(){this.removeEventListeners(),qt(this.props,this),this.removeVideoSource()}isSuperOrStandardHero(){return[zt.Superhero,zt.StandardHero].includes(this.props.placement)}startPlayer(){var e,t,n,a,i,r,o;if(this.playHandler=()=>this.playAssumingReady(),this.stopHandler=()=>this.onPlaybackComplete(),this.updateHandler=()=>this.onTimeUpdate(),this.errorHandler=()=>this.onLoadError(),this.waitingHandler=()=>this.onWaiting(),this.addEventListeners(),!this.props.playerIsActive&&!Ft(this.props))return;t=this.props,n=this,t.playerIsActive?null===(a=(i=t.videoContext).updateContext)||void 0===a||a.call(i,{...t.videoContext,activeActivePlayer:n}):null===(r=(o=t.videoContext).updateContext)||void 0===r||r.call(o,{...t.videoContext,activePassivePlayer:n});const l=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.readyState;if(l&&l>=this.expectedReadyState){var s;if(this.isSuperOrStandardHero())null===(s=this.wrappers.videoPlayer)||void 0===s||s.load();this.playHandler()}}async playAssumingReady(){var e;const t=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.readyState;if(t&&t>=this.expectedReadyState){var n,a,i;await(null===(n=this.props.parentListeners)||void 0===n||null===(a=n.onBeforePlay)||void 0===a?void 0:a.call(n));const e=null===(i=this.wrappers.videoPlayer)||void 0===i?void 0:i.play();if(void 0!==e)e.then((()=>{!this.videoStarted&&Tt(this.props.prerolls,"defaultImpression"),!this.videoStarted&&this.isSuperOrStandardHero()&&(0,B.Lu)(),this.onPlayStart()})).catch((e=>{this.onPlayError(e.name),Lt(`Pre-Roll Player Failed to play: ${e}.`,e)}));else try{var r;!this.videoStarted&&Tt(this.props.prerolls,"defaultImpression"),!this.videoStarted&&this.isSuperOrStandardHero()&&(0,B.Lu)(),null===(r=this.wrappers.videoPlayer)||void 0===r||r.play(),this.onPlayStart()}catch(e){this.onPlayError(e),Lt(`Pre-Roll Player Failed to play: ${e}.`,e)}}}pauseButKeepVisible(){var e;null===(e=this.wrappers.videoPlayer)||void 0===e||e.pause(),!this.state.paused&&Tt(this.props.prerolls,"pause"),this.setState({paused:!0})}resumeWhenPaused(){var e;null===(e=this.wrappers.videoPlayer)||void 0===e||e.play(),this.state.paused&&Tt(this.props.prerolls,"resume"),this.setState({paused:!1})}stop(e=!1){this.setState({playing:!1,paused:!1},(()=>{var t,n,a,i,r,o;null===(t=this.props.parentListeners)||void 0===t||null===(n=t.onPlayStop)||void 0===n||n.call(t),null===(a=this.wrappers.videoPlayer)||void 0===a||a.pause(),this.removeEventListeners(),e?(i=this.props,null===(r=(o=i.videoContext).updateContext)||void 0===r||r.call(o,{...i.videoContext,activeActivePlayer:null,activePassivePlayer:null})):qt(this.props,this)}))}restartVideo(){this.time=0}set time(e){var t;void 0!==(null===(t=this.wrappers.videoPlayer)||void 0===t?void 0:t.currentTime)&&(this.wrappers.videoPlayer.currentTime=e)}updateFullscreen(e){var t,n;return this.updatePageScrolling(e?"hidden":"visible"),null===(t=(n=this.props.videoContext).updateContext)||void 0===t?void 0:t.call(n,{...this.props.videoContext,fullScreen:e})}updatePageScrolling(e){if(!document)return;const t=document.getElementsByTagName("body")&&document.getElementsByTagName("body")[0];t&&(t.style.overflow=e)}onLoadError(){var e,t,n;const a=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.error;a&&(a.code===MediaError.MEDIA_ERR_DECODE?Tt(this.props.prerolls,"error"):Tt(this.props.prerolls,"playbackBlocked")),null===(t=this.props.parentListeners)||void 0===t||null===(n=t.onLoadError)||void 0===n||n.call(t),(0,B.cL)(`${Kn}::loadError`,1,!1),k.c.count("DVWebStorefrontPreRollPlayerLoadError"),setTimeout((()=>{this.stop()}),4e3)}onMute(e){e?(Tt(this.props.prerolls,"mute"),Fn((0,Un.i)("atv_trailer_auto_mute"),this.props.pageType,this.props.subPageType,void 0,void 0,void 0,this.props.clientVariant,this.props.clickstream)):(Tt(this.props.prerolls,"unmute"),Fn((0,Un.i)("atv_trailer_auto_unmute"),this.props.pageType,this.props.subPageType,void 0,void 0,void 0,this.props.clientVariant,this.props.clickstream))}onPlaybackComplete(){var e,t;return Tt(this.props.prerolls,"complete"),null===(e=this.props.parentListeners)||void 0===e||null===(t=e.onPlayComplete)||void 0===t||t.call(e),this.stop()}onPlayError(e){var t,n;Tt(this.props.prerolls,"NotAllowedError"===e?"playbackBlocked":"error"),null===(t=this.props.parentListeners)||void 0===t||null===(n=t.onPlayError)||void 0===n||n.call(t)}onPlayStart(){(0,B.cL)(`${Kn}::BUFFER::INITIALISED`,1,!1),k.c.count("DVWebStorefrontPreRollPlayerBufferInitialising"),this.videoStarted=!0,this.setState({playing:!0,paused:!1},(()=>{var e,t;null===(e=this.props.parentListeners)||void 0===e||null===(t=e.onPlayStart)||void 0===t||t.call(e),!this.props.playerIsActive&&this.props.videoContext.activeActivePlayer&&this.pauseButKeepVisible()}))}onTimeUpdate(){var e,t;const n=null===(e=this.wrappers.videoPlayer)||void 0===e?void 0:e.duration,a=null===(t=this.wrappers.videoPlayer)||void 0===t?void 0:t.currentTime;n&&a&&(!this.thirdQuartileReached&&a>=.75*n?(this.thirdQuartileReached=!0,Tt(this.props.prerolls,"thirdQuartile")):!this.midpointReached&&a>=.5*n?(this.midpointReached=!0,Tt(this.props.prerolls,"midpoint")):!this.firstQuartileReached&&a>=.25*n&&(this.firstQuartileReached=!0,Tt(this.props.prerolls,"firstQuartile")))}onWaiting(){(0,B.cL)(`${Kn}::BUFFER::REINITIALISING`,1,!1),k.c.count("DVWebStorefrontPreRollPlayerBufferReinitialising")}onVideoError(){var e,t;(0,B.cL)(`${Kn}::videoError`,1,!1),k.c.count("DVWebStorefrontPreRollPlayerVideoError"),null===(e=this.props.parentListeners)||void 0===e||null===(t=e.onVideoError)||void 0===t||t.call(e)}addEventListeners(){var e,t,n,a,i;this.playHandler&&(null===(e=this.wrappers.videoPlayer)||void 0===e||e.addEventListener("canplaythrough",this.playHandler)),this.stopHandler&&(null===(t=this.wrappers.videoPlayer)||void 0===t||t.addEventListener("ended",this.stopHandler)),this.updateHandler&&(null===(n=this.wrappers.videoPlayer)||void 0===n||n.addEventListener("timeupdate",this.updateHandler)),this.waitingHandler&&(null===(a=this.wrappers.videoPlayer)||void 0===a||a.addEventListener("waiting",this.waitingHandler)),this.errorHandler&&(null===(i=this.wrappers.videoPlayer)||void 0===i||i.addEventListener("error",this.errorHandler))}removeEventListeners(){var e,t,n,a,i;this.playHandler&&(null===(e=this.wrappers.videoPlayer)||void 0===e||e.removeEventListener("canplaythrough",this.playHandler)),this.stopHandler&&(null===(t=this.wrappers.videoPlayer)||void 0===t||t.removeEventListener("ended",this.stopHandler)),this.updateHandler&&(null===(n=this.wrappers.videoPlayer)||void 0===n||n.removeEventListener("timeupdate",this.updateHandler)),this.errorHandler&&(null===(a=this.wrappers.videoPlayer)||void 0===a||a.removeEventListener("error",this.errorHandler)),this.waitingHandler&&(null===(i=this.wrappers.videoPlayer)||void 0===i||i.removeEventListener("waiting",this.waitingHandler))}removeVideoSource(){const e=this.wrappers.videoPlayer;null==e||e.pause(),null==e||e.removeAttribute("src"),null==e||e.load()}styleFromPlacementType(){switch(this.props.placement){case zt.SuperCarousel:return Dt;case zt.Superhero:return Pt;case zt.Packshot:return xt;case zt.PackshotWithEntitlementCue:return Mt;case zt.IntermissionHero:return At;case zt.ChartsContainer:return Wt;case zt.ChartsCarousel:return Vt;case zt.DetailHero:return Rt;case zt.StandardHero:return St;case zt.StandardMiniDetails:return Nt;case zt.TentpoleHero:return Bt}}render(){if(this.state.hasError||!this.props.prerolls||!this.props.prerolls.mediaFile||!this.props.videoContext)return null;const e=!this.state.playing&&!this.state.paused&&!this.props.videoContext.fullScreen,t=(this.props.parentListeners||{}).onClick,n=this.props.placement===zt.Superhero?Gt:this.props.videoFadeOverlay;return i.createElement("a",{className:v(It,this.styleFromPlacementType(),this.props.className,"tst-video-overlay-player-overlay","tst-preroll-player",{[jt]:e,[$t]:!e,[Ot]:this.props.videoContext.fullScreen&&this.props.enableFullscreen,[Ht]:this.props.useDefaultBackground}),href:this.props.link,ref:this.setWrapperRef,onClick:t,"aria-label":this.props.accessibilityLabel||"","data-testid":"preroll-player-link"},i.createElement("video",{className:"tst-video-overlay-player-html5",src:this.props.prerolls.mediaFile,ref:this.setVideoPlayerRef,"data-testid":"preroll-player",onContextMenu:e=>{this.props.videoContext.disableRightClick&&e.preventDefault()},onError:this.onVideoError}),i.createElement(on,{disableUnmute:this.props.prerolls.disableUnmute,textMap:this.props.prerolls.textMap,toggleMute:this.toggleMute,enableFullscreen:this.props.enableFullscreen,toggleFullscreen:this.toggleFullscreen,videoContext:this.props.videoContext,placement:this.props.placement,useDefaultBackground:this.props.useDefaultBackground}),n&&i.createElement("div",{className:v(n)}),this.props.children)}}let Jn=function(e){return e.Init="init",e.Play="play",e.Pause="pause",e.Stop="stop",e.Error="error",e}({});const Xn=(e,t)=>`${e}->${t}`,Yn=new Set([Xn(Jn.Init,Jn.Play),Xn(Jn.Play,Jn.Stop),Xn(Jn.Play,Jn.Pause),Xn(Jn.Pause,Jn.Play),Xn(Jn.Play,Jn.Init),Xn(Jn.Stop,Jn.Init),Xn(Jn.Play,Jn.Error),Xn(Jn.Init,Jn.Error),Xn(Jn.Error,Jn.Init)]);function ea(e,t){return Yn.has(Xn(e,t))?t:e}const ta="YJ1MaA",na="_1FUZFF";let aa=function(e){return e[e.Restart=0]="Restart",e[e.Resume=1]="Resume",e}({});const ia=({canPlay:e,prerolls:t,delay:n,playing:a,onStateChange:r,playback:o,className:l,placement:s,children:c,playerIsActive:d=!1,link:u,draperClassName:m,draperParentListeners:p,videoFadeOverlayClassname:g,noBottomCornerRadiusLink:v,refMarker:f,titleID:y})=>{const b=i.useContext(Et),{clickstream:E,clickstreamPageContext:C}=i.useContext(N),_=i.useRef(null),T=i.useRef(),[k,w]=i.useReducer(ea,Jn.Init);i.useEffect((()=>{null==r||r(k)}),[k]),i.useEffect((()=>{var t;let i=!1;switch(k){case Jn.Init:e?T.current=window.setTimeout((()=>w(Jn.Play)),n):clearTimeout(T.current);break;case Jn.Play:var r;if(e)i=!0,null===(r=_.current)||void 0===r||r.startPlayer();else o===aa.Resume?w(Jn.Pause):o===aa.Restart&&_.current&&(_.current.stop(),_.current.restartVideo());break;case Jn.Pause:var l,s;if(i=!0,e)null===(l=_.current)||void 0===l||l.startPlayer();else null===(s=_.current)||void 0===s||s.pauseButKeepVisible();break;case Jn.Error:null===(t=_.current)||void 0===t||t.stop();case Jn.Stop:}return null==a||a(i),()=>{clearTimeout(T.current)}}),[e,n,k,o,a]),i.useEffect((()=>{w(Jn.Init)}),[t]);const L=i.useMemo((()=>({onPlayComplete(){w(Jn.Stop)},...s!==zt.ChartsContainer&&{onPlayStart(){w(Jn.Play)}},onClick(e){var t;null==p||null===(t=p.onClick)||void 0===t||t.call(p,e)},onVideoError(){w(Jn.Error)}})),[w,p,s]),I=h()(m,ta,{[na]:v});return i.createElement("div",{className:l},i.createElement(Zn,{className:I,prerolls:t,ref:_,placement:null!=s?s:zt.Superhero,videoContext:b,playerIsActive:d,enableFullscreen:!1,parentListeners:L,useDefaultBackground:!1,link:u,clickstream:E,pageType:null==C?void 0:C.pageType,subPageType:null==C?void 0:C.subPageType,clientVariant:null==C?void 0:C.clientVariant,videoFadeOverlay:g,refMarker:f,titleID:y}),c)},ra="om7nme",oa="KLNBWL",la="Ah1hNY";var sa=n("./src/util/utils/imageUtils/imageUtils.tsx");const ca=(e,t)=>e-t;let da=function(e){return e.WIDTH="WIDTH",e.HEIGHT="HEIGHT",e}({}),ua=function(e){return e.gif="gif",e.jpg="jpg",e.pkmz="pkmz",e.png="png",e.webp="webp",e}({});const ma=[1.5,2],pa={phone:"20em",phablet:"28em","phone-landscape":"47em",tablet:"55em","tablet-landscape":"65em",desktop:"90em",largeScreen:"118em","tablet-lowest":"28em","laptop-lowest":"55em","desktop-lowest":"80em","desktop-hd-lowest":"100em","desktop-uhd-lowest":"150em"},ga=RegExp(`(${Object.keys(pa).join("|")})$`),va=e=>"string"==typeof e?e:`${e}px`,ha=(e,t,n,a,i,r,o)=>{const l=ma.map((l=>`${fa({src:e,value:t*l,baseType:n,type:a,skipStripTags:i,supportTransparency:r,autoCrop:o})} ${l}x`));return l&&l.unshift(fa({src:e,value:t,baseType:n,type:a,skipStripTags:i,supportTransparency:r,autoCrop:o})),l&&l.join(", ")},fa=({src:e,value:t,baseType:n,type:a,skipStripTags:i,supportTransparency:r=!1,autoCrop:o})=>{if(!e)return"";const l=new sa.e(e);return i||l.stripTags(),o&&l.autoCrop(),n===da.HEIGHT?l.scaleHeight(t):l.scaleWidth(t),a?l.forceFormat(a):r&&l.formatHasTransparencySupport&&l.forceFormat(l.urlFileFormat),l.getImageUrl()},ya=(e,t,n,a,i,r)=>t.map((t=>`${fa({src:e,value:t,baseType:n,type:a,skipStripTags:i,autoCrop:r})} ${t}w`)).join(", "),ba=(e,t=[])=>{const n=t.reduce(((e,t)=>{const[n,a]=Object.entries(t)[0],i=(e=>e.replace(ga,(e=>`width: ${pa[e]}`)))(n);return i&&a&&e.push(`(${i}) ${va(a)}`),e}),[]);return n.push(va(e)),n.join(", ")},Ea=({src:e,baseValue:t,baseType:n=da.WIDTH,srcSizes:a,format:i,resolutions:r,skipStripTags:o,supportTransparency:l,autoCrop:s})=>{if(n===da.HEIGHT&&a)throw new Error("BaseType.HEIGHT can't be used with srcSizes. It is only compatible with format and resolutions.");if((e=>!e||0===e.length)(a))return{src:fa({src:e,value:t,baseType:n,type:i,skipStripTags:o,supportTransparency:l,autoCrop:s}),srcSet:ha(e,t,n,i,o,l,s)};const c=a.map((e=>Object.values(e)[0]));c.push(t);const d=((e,t=ma)=>{const n=t.reduce(((t,n)=>[...t,...e.map((e=>Math.floor(e*n)))]),e);return Array.from(new Set(n)).sort(ca)})(c,r);return{src:fa({src:e,value:t,baseType:n,type:i,skipStripTags:o,autoCrop:s}),srcSet:ya(e,d,n,i,o,s),sizes:ba(t,a)}},Ca=i.memo((({src:e,baseValue:t,alt:n,aspectRatio:a,imageClassName:r,wrapperClassName:o,autoCrop:l,sizesOptions:s,srcSetWidths:d,parentListeners:u,shouldLazyLoad:m,debugID:p,responsiveScaleDimension:g=da.WIDTH})=>{const{shouldRemoveAutoCrop:v}=i.useContext(N),f=i.useRef(),[y,b]=i.useState(!1),E=i.useRef(null),C=new sa.e(e).urlFileFormat,_="png"==C?"image/png":"image/jpeg",T="png"==C?ua.png:ua.jpg,k=l&&!v,{logger:w}=(0,c.L1)(),L=e=>{var t;(b(!0),e)&&(null==u||null===(t=u.onLoad)||void 0===t||t.call(u,e.currentTarget.currentSrc))};return i.useEffect((()=>{var e;null!==(e=E.current)&&void 0!==e&&e.complete&&!y&&L()}),[]),i.createElement("div",{ref:f,className:h()(ra,o),style:a?{aspectRatio:a}:{}},i.createElement("picture",null,i.createElement("source",{type:"image/webp",srcSet:d?ya(e,d,g,ua.webp,!0,k):ha(e,t,g,ua.webp,!0,void 0,k),sizes:s&&ba(s.defaultSrcSize,s.srcSizes)}),i.createElement("source",{type:_,srcSet:d?ya(e,d,g,T,!0,k):ha(e,t,g,T,!0,void 0,k),sizes:s&&ba(s.defaultSrcSize,s.srcSizes)}),i.createElement("img",{alt:null!=n?n:"",className:h()(r,{[la]:a,[oa]:!a}),onLoad:L,onError:t=>{var n;null==u||null===(n=u.onError)||void 0===n||n.call(u);const a="dvWebClientImgLoadFailure";w.count(a,1,!1),w.warn(t,`[${a}] LazyImage failed to load an image for ${p}. The image URL is: ${e}`)},style:a?{aspectRatio:a}:{},src:fa({src:e,value:t,baseType:g,skipStripTags:!0,supportTransparency:void 0,autoCrop:k,type:ua.jpg}),loading:m?"lazy":"eager"})))}));Ca.displayName="LazyImage";const _a="km3sbT",Ta="_3HZFFn",ka="DXNI7M",wa="_0Cq4rX",La="jcqbgX",Ia="-xjO1Z",Pa="uYmIm1";function Da(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Sa{constructor(){Da(this,"context",void 0),Da(this,"logger",void 0),this.context=(0,m.getRequestContext)(),this.logger=new Ct.Oc("DVWebNode_ClientsideImpressionClient")}buildClientsideImpressionUri(){const e={...En(this.context),deviceTypeID:Sa.html5DTID,deviceID:"Web",firmware:"DVWebNode"},t=new URLSearchParams(e);return`${bn(this.context)}/${Sa.clientsideImpressionUrl}?${t.toString()}`}getParameters(e){return{...En(this.context),...e,sessionId:this.context.sessionID,deviceTypeID:(0,hn.dz)().deviceTypeId}}async logImpression(e){const t=this.buildClientsideImpressionUri(),n=this.getParameters(e),a="sendBeacon"in navigator&&!Boolean(window.chrome);if(a){(0,B.cL)("DVWebNode::ClientsideImpressionClient::sendBeaconAttempt",1,!1);const e=new Blob([JSON.stringify(n)],{type:"application/json"});return navigator.sendBeacon(t,e)}return(0,B.cL)("DVWebNode::ClientsideImpressionClient::fetchAttempt",1,!1),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),keepalive:!0,credentials:"include"}).then((()=>((0,B.cL)(`DVWebNode::ClientsideImpressionClient::${a?"sendBeacon":"fetch"}Success`,1,!1),!0)),(()=>((0,B.cL)(`DVWebNode::ClientsideImpressionClient::${a?"sendBeacon":"fetch"}Reject`,1,!1),!1))).catch((e=>((0,B.cL)(`DVWebNode::ClientsideImpressionClient::${a?"sendBeacon":"fetch"}Caught`,1,!1),this.logger.warn("Clientside impression fetch failed",e),!1)))}}Da(Sa,"clientsideImpressionUrl","cdp/usage/ClientsideImpression"),Da(Sa,"html5DTID",yn);var xa,Ma=n("./node_modules/uuid/dist/esm-browser/v4.js");function Na(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ra=function(e){return e[e.HandleIOEntries=0]="HandleIOEntries",e[e.GroupIndividualImpressions=1]="GroupIndividualImpressions",e[e.SendRequestsFromQueue=2]="SendRequestsFromQueue",e[e.__LENGTH=3]="__LENGTH",e}(Ra||{});class Aa{static init(){if(Aa.io||(Aa.io=new IntersectionObserver(Aa.onNewIoEntries,{threshold:[.5,.6,.7,.8,.9,1]})),Aa.logger||(Aa.logger=new Ct.Oc("DVWebNode_ImpressionTracker")),Aa.timeOrigin=Date.now()-performance.now(),Aa.elementToElementData||(Aa.elementToElementData=new Map),Aa.currentlyInViewItems||(Aa.currentlyInViewItems=new Map),Aa.intersectionObserverEntryQueue||(Aa.intersectionObserverEntryQueue=[]),Aa.pendingIndividualImpressionRecords||(Aa.pendingIndividualImpressionRecords=new Map),Aa.groupedImpressionsQueue||(Aa.groupedImpressionsQueue=[]),Aa.unobservedElements=0,Aa.minCarousel=0,Aa.maxCarousel=0,Aa.attachOnIdleCallback(),Aa.client=new Sa,!Aa.pageLoaded){Aa.pageLoaded=!1;const e=()=>{Aa.pageLoaded=!0,window.removeEventListener("load",e)};window.addEventListener("load",e)}document.addEventListener("visibilitychange",this.onVisibilityChange),document.addEventListener("pagehide",Aa.onPageHide)}static observe(e,t){try{var n,a;if(Aa.io||Aa.init(),null==t||!t.collectionImpressionData)return;if(!e)return void(0,B.cL)("DVWebNode::ImpressionTracker::ObserveNoElement",1,!1);null===(n=Aa.io)||void 0===n||n.observe(e),null===(a=Aa.elementToElementData)||void 0===a||a.set(e,t)}catch(e){var i;null===(i=Aa.logger)||void 0===i||i.error(e)}}static unobserve(e){var t;e?(null===(t=Aa.io)||void 0===t||t.unobserve(e),Aa.unobservedElements++,Aa.elementToElementData&&Aa.unobservedElements!==Aa.elementToElementData.size||Aa.disconnectAll()):(0,B.cL)("DVWebNode::ImpressionTracker::UnobserveNoElement",1,!1)}static disconnectAll(){var e;null===(e=Aa.io)||void 0===e||e.disconnect(),Aa.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}),Aa.io=void 0,Aa.elementToElementData=void 0,Aa.currentlyInViewItems=void 0,Aa.intersectionObserverEntryQueue=void 0,Aa.pendingIndividualImpressionRecords=void 0,Aa.unobservedElements=0,document.removeEventListener("visibilitychange",this.onVisibilityChange)}static addImpressionRecord(e,t){var n,a,i;((0,B.cL)(`DVWebNode::ImpressionTracker::${e.eventType}ImpressionRecorded`,1,!1),Oa(e),null!==(n=Aa.pendingIndividualImpressionRecords)&&void 0!==n&&n.has(t))?null===(a=Aa.pendingIndividualImpressionRecords.get(t))||void 0===a||a.push(e):null===(i=Aa.pendingIndividualImpressionRecords)||void 0===i||i.set(t,[e])}static logManualImpression(e,t){var n,a;const i=null===(n=Aa.elementToElementData)||void 0===n?void 0:n.get(e),r=null===(a=Aa.currentlyInViewItems)||void 0===a?void 0:a.get(e),o=performance.now();if(!i||!i.collectionImpressionData||!r)return void(0,B.cL)("DVWebNode::ImpressionTracker::ManualImpressionsNoElement",1,!1);const l={...i,...r,eventType:t,timeToView:r.impressionStartTime,inViewTime:o-r.impressionStartTime,eventTime:Aa.timeOrigin+o,elementSize:`${e.scrollWidth},${e.scrollHeight}`};Aa.addImpressionRecord(l,i.collectionImpressionData),"Select"===t?Aa.onIdleCallback({didTimeout:!0,timeRemaining:()=>50}):Aa.attachOnIdleCallback()}}xa=Aa,Na(Aa,"io",void 0),Na(Aa,"timeOrigin",void 0),Na(Aa,"elementToElementData",void 0),Na(Aa,"intersectionObserverEntryQueue",void 0),Na(Aa,"pendingIndividualImpressionRecords",void 0),Na(Aa,"groupedImpressionsQueue",void 0),Na(Aa,"currentlyInViewItems",void 0),Na(Aa,"idleCallbackHandle",void 0),Na(Aa,"timeoutID",void 0),Na(Aa,"client",void 0),Na(Aa,"unobservedElements",void 0),Na(Aa,"pageLoaded",void 0),Na(Aa,"minCarousel",void 0),Na(Aa,"maxCarousel",void 0),Na(Aa,"logger",void 0),Na(Aa,"onVisibilityChange",(()=>{"hidden"==document.visibilityState&&xa.onPageHide()})),Na(Aa,"onNewIoEntries",(e=>{var t;null===(t=xa.intersectionObserverEntryQueue)||void 0===t||t.push(...e),xa.attachOnIdleCallback()})),Na(Aa,"idleCallbackNextStep",0),Na(Aa,"callbackBuffer",10),Na(Aa,"minimumImpressions",3),Na(Aa,"onIdleCallback",((e,t=!1)=>{var n,a,i;xa.clearSavedCallback();const r=()=>e.didTimeout||e.timeRemaining()>xa.callbackBuffer;for(;r()&&xa.idleCallbackNextStep<3;)switch(xa.idleCallbackNextStep){case Ra.HandleIOEntries:if(xa.intersectionObserverEntryQueue){for(;xa.intersectionObserverEntryQueue.length>0;)xa.handleIoEntryQueue();xa.recalculateMinAndMax()}xa.idleCallbackNextStep++;break;case Ra.GroupIndividualImpressions:xa.groupIndividualImpressionRecords(),xa.idleCallbackNextStep++;break;case Ra.SendRequestsFromQueue:for(;xa.groupedImpressionsQueue&&xa.groupedImpressionsQueue.length>0&&(xa.groupedImpressionsQueue.length>=xa.minimumImpressions||t)&&r();)xa.sendRequestFromQueue();xa.idleCallbackNextStep++}xa.idleCallbackNextStep>=Ra.__LENGTH&&(xa.idleCallbackNextStep=0),(null!==(n=xa.intersectionObserverEntryQueue)&&void 0!==n&&n.length||null!==(a=xa.pendingIndividualImpressionRecords)&&void 0!==a&&a.size||null!==(i=xa.groupedImpressionsQueue)&&void 0!==i&&i.length)&&xa.attachOnIdleCallback()})),Na(Aa,"recalculateMinAndMax",(()=>{let e=9999,t=0;xa.currentlyInViewItems&&(xa.currentlyInViewItems.forEach((n=>{e=Math.min(e,n.carouselPosition),t=Math.max(t,n.carouselPosition)})),xa.minCarousel=e,xa.maxCarousel=t)})),Na(Aa,"inferEventTrigger",(e=>{if(!e)return"Pageload";const t=e.carouselPosition||0;return xa.pageLoaded?xa.maxCarousel>=t&&t>=xa.minCarousel?"Hscroll":"Vscroll":"Pageload"})),Na(Aa,"handleIoEntryQueue",(()=>{var e,t;if(!xa.currentlyInViewItems||0==(null===(e=xa.intersectionObserverEntryQueue)||void 0===e?void 0:e.length))return;const n=null===(t=xa.intersectionObserverEntryQueue)||void 0===t?void 0:t.shift();if(n)if(n.isIntersecting){const e=xa.currentlyInViewItems.get(n.target);if(e)xa.currentlyInViewItems.set(n.target,{...e,maxFractionInView:Math.max(n.intersectionRatio,e.maxFractionInView)});else{var a;const e=null===(a=xa.elementToElementData)||void 0===a?void 0:a.get(n.target),t=xa.inferEventTrigger(e),i=null==e?void 0:e.carouselPosition;void 0!==i?xa.currentlyInViewItems.set(n.target,{impressionStartTime:n.time,maxFractionInView:n.intersectionRatio,eventTrigger:t,carouselPosition:i}):(0,B.cL)("DVWebNode::ImpressionTracker::NoCarouselPosition",1,!1)}}else{var i;const e=xa.currentlyInViewItems.get(n.target),t=null===(i=xa.elementToElementData)||void 0===i?void 0:i.get(n.target);if(e&&t){const a=e.impressionStartTime,i=n.time,r={...t,...e,inViewTime:i-a,timeToView:a,eventTime:xa.timeOrigin+a,elementSize:`${n.target.scrollWidth},${n.target.scrollHeight}`,eventType:"View"};xa.pageLoaded&&r.inViewTime>1e3&&xa.addImpressionRecord(r,null==t?void 0:t.collectionImpressionData),xa.currentlyInViewItems.delete(n.target)}}})),Na(Aa,"groupIndividualImpressionRecords",(()=>{var e,t;0!=(null===(e=xa.pendingIndividualImpressionRecords)||void 0===e?void 0:e.size)&&(null===(t=xa.pendingIndividualImpressionRecords)||void 0===t||t.forEach(((e,t,n)=>{var a;const i=[];let r=0;null==e||e.forEach(((e,t)=>{(0==t||Math.abs(e.eventTime-r/t)<2e3)&&(r+=e.eventTime,i.push(e))})),i.length==(null==e?void 0:e.length)?n.delete(t):n.set(t,e.filter((e=>!i.includes(e)))),null===(a=xa.groupedImpressionsQueue)||void 0===a||a.push(i)})))})),Na(Aa,"sendRequestFromQueue",(()=>{var e,t;let n=[];const a=null===(e=xa.groupedImpressionsQueue)||void 0===e?void 0:e.length;var i;a&&a>20?(n=null===(i=xa.groupedImpressionsQueue)||void 0===i?void 0:i.splice(0,20),(0,B.cL)("DVWebNode::ImpressionTracker::BatchSizeMaxed",1,!1)):(n=xa.groupedImpressionsQueue,xa.groupedImpressionsQueue=[]);if(n=null===(t=n)||void 0===t?void 0:t.filter((e=>e.length>0)),!n||!n[0])return void(0,B.cL)("DVWebNode::ImpressionTracker::NoGroupedImpressions",1,!1);const r={eventBatchTimestamp:Date.now(),ImpressionEntryList:n.map((e=>({items:e.map((e=>({ImpressionEntryEvent:{eventId:(0,Ma.Z)(),eventType:e.eventType,eventTrigger:e.eventTrigger,eventTimestamp:e.eventTime},ImpressionEntryView:{inViewTime:e.inViewTime,inViewStripe:Math.min(100*e.maxFractionInView,100),timeToView:e.timeToView},ImpressionEntryItem:{itemName:e.widgetType,itemContentId:e.titleID,itemCreativeId:e.imageURL,itemContentSize:e.elementSize,itemReftag:e.refMarker,itemSlotId:`${e.itemPosition+1},${e.carouselPosition+1}`},ImpressionEntryItemAnalytics:e.itemAnalytics}))),carouselAnalytics:e[0].collectionImpressionData,clientVariant:"PVWebsite"})))};xa.client.logImpression(r)})),Na(Aa,"attachOnIdleCallback",(()=>{xa.idleCallbackHandle||xa.timeoutID||(window.requestIdleCallback?xa.idleCallbackHandle=window.requestIdleCallback(xa.onIdleCallback):xa.timeoutID=window.setTimeout((()=>{const e=Date.now();xa.onIdleCallback({didTimeout:!1,timeRemaining:()=>e+50-Date.now()})}),2e3))})),Na(Aa,"detatchOnIdleCallback",(()=>{window.cancelIdleCallback&&xa.idleCallbackHandle?window.cancelIdleCallback(xa.idleCallbackHandle):xa.timeoutID&&window.clearTimeout(xa.timeoutID),xa.clearSavedCallback()})),Na(Aa,"clearSavedCallback",(()=>{xa.idleCallbackHandle=void 0,xa.timeoutID=void 0})),Na(Aa,"onPageHide",(()=>{var e;(0,B.cL)("DVWebNode::ImpressionTracker::OnPageHide",1,!1);const t=performance.now();if(!xa.currentlyInViewItems)return;const n=Array.from(xa.currentlyInViewItems.keys()).map((e=>({isIntersecting:!1,target:e,time:t,intersectionRatio:0,rootBounds:null,intersectionRect:e.getBoundingClientRect(),boundingClientRect:e.getBoundingClientRect()})));null===(e=xa.intersectionObserverEntryQueue)||void 0===e||e.push(...n),xa.onIdleCallback({didTimeout:!0,timeRemaining:()=>100},!0)}));const Oa=e=>{window&&window.location.href.includes("impressionDebug")&&(0,m.isInternal)()&&window.console.log(e)},Va=({logOutcome:e})=>({url:t})=>{e({isSuccess:!0}),window.location.assign(t)},Wa="dv_web_dl_success",Ba="dv_web_dl_failure",Ga=({logOutcome:e})=>({url:t,fallbackUrl:n})=>{var a;null===(a=window.P)||void 0===a||a.when("mash").execute((a=>{a.launchIntentURL({url:t,successCallback:()=>{e({isSuccess:!0}),Fn(Wa)},failCallback:async()=>{n?(e({isSuccess:!0}),await Fn(Wa),window.location.assign(n)):(e({isSuccess:!1}),await Fn(Ba))}})}))},Ha=({logOutcome:e})=>({url:t,fallbackUrl:n})=>{var a;null===(a=window.P)||void 0===a||a.when("mash").execute((a=>{a.canLaunchIntentURL({url:t,successCallback:async i=>{i?(await Fn(Wa),e({isSuccess:!0}),a.launchIntentURL({url:t})):(await Fn(Ba),e({isSuccess:!1}),n&&a.launchIntentURL({url:n}))},failCallback:()=>{e({isSuccess:!1}),Fn(Ba)}})}))},ja=new Ct.Oc("DVWbNode:deeplink"),$a="pv-hidden-iframe",za=e=>{var t,n;return null!==(t=null==e||null===(n=e.match(/^([^:]+)/))||void 0===n?void 0:n[1])&&void 0!==t?t:"unknown"},Fa=(e,t,n)=>{const a=za(e);n?(Fn(`dv_deeplink_${a}_noapp`),ja.count(`DVWeb::Deeplink::${a}::NoApp`,1,!0),k.c.count("DVWebDeeplinkNoApp",1,{scheme:a}),t({isSuccess:!0}),window.location.assign(n)):(t({isSuccess:!1}),ja.error("fallbackUrl param is required for deeplinking"))},Ua=(e,t)=>{const n=za(e);Fn(`dv_deeplink_${n}`),t({isSuccess:!0}),ja.count(`DVWeb::Deeplink::${n}`,1,!0),k.c.count("DVWebDeeplink",{scheme:n})},qa=()=>document.querySelector("#"+$a)||((e,t)=>{const n=document.createElement("iframe");return n.src=t,n.id=$a,n.style.display="none",e.appendChild(n),n})(document.body,"about:blank"),Ka=(e,t,n)=>(e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}),Qa=({logOutcome:e})=>({url:t,fallbackUrl:n})=>{navigator.msLaunchUri&&navigator.msLaunchUri(t,(()=>Ua(t,e)),(()=>Fa(t,e,n)))},Za=({logOutcome:e})=>({url:t,fallbackUrl:n})=>{const a=setTimeout((()=>{Fa(t,e,n),r&&r()}),1e3),i=qa(),r=Ka(window,"blur",(()=>{clearTimeout(a),r&&r(),Ua(t,e)}));i.contentWindow&&(i.contentWindow.location.href=t)},Ja=({logOutcome:e})=>({url:t,fallbackUrl:n})=>{const a=qa();try{a.contentWindow&&(a.contentWindow.location.href=t),Ua(t,e)}catch(a){"NS_ERROR_UNKNOWN_PROTOCOL"===a.name?Fa(t,e,n):ja.error("Unexpected error with Firefox deeplinking",a)}},Xa=({logOutcome:e})=>({url:t,fallbackUrl:n})=>{const a=setTimeout((()=>{Fa(t,e,n),r&&r()}),1e3);let i=window;for(;i!=i.parent;)i=i.parent;const r=Ka(i,"blur",(()=>{clearTimeout(a),r&&r(),Ua(t,e)}));window.location.assign(t)},Ya=new Ct.Oc("DVWebNode:deeplink"),ei=(e,t)=>e({logOutcome:({isSuccess:e})=>{Ya.count(`DVWebNode:deeplinking:${t}:${e?"success":"failure"}`,1,!1),e?k.c.count("DVWebNodeDeeplinkingSuccess",1,{variant:t}):k.c.count("DVWebNodeDeeplinkingFailure",1,{variant:t})}}),ti=()=>({URL:ei(Va,"url"),URL_EMBEDDED:ei(Va,"urlEmbedded"),MSHOP_ANDROID:ei(Ha,"mshopAndroid"),MSHOP_ANDROID_EMBEDDED:ei(Ha,"mshopAndroidEmbedded"),MSHOP_IOS:ei(Ga,"mshopIos"),IOS_LEGACY:ei(Va,"iosLegacy"),WIN10_EDGE:ei(Qa,"win10Edge"),WIN10_FIREFOX:ei(Za,"win10Firefox"),WIN10_FIREFOX_LEGACY:ei(Ja,"win10FirefoxLegacy"),WIN10_CHROME:ei(Xa,"win10Chrome"),MAC_OS:ei(Za,"macOS")}),ni=[188,250,375,500],ai=[360,480,720,1080],ii=[{"max-tablet-lowest":155},{"max-laptop-lowest":150},{"max-desktop-lowest":175},{"max-desktop-hd-lowest":175},{"max-desktop-uhd-lowest":245}],ri=[{"max-tablet-lowest":260},{"max-laptop-lowest":260},{"max-desktop-lowest":390},{"max-desktop-hd-lowest":390},{"max-desktop-uhd-lowest":540}],oi=({isCircle:e=!1,alternateText:t,fallbackTitle:n,imageUrl:a,className:r,imageWrapperClassName:o,imageClassName:l,url:s,deeplinkFallbackUrl:c,deeplinkType:d,backgroundTrailerConfig:u,hasProgress:m,parentElement:p,badge:g,cardOverlay:v,playButtonOverlay:f,reactionOverlay:y,onPackshotLinkKeyDown:b,linkAriaRole:E,noBottomCornerRadiusLink:C,refMarker:_,titleID:T,shouldLazyLoadImage:k})=>{var w;const[L,I]=i.useReducer((()=>!0),!1),{container:{containerType:P}}=i.useContext(_E),D=e=>{p&&Aa.logManualImpression(p,"Charts"===P?"Highlight":"Select"),s&&!u&&d&&(ti()[d]({url:s,fallbackUrl:c}),e.preventDefault())},S=i.createElement("div",{className:Ia},i.createElement("div",{className:Pa},i.createElement("span",{className:wa},null!=n?n:""," "))),x=a?i.createElement(Ca,{alt:t,src:a,imageClassName:l,wrapperClassName:h()(o),aspectRatio:e?yt.OneByOne:yt.SixteenByNine,sizesOptions:{defaultSrcSize:e?245:540,srcSizes:e?ii:ri},srcSetWidths:e?ni:ai,baseValue:e?375:720,parentListeners:{onError:I},shouldLazyLoad:k,debugID:T}):i.createElement(i.Fragment,null);return i.createElement("div",{className:h()(_a,r),"data-testid":"packshot"},s&&!u&&!f&&!y&&i.createElement("a",{href:s,className:h()(Ta,{[ka]:C}),onClick:D,onKeyDown:b,role:E},n),u&&i.createElement(ia,{prerolls:u.prerolls,canPlay:u.canPlay,delay:u.delay,placement:u.placement,className:null!==(w=u.className)&&void 0!==w?w:"",draperClassName:h()({[La]:m&&u.canPlay}),draperParentListeners:{onClick:D},playback:aa.Restart,playerIsActive:!0,link:s,noBottomCornerRadiusLink:C,refMarker:_,titleID:T}),a&&!L?x:S,g,v,f,y)},li="ngPjD-",si="iQ3mqd",ci="PdTBRa",di="XadxaR",ui="QvLzEW",mi="VdW1kY",pi="_1U2rMW",gi="ivxXre",vi="n3eJPz",hi="kT254+",fi="RPY2bm",yi="_0SSfhT",bi="ec67mb",Ei="Qky6bp",Ci="dDvmDQ",_i="FG-9uo",Ti="_0mVI72",ki="_0Xxh5H",wi="giv-Mo",Li="Fi9WuY",Ii="omNIKl",Pi="O+WH8U",Di="IUzlM1",Si="ZdMG6X",xi="VrHr6l",Mi="_3UuiDN",Ni="_0dqiQi",Ri="UFroed";function Ai(){return Ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ai.apply(this,arguments)}const Oi=({uniqueId:e,className:t,buttonIcon:n,label:a,buttonClassName:r,labelClassName:o,dropdownElements:l,dropdownOpen:s=!1,smallIconVariant:c=!1,isDefaultCheck:d=!1,onClick:u})=>{const m=d?{checked:s}:{defaultChecked:s},p=(0,V.h)(),g=h()(Li,t,{[xi]:p("DV_WEB_FABLE_ICON_MIGRATION_651317").isT1});return i.createElement("aside",{className:g,"data-testid":"dropdown-button"},i.createElement("input",Ai({type:"checkbox",autoComplete:"off",id:e,className:Ii,onChange:u},m)),i.createElement("label",{htmlFor:e,className:h()(Di,r,{[Si]:c})},i.createElement("span",{className:Pi},n)),a&&i.createElement("label",{className:h()(Mi,o)},a),i.createElement("ul",{className:Ni},l.map(((e,t)=>i.createElement("li",{key:`dropdown-element-${t}`,className:Ri},e)))))},Vi="VFWNV8";var Wi=n("./node_modules/@amzn/dvui/dist/Icons/Trailer.js"),Bi=n.n(Wi),Gi=n("./node_modules/@amzn/dvui/dist/Icons/TrailerIcon.js"),Hi=n.n(Gi);const ji=({trailer:e,onPlay:t,buttonStyle:n,textStyle:a,isInDropdown:r,isModalVariant:o})=>{const{playbackURL:l,playbackID:s,videoMaterialType:c,refMarker:d,text:u,signInURL:m}=e,p=e=>{t({playbackUrl:l,contentConfig:{asin:s,videoType:c,trailer:!0,ref:d},signInUrl:m,refMarker:(0,Cn.vA)(null!=d?d:"atv_unknown",c)}),e.preventDefault()},g=null==u?void 0:u.replace("{conditionalLineBreak}","");return i.createElement("form",{action:m||l,method:"GET"},r||o?i.createElement("button",{type:"submit",className:v(Vi,n),onClick:p,"data-testid":"trailer"},o?i.createElement(Hi(),null):i.createElement(Bi(),null),i.createElement("span",{className:a}," ",g," ")):i.createElement(ht,{onSecondaryButtonClick:p,label:g,labelClassName:a,className:n,isInverted:!1,isDisabled:!1,icon:i.createElement(Hi(),{width:ot,height:rt}),smallIconVariant:!0,testID:"trailer"}))};var $i=n("./node_modules/@amzn/dv-marin-tracking-js-library/dist/index.js");const zi=i.createContext({}),Fi=(zi.Consumer,zi.Provider,e=>t=>i.createElement(e,t));let Ui=function(e){return e.PlaybackClicked="PlaybackClicked",e.PlaybackClickUnhandled="PlaybackClickUnhandled",e.PlaybackStarted="PlaybackStarted",e.PlayerTitleChanged="PlayerTitleChanged",e.PlayerClosed="PlayerClosed",e.PlayerFailedToLoad="PlayerFailedToLoad",e.SignupClick="SignupClick",e.SignupComplete="SignupComplete",e.PurchaseClicked="PurchaseClicked",e.PurchaseCompleted="PurchaseCompleted",e}({});const qi=e=>{const{action:t,logger:n,pageType:a,videoType:i}=e;n.count(`DVWeb::Actions::${t}::${a}::Web::${i}`,1,!0),k.c.count("DVWebPlayerIntegrationActions",1,{action:t,pageType:a,appName:"Web",videoType:i})},Ki="dv-web-player",Qi=()=>{let e=document.getElementById(Ki);return e||(e=document.createElement("div"),e.setAttribute("id",Ki),document.body.appendChild(e),e)},Zi={Detail:"f22dbddb-ef2c-48c5-8876-bed0d47594fd",DetailAndroid:"898eb3b8-96c0-4c6b-baa3-2d253860be8c",DetailAndroidMShop:"98d383c3-632a-4872-8ef8-7cc10d033066",Live:"b4f777f2-3153-4c55-8aa7-4645fe264be1",Home:"9ee9ba9b-f89c-41bb-8aa0-4db6e7f24cad",LandingPage:"9ee9ba9b-f89c-41bb-8aa0-4db6e7f24cad",MyStuffLanding:"54cb2f2e-e96f-4e25-9d08-ea852a40588d",AIVWatchlist:"8e377055-28b0-4475-a3e7-f909ebcad6f1",YourVideoLibrary:"1e2f7321-aba1-4bd3-bdfc-a63777d869af",SPA:"933adc82-54c5-4fe0-9273-f1e188456161",PersonPage:"41e7965c-89b8-4967-bdd3-74e2a8f06636",ChannelsSubscription:"66d54d28-d754-4b11-b74d-427a03909d93",Following:"74392e3c-4c00-479e-90c8-f4d42aae8705",EPG:"bdd74b62-c362-46c8-86f0-47e300702607",Search:"47c62571-58c9-4572-9a75-52f68e019cea",Browse:"47c62571-58c9-4572-9a75-52f68e019cea",Genre:"47c62571-58c9-4572-9a75-52f68e019cea",Categories:"47c62571-58c9-4572-9a75-52f68e019cea"},Ji=e=>Zi[e],Xi={Detail:sn.Detail,Live:sn.ATVDetail,DetailAndroid:sn.ATVDetail,DetailAndroidMShop:sn.ATVDetail,Home:sn.ATVHome,LandingPage:sn.ATVHome,MyStuffLanding:sn.ATVMyStuff,AIVWatchlist:sn.ATVMyStuff,YourVideoLibrary:sn.ATVMyStuff,SPA:sn.DVSPA,PersonPage:sn.ATVPerson,ChannelsSubscription:sn.ATVSubscription,Following:sn.ATVMyStuff,EPG:sn.ATVLive,Search:sn.ATVSearch,Browse:sn.ATVBrowse,Genre:sn.ATVGenre,Categories:sn.ATVCategories},Yi=e=>Xi[e],er=e=>{const{marketplaceId:t,sessionId:n,playerBeta:a,customerId:i,locale:r,pageType:o,deviceId:l}=e,s={marketplaceId:t,sessionId:n,playerBeta:a,customerId:i,locale:r,deviceId:l,domElement:Qi(),clientId:Ji(o)};var c;return(c=s)&&Object.entries(c).forEach((([e,t])=>void 0===t&&delete c[e])),s};var tr=n("./src/util/utils/pubSub.ts");function nr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class ar{constructor(e,t=new Ct.Oc("DVWebNodeSPA/UWPNotifier")){nr(this,"myWindow",void 0),nr(this,"logger",void 0),nr(this,"pubSub",void 0),nr(this,"chromeWebViewInputDispatcher",(e=>{try{const t=e.data[0],n=JSON.parse(e.data[1]);t&&n&&this.pubSub.publish(t,n)}catch(t){this.logger.error("UWPNotifier failed to parse the native action payload in webview2 ",e,t)}})),this.myWindow=e,this.logger=t,this.pubSub=(0,tr.M)(),this.init()}static getInstance(){return this.instance||(this.instance=new ar(window)),this.instance}isChromeWebViewPresent(){return"undefined"!=typeof window&&void 0!==window.chrome&&void 0!==window.chrome.webview}isSubscribed(e){const t=this.pubSub.query(e);return t&&t.length>0}subscribe(e,t){try{return this.pubSub.subscribe(e.toString(),t)}catch(n){const a="UWPNotifier failed to subscribe to an event from the native app";this.logger.error(a,e,t,n)}}unsubscribe(e,t){try{return this.pubSub.unsubscribe(e.toString(),t)}catch(n){const a="UWPNotifier failed to unsubscribe to an event from the native app";return this.logger.error(a,e,t,n),Promise.reject(new Error(a))}}publish(e,t){const n=Date.now();try{this.notify(JSON.stringify({action:e,payload:t,timestamp:n}))}catch(a){this.logger.error("UWPNotifier failed to generate the payload and notify the native app",e,t,n,a)}}init(){var e;this.isChromeWebViewPresent()&&(null===(e=window.chrome)||void 0===e||null===(e=e.webview)||void 0===e||e.addEventListener("message",this.chromeWebViewInputDispatcher));this.myWindow.primevideoUWPNotifierHandler=this.inputDispatcher.bind(this)}notify(e){if(this.isChromeWebViewPresent())try{var t;null===(t=window.chrome)||void 0===t||null===(t=t.webview)||void 0===t||t.postMessage(e)}catch(e){0}else if(this.myWindow&&this.myWindow.external)try{this.myWindow.external.notify(e)}catch(e){0}}inputDispatcher(e,t){try{const n=JSON.parse(t);this.pubSub.publish(e,n)}catch(n){this.logger.error("UWPNotifier failed to parse the native action payload",e,t,n)}}}nr(ar,"instance",void 0);let ir=function(e){return e.UWP="UWP",e.XP="XP",e}({}),rr=null;const or=()=>rr,lr=e=>{return/Macintosh; Intel Mac OS X/i.test(null===(t=window)||void 0===t||null===(t=t.navigator)||void 0===t?void 0:t.userAgent)&&!/Chrome|Firefox|Facebot/i.test(null===(n=window)||void 0===n||null===(n=n.navigator)||void 0===n?void 0:n.userAgent)&&(null===(a=window)||void 0===a||null===(a=a.navigator)||void 0===a?void 0:a.maxTouchPoints)&&(null===(i=window)||void 0===i||null===(i=i.navigator)||void 0===i?void 0:i.maxTouchPoints)>1&&"EMBEDDED"===e;var t,n,a,i};var sr;const cr=new Ct.Oc("DVWebNode:deeplink"),dr=i.createContext({onPlay:null}),ur=(e,t)=>{ti()[t]({url:e.playbackUrl,fallbackUrl:e.fallbackUrl})},mr=e=>(null==e?void 0:e.isBonus)||(null==e?void 0:e.sequenceNumber)&&e.sequenceNumber>=1&&e.sequenceNumber<=3,pr=({onPlay:e,launchType:t,trailerLaunchType:n,playerConfigPageType:a,onDownloadAppRequired:i,enableMarinTracking:r,recordTerritory:o,downloadGateway:l,pageType:s,subPageType:c,clientVariant:d,clickstream:u})=>p=>{var g,v;const h=Yi(a),f=null!=p&&p.triggerLocation?`${a}:${p.triggerLocation}`:a,y=null==p||null===(g=p.contentConfig)||void 0===g?void 0:g.asin,b=null==l?void 0:l.triggerNativeOfflinePlayback,E=null==l?void 0:l.hasDownloaded,C=null==l?void 0:l.isDownloadQueuedOrDownloading,_=null==l||null===(v=l.xp)||void 0===v?void 0:v.triggerXpOfflinePlayback,T=e?t=>{qi({action:Ui.PlaybackClicked,pageType:h,logger:cr,videoType:L}),e(t)}:null;const{trailer:w}=p.contentConfig;!r||w||p.isBonus||("Detail"===a||"DetailAndroid"===a?"Prime"===p.subscriptionName&&(0,$i.sendConversionTrackingRequest)($i.ConversionType.SVOD_ANY_STREAM,null!=o?o:"INVALID_TERRITORY"):(0,$i.sendConversionTrackingRequest)($i.ConversionType.UNDEFINED_ANY_STREAM,null!=o?o:"INVALID_TERRITORY"));const L=p.contentConfig.videoType||"unknown",I=L.toLowerCase(),P="trailer"===I?n:t,D=or();if(cr.count(`DVWebNode:LaunchType:${a}:${P}`,1,!1),cr.count(`DVWebNode:LaunchType:${a}:${I}:${P}`,1,!1),k.c.count("DVWebNodePlayerLaunchType",1,{playerConfigPageType:a,launchTypeToApply:P,videoTypeInLowerCase:I}),!(()=>{const e=(0,m.getRequestContext)();return e.queryParameters.skipIPadDeeplink&&"1"===e.queryParameters.skipIPadDeeplink[0]})()&&lr(P)&&y)cr.info("iPad emergency deeplink redirect"),((e,t)=>{let n;n="Fogg"===(0,m.getRequestContext)().domain?`https://app.primevideo.com/watch?gti=${e}&r=app&time=${t}`:`https://watch${(0,G.is)()}/watch?asin=${e}&r=app&time=${t}`,ti().URL({url:n})})(y,p.contentConfig.position||0);else if("feature"===I&&(e=>!e||e.supportsDrm)(D)&&["MSHOP_ANDROID_EMBEDDED","URL_EMBEDDED"].includes(P))"MSHOP_ANDROID_EMBEDDED"===P?((e,t,n,a)=>{var i;const r=()=>{mr(t)&&e?e(t):a?a():ur(t,n)};null===(i=window.P)||void 0===i||i.when("mash").execute((e=>{e.canLaunchIntentURL({url:t.playbackUrl,successCallback:e=>{e?ur(t,n):r()},failCallback:()=>{r()}})}))})(T,p,P,i):((e,t,n)=>{mr(t)&&e?e(t):ur(t,n)})(T,p,P);else if("EMBEDDED"===P)if("feature"===I&&E&&E(y,ir.UWP)&&b)b(y),sr.count(kn.PlaybackOriginNativePlayback,{[f]:1});else if(T){let e=Tn.DownloadFallBackStreaming;"feature"===I&&E&&E(y,ir.XP)&&_?(_(p,T),sr.count(kn.PlaybackOriginXpPlayback,{[f]:1})):T(p),"feature"===I&&C&&C(y)&&sr.count(e,{downloadingInComplete:1}),Fn(p.refMarker||p.contentConfig.ref||"atv_unknown",s,c,y,[gn.Click],void 0,d,u)}else qi({action:Ui.PlaybackClickUnhandled,pageType:h,logger:cr,videoType:L}),cr.error(`Missing onPlay for Embedded Player ${JSON.stringify({pageType:s,subPageType:c})}`);else ti().hasOwnProperty(P)?ur(p,P):(qi({action:Ui.PlaybackClickUnhandled,pageType:h,logger:cr,videoType:L}),cr.error(`Unhandled Playback ${JSON.stringify({pageType:s,subPageType:c,launchTypeToApply:P})}`))},gr=({onPlay:e,launchType:t,trailerLaunchType:n,playerConfigPageType:a,onDownloadAppRequired:r,children:o,enableMarinTracking:l,downloadGateway:s,pageType:c,subPageType:d,clientVariant:u,clickstream:p})=>{var g,v,h,f;const{clickstreamPageContext:y}=i.useContext(N),b=null!==(g=null==y?void 0:y.pageType)&&void 0!==g?g:c,E=null!==(v=null==y?void 0:y.subPageType)&&void 0!==v?v:d,C=null!==(h=null==y?void 0:y.clientVariant)&&void 0!==h?h:u,_=pr({onPlay:e,launchType:t,trailerLaunchType:n,playerConfigPageType:a,onDownloadAppRequired:r,enableMarinTracking:l,recordTerritory:null===(f=(0,m.getRequestContext)())||void 0===f?void 0:f.recordTerritory,downloadGateway:s,pageType:b,subPageType:E,clientVariant:C,clickstream:p});return i.createElement(dr.Provider,{value:{onPlay:_,launchType:t}},o)};gr.displayName="PlaybackArea";const vr=Fi((0,s.s6)(gr));var hr=n("./node_modules/@amzn/dvui/dist/Icons/Overflow.js"),fr=n.n(hr),yr=n("./node_modules/@amzn/dvui/dist/Icons/Tick.js"),br=n.n(yr),Er=n("./node_modules/@amzn/dvui/dist/Icons/Info.js"),Cr=n.n(Er),_r=n("./node_modules/@amzn/dvui/dist/Icons/WishlistAdd.js"),Tr=n.n(_r),kr=n("./node_modules/@amzn/dvui/dist/Icons/Delete.js"),wr=n.n(kr);const Lr="nBtA6v";var Ir=n("./src/util/types/wps/mystuff-cs.ts"),Pr=n("./node_modules/@amzn/dvui/dist/Icons/Close.js"),Dr=n.n(Pr);const Sr="d5QfMo",xr="oCjIRU",Mr="lA7kc2",Nr="xn14PB",Rr="+eW92P",Ar="WqE8n+";function Or(){return Or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Or.apply(this,arguments)}const Vr=({children:e,className:t,...n})=>i.createElement("span",Or({className:v(Sr,t)},n),e),Wr=({children:e,className:t,...n})=>i.createElement("span",Or({className:v(xr,t)},n),e),Br=({children:e,className:t,...n})=>i.createElement("p",Or({className:v(Mr,t)},n),e),Gr=({children:e,className:t,...n})=>i.createElement("h4",Or({className:v(Nr,t)},n),e),Hr=({children:e,className:t,...n})=>i.createElement("h3",Or({className:v(Rr,t)},n),e),jr=({children:e,className:t,...n})=>i.createElement("h2",Or({className:v(Ar,t)},n),e),$r={modalContainer:"iKamlh",modalWrapper:"rvJd8n",fadeInFrames:"r9gEB4",background:"e8FL8q",modalContent:"t3E74H",xsModalSize:"fHwPje",sModalSize:"CGno9b",mModalSize:"tow9o1",lModalSize:"oAUzdo",headerWrapper:"_4CeEyk",closeButton:"q2lvVN",bodyWrapper:"UV6HKC",footerWrapper:"kZXeoZ",actionButton:"fuSZLL",alignedActionButton:"vhGVDS"};var zr=n("./node_modules/react-dom/index.js");const Fr=({children:e})=>{const t=i.useRef(null);i.useEffect((()=>(document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n))),[]);const n=e=>{var n;if("Tab"!==e.key)return;const a=e.shiftKey&&"Tab"===e.key,i=Array.from((null===(r=t.current)||void 0===r?void 0:r.querySelectorAll('a[href],textarea,input,button,label,[tabindex]:not([tabindex="-1"])'))||[]);var r;const o=i.shift(),l=i.pop()||o,s=null===(n=t.current)||void 0===n?void 0:n.contains(document.activeElement),c=document.activeElement===(a?o:l)||null;s&&!c||((e,t)=>{t.preventDefault(),null==e||e.focus()})(a?l:o,e)};return i.createElement("div",{ref:t,"data-testid":"focus-trap"},e)};var Ur=n("./node_modules/@amzn/dvui/dist/Button.js"),qr=n.n(Ur),Kr=n("./src/util/mShop.ts");function Qr(){return Qr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qr.apply(this,arguments)}const Zr="modal-no-scroll",Jr=({isVisible:e,className:t,size:n="m",testID:a,titleText:r,bodyText:o,primaryActionText:l,secondaryActionText:s,onRequestClose:c,onDismiss:d,primaryActionHref:u,onPrimaryAction:m,onSecondaryAction:p,header:g,disableHeader:v,disableCloseButton:f,body:y,disableBody:b,footer:E,disableFooter:C,rootElement:_})=>{var T;const k=i.useRef(null),{mShopBottomBarHeights:w}=(0,Kr.n)();i.useEffect((()=>{var t,n,a;e?(null===(t=document)||void 0===t||null===(t=t.documentElement)||void 0===t||t.classList.add(Zr),null==k||null===(n=k.current)||void 0===n||n.focus()):(null===(a=document)||void 0===a||null===(a=a.documentElement)||void 0===a||a.classList.remove(Zr),null==d||d());return()=>{var e;null===(e=document)||void 0===e||null===(e=e.documentElement)||void 0===e||e.classList.remove(Zr)}}),[e]);if(!e)return null;const L=i.createElement("button",{type:"button",onClick:c,className:$r.closeButton,"data-testid":"modal-close-button"},i.createElement(Dr(),null)),I=i.createElement(Oe.Text,{string:r,tag:"span",testID:"menu-header"}),P=i.createElement("div",{role:"presentation",className:$r.modalContainer,onKeyDown:e=>{k.current&&"Escape"===e.key&&c()}},i.createElement("div",{role:"presentation",onClick:c,className:$r.background}),i.createElement("div",Qr({role:"dialog","aria-label":"Modal",ref:k,tabIndex:0,className:h()($r.modalWrapper,$r[`${n}ModalSize`],t)},a&&{"data-automation-id":a,"data-testid":a},{style:{marginBottom:`${null!==(T=null==w?void 0:w.visibleHeight)&&void 0!==T?T:0}px`}}),i.createElement(Fr,null,i.createElement("div",{className:$r.modalContent},!v&&i.createElement(Hr,{className:$r.headerWrapper},null!=g?g:I,!f&&L),!b&&(null!=y?y:i.createElement(Br,{className:$r.bodyWrapper},i.createElement(Oe.Text,{string:o,tag:"span"}))),!C&&(null!=E?E:i.createElement("div",{className:$r.footerWrapper},l&&i.createElement(Ur.PrimaryButton,{testID:"primary-action-button",className:h()($r.actionButton,{[$r.alignedActionButton]:u}),onClick:m,href:u},l),s&&i.createElement(qr(),{testID:"secondary-action-button",className:$r.actionButton,onClick:p},s)))))));return _?(0,zr.createPortal)(P,_):P};Jr.displayName="Modal";const Xr=({text:e,icon:t,testId:n,modalProps:a,onDismiss:r,onPrimaryAction:o,requireModalConfirmation:l=!1,buttonTestId:s,buttonStyle:c,textStyle:d,isInDropdown:u})=>{const[m,p]=i.useState(!1),g=e=>{e.preventDefault(),l?p(!0):(o(e),null==r||r())},v=()=>{p(!1),null==r||r()},{modalTestId:h,modalStyle:f,modalText:y,modalTextWarning:b,modalTitle:E,modalPrimaryActionText:C,modalSecondaryActionText:_}=a||{};return i.createElement("div",{"data-testid":n},a&&i.createElement(Jr,{testID:h,className:f,isVisible:m,titleText:E,primaryActionText:C,secondaryActionText:_,onPrimaryAction:e=>{e.preventDefault(),o(e),v()},onSecondaryAction:v,onRequestClose:v,body:i.createElement(Br,{className:$r.bodyWrapper},i.createElement("p",null,y),b&&i.createElement("p",null,b))}),u?i.createElement("button",{type:"submit",className:c,onClick:g,"data-testid":s},t,i.createElement("span",{className:d},e)):i.createElement(ht,{onSecondaryButtonClick:g,label:e,labelClassName:d,className:c,isInverted:!1,isDisabled:!1,icon:t,smallIconVariant:!0,testID:s}))},Yr=({titleID:e,action:t,icon:n,buttonStyle:a,textStyle:r,testId:o,onDismiss:l,isInDropdown:s})=>{const{text:c,modalTitle:d,modalPrimaryActionText:u,modalSecondaryActionText:m,modalText:p,modalTextWarning:g}=t,{actions:{onLibraryAction:v}}=i.useContext(_E);return i.createElement(Xr,{requireModalConfirmation:t.state===Ir.GI.HIDDEN||t.state===Ir.GI.REMOVED,text:c,icon:n,buttonStyle:a,buttonTestId:"library-item-action-button",textStyle:r,testId:o,modalProps:{modalTitle:d,modalPrimaryActionText:u,modalSecondaryActionText:m,modalTextWarning:g,modalText:p,modalStyle:Lr,modalTestId:"library-item-action-confirmation-modal"},onPrimaryAction:()=>{v(e,t)},onDismiss:l,isInDropdown:s})};var eo=n("./node_modules/@amzn/dvui/dist/Icons/StartOver.js"),to=n.n(eo);const no=(e,t,n,a,r,o)=>{let l;switch(t.state){case Ir.GI.HIDDEN:case Ir.GI.REMOVED:l=i.createElement(wr(),!a&&{width:ot,height:rt});break;case Ir.GI.VISIBLE:l=i.createElement(to(),!a&&{width:ot,height:rt})}return i.createElement(Yr,{titleID:e,action:t,icon:l,buttonStyle:r,textStyle:n,isInDropdown:a,testId:`library-${t.state.toLowerCase()}-action`,onDismiss:o})};var ao=n("./src/util/utils/dvstring/index.ts"),io=n("./src/util/types/wps/shared.ts");const ro="m5ZWQf",oo="OAmKXk",lo="uIX1MD";var so=n("./node_modules/@amzn/dvui/dist/Icons/PlayButton.js");const co=({href:e,label:t,onPlayButtonClick:n,className:a,labelClassName:r})=>{const o=e?"a":"button";let l=i.createElement(o,{href:e,onClick:n,className:v(a,oo),"data-testid":"play","aria-label":"string"==typeof t?t:null==t?void 0:t.string},i.createElement(so.PlayButton,{width:"100%",height:"100%"}));return t&&(l=i.createElement("label",{className:v(r,lo)},l,i.createElement(Oe.Text,{string:t}))),i.createElement("div",{className:v(ro)},l)};var uo=n("./node_modules/@amzn/dvui/dist/Fable/components/Icons/Play.js"),mo=n.n(uo);const po="AHkGl-",go="rJYNAU",vo="jXfKn7",ho="p6KLAQ",fo="_4lxgDz",yo="Koh1N4",bo="By+Hl3",Eo="pwgeVW";var Co=n("./node_modules/@amzn/dvui/dist/Spacer.js"),_o=n("./node_modules/@amzn/dvui/dist/PlayButton.js");const To="NyrD54",ko="jGE40w",wo="ROwEtB";var Lo=n("./node_modules/@amzn/dvui/dist/Icon.js"),Io=n("./node_modules/@amzn/dvui/dist/Icons/PlayArrow.js"),Po=n.n(Io),Do=n("./node_modules/@amzn/dvui/dist/Icons/RapidRecap.js"),So=n.n(Do);function xo(){return xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xo.apply(this,arguments)}let Mo=function(e){return e.WatchLive="LiveStreamWatchNow",e.FromEarliest="LiveStreamFromEarliest",e.FromBeginning="LiveStreamFromBeginning",e.FromBookmark="LiveStreamFromBookmark",e.RapidRecap="RapidRecap",e}({});const No=({playbackStatus:e})=>{const t=e===Mo.RapidRecap,n=e===Mo.FromBeginning||e===Mo.FromEarliest;return t?i.createElement(So(),null):n?i.createElement(to(),null):i.createElement(Po(),null)},Ro=({playbackStatus:e,isCleanSlate:t,isPrimary:n,className:a,children:r,...o})=>{const l=i.createElement(No,{playbackStatus:e}),s=!t&&n?Ur.PrimeButton:Ur.Button;return i.createElement(s,xo({forceDoubleHeight:!0},o,{icon:l,className:v(a)}),i.createElement("span",null,r))},Ao="_1EJvy-",Oo="BRug1g",Vo="zH2exL";var Wo=n("./src/util/types/wps/containers.ts"),Bo=n("./node_modules/@amzn/dvui/dist/Fable/components/PlayButton/index.js");const Go=({playbackContent:e,isMShop:t,triggerPlayback:n})=>{const a=(0,V.h)()("DV_WEB_FABLE_BUTTON_MIGRATION_651324");return e?i.createElement(i.Fragment,null,a.isOn?i.createElement(Bo.PlayButton,{testID:"play",className:ko,onClick:n,href:t?void 0:e.playbackUrl,ariaLabel:e.label?e.label:"",label:e.label}):i.createElement(_o.PlayButton,{className:ko,onClick:n,href:t?void 0:e.playbackUrl,ariaLabel:e.label?e.label:"",label:e.label,"data-testid":"play"})):null},Ho=({playbackContent:e,isMShop:t,triggerPlayback:n})=>e?i.createElement("div",{className:`${Ao} ${To} dv-shared-node-playback`},i.createElement(Ro,{href:t?void 0:e.playbackUrl,onClick:n,playbackStatus:e.playbackStatus,className:wo,"data-testid":"square-play",isCleanSlate:!0},i.createElement(Oe.Text,{tag:"span",string:e.label}))):null,jo=e=>{switch(e){case Wo.PO.FromEarliest:return Mo.FromEarliest;case Wo.PO.FromBeginning:return Mo.FromBeginning;case Wo.PO.FromBookmark:return Mo.FromBookmark;case Wo.PO.RapidRecap:return Mo.RapidRecap;default:return Mo.WatchLive}};function $o(){return $o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},$o.apply(this,arguments)}const zo=({playbackContentList:e,playerConfigData:t,isMShop:n,triggerPlaybackList:a})=>null!=e&&e.length&&null!=a&&a.length&&e.length==a.length?i.createElement(i.Fragment,null,e.map(((e,r)=>{const o={playbackContent:e,playerConfigData:t,isMShop:n};return r?i.createElement(Ho,$o({key:`action-box-playback-${r}`},o,{triggerPlayback:a[r]})):i.createElement(Go,$o({key:"action-box-playback-0"},o,{triggerPlayback:a[r]}))}))):null;var Fo=n("./node_modules/@amzn/dvui/dist/Badge.js");const Uo=({text:e,isLive:t})=>t&&e?i.createElement("div",{className:`${po} ${Vo} ${Oo}`},i.createElement(Fo.Badge,{variant:Fo.BadgeVariant.live,testID:"live-state-badge"},e)):null;var qo=n("./node_modules/@amzn/dvui/dist/Icons/Checkbox.js"),Ko=n("./node_modules/@amzn/dvui/dist/Icons/CheckboxChecked.js");const Qo=({isChecked:e,text:t,onClick:n})=>i.createElement("div",{className:fo},i.createElement("button",{className:bo,onClick:n,"data-testid":"record-season-checkbox"},i.createElement("div",{className:Eo},e?i.createElement(Ko.CheckboxChecked,null):i.createElement(qo.Checkbox,null)),i.createElement("div",null,t)));let Zo=function(e){return e.STORE_MERGE="@@dp/STORE_MERGE",e.CHANGE_PAGE="@@dp/CHANGE_PAGE",e.LIVE_PAGE="@@lp/LIVE_PAGE",e.WatchlistToggle="@@dp/WatchlistToggle",e.WatchlistToggleFailed="@@dp/WatchlistToggleFailed",e.ClearWatchlistToggleFailure="@@dp/ClearWatchlistToggleFailure",e.GetDevices="@@dp/GetDevices",e.GetDevicesLoading="@@dp/GetDevicesLoading",e.GetDevicesFailed="@@dp/GetDevicesFailed",e.RefreshEpisode="@@dp/ActionBox/RefreshEpisode",e.RefreshAtfActionBox="@@dp/ActionBox/RefreshAtfActionBox",e.RefreshBtfActionBoxes="@@dp/ActionBox/RefreshBtfActionBoxes",e.TriggerPurchase="@@dp/ActionBox/TriggerPurchase",e.PurchaseCancelled="@@dp/ActionBox/PurchaseCancelled",e.PurchaseFailed="@@dp/ActionBox/PurchaseFailed",e.TriggerRefund="@@dp/ActionBox/TriggerRefund",e.RefundFailed="@@dp/ActionBox/RefundFailed",e.RefundCancelled="@@dp/ActionBox/RefundCancelled",e.CreateBanner="@@dp/CreateBanner",e.ClearBanner="@@dp/ClearBanner",e.PlaybackStart="@@dp/player/PlaybackStart",e.PlaybackFailed="@@dp/player/PlaybackFailed",e.PlaybackClosed="@@dp/player/PlaybackClosed",e.UpdateShowCancellationWinback="@@dp/UpdateShowCancellationWinback",e.TriggerUpsellApp="@@dp/TriggerUpsellApp",e.ClearUpsellApp="@@dp/ClearUpsellApp",e.UpdatedBatchTranslationStatus="@@dp/UpdatedBatchTranslationStatus",e.FetchReviewEligibility="@@dp/FetchReviewEligibility",e.ClearReviewEligibility="@@dp/ClearReviewEligibility",e}({});const Jo=(e,t,n,a=((e,t)=>({...t,...e})))=>(i=t,r)=>{switch(r.type){case Zo.STORE_MERGE:return e(r.payload)?a(e(r.payload),i):i;case Zo.CHANGE_PAGE:return e(r.payload)||t;default:return n?n(i,r):i}};var Xo=n("./node_modules/redux/es/redux.js");const Yo=["atf","btf"],el={},tl=e=>Jo((t=>t.action&&t.action[e]),el,(e=>(t=el,n)=>{switch(n.type){case Zo.RefreshAtfActionBox:case Zo.RefreshBtfActionBoxes:case Zo.RefreshEpisode:return n.output&&n.output.action&&n.output.action[e]&&{...t,...n.output.action[e]}||t;default:return t}})(e)),nl=((0,Xo.UY)(Yo.reduce(((e,t)=>(e[t]=tl(t),e)),{})),"headerDetail"),al="btfMoreDetails",il="detail";(0,Xo.UY)({[nl]:Jo((e=>e.detail&&e.detail.headerDetail),{}),[al]:Jo((e=>e.detail&&e.detail.btfMoreDetails),{}),[il]:Jo((e=>e.detail&&e.detail.detail),{})});n("./node_modules/@amzn/av-experiment-token-js-library/index.js");var rl=n("./node_modules/@amzn/dvui/dist/Block.js");let ol=function(e){return e.WP_ERROR="WP_ERROR",e.WP_END="WP_END",e.WP_STREAM_ENDED="WP_STREAM_ENDED",e.WP_CREATE_INELIGIBLE="WP_CREATE_INELIGIBLE",e.WP_JOIN_INELIGIBLE="WP_JOIN_INELIGIBLE",e.WP_GEO_RESTRICTION="WP_GEO_RESTRICTION",e.WP_UNSUPPORTED_BROWSER="WP_UNSUPPORTED_BROWSER",e.WP_UNSUPPORTED_CHAT="WP_UNSUPPORTED_CHAT",e.WP_CREATE_INELIGIBLE_TVOD="WP_CREATE_INELIGIBLE_TVOD",e.WP_JOIN_INELIGIBLE_TVOD="WP_JOIN_INELIGIBLE_TVOD",e.WP_CREATE_INELIGIBLE_SVOD_TVOD="WP_CREATE_INELIGIBLE_SVOD_TVOD",e.WP_JOIN_INELIGIBLE_SVOD_TVOD="WP_JOIN_INELIGIBLE_SVOD_TVOD",e.WP_BANNED_SPECIFIC_CHAT="WP_BANNED_SPECIFIC_CHAT",e.WP_SAFARI_MAC_UNSUPPORTED="WP_SAFARI_MAC_UNSUPPORTED",e}({});const ll=e=>({learnMore:{href:`/watchpartylearn/ref=${e}`}}),sl={learnMore:{href:`/help/watchparty/communityguidelines/ref=${(0,Un.i)("atv_dp_wp_guid")}`}};ol.WP_ERROR,rl.MessageTypes.warning,ol.WP_END,rl.MessageTypes.info,ol.WP_STREAM_ENDED,rl.MessageTypes.info,ol.WP_CREATE_INELIGIBLE,rl.MessageTypes.warning,ll("atv_dp_wp_cr_in_learn"),ol.WP_JOIN_INELIGIBLE,rl.MessageTypes.warning,ll("atv_dp_wp_jn_in_learn"),ol.WP_GEO_RESTRICTION,rl.MessageTypes.warning,ol.WP_UNSUPPORTED_BROWSER,rl.MessageTypes.warning,ll("atv_dp_wp_ub_learn"),ol.WP_UNSUPPORTED_CHAT,rl.MessageTypes.warning,ol.WP_CREATE_INELIGIBLE_TVOD,rl.MessageTypes.warning,ll("atv_dp_wp_cr_in_learn_t"),ol.WP_JOIN_INELIGIBLE_TVOD,rl.MessageTypes.warning,ll("atv_dp_wp_jn_in_learn_t"),ol.WP_CREATE_INELIGIBLE_SVOD_TVOD,rl.MessageTypes.warning,ll("atv_dp_wp_cr_in_learn_st"),ol.WP_JOIN_INELIGIBLE_SVOD_TVOD,rl.MessageTypes.warning,ll("atv_dp_wp_jn_in_learn_st"),ol.WP_BANNED_SPECIFIC_CHAT,rl.MessageTypes.warning,ol.WP_SAFARI_MAC_UNSUPPORTED,rl.MessageTypes.warning,ll("atv_dp_wp_ub_learn");let cl=function(e){return e[e.ALLOW=0]="ALLOW",e[e.DENY_WITH_UPSELL=1]="DENY_WITH_UPSELL",e[e.DENY=2]="DENY",e[e.NOT_APPLICABLE=3]="NOT_APPLICABLE",e}({});cl.ALLOW,cl.DENY_WITH_UPSELL,cl.DENY,cl.NOT_APPLICABLE;new Ct.Oc("DVWebNode:detail");const dl=new r.e,ul=(new Ct.Oc("DVWebNode_live"),({isOpen:e,onClose:t,eventTitle:n,liveState:a,playbackContentList:r,isMShop:o,playerConfigData:l,triggerLocation:s,onPlay:c,logger:d,recordSeasonCheckboxProps:u,customerIntentAction:p})=>{const[g,v]=(0,i.useState)(!0);if(!e||!r)return null;const f=[];return r&&r.map((e=>{d&&e.refMarker&&((e,t,n,a)=>{Fn(t,sn.ATVModal,cn.SSM,a,[gn.PageNavigate],vn.PopUp),n&&e.count(`DVWebNode::Live::Playback::${n}::Shown`,1,!1)})(d,e.refMarker,e.playbackStatus,e.contentConfig.asin);f.push((n=>{t(),p&&u&&dl.SetLiveEventsCustomerIntent({token:p.query.token,id:p.query.id,intent:g?u.onCheckedIntent:u.onUncheckedIntent,scope:u.scope,context:(0,m.getRequestContext)()}),c&&c(e),n.preventDefault(),d&&((e,t,n,a)=>{const i=n||"ATVUnknown";e.count(`DVWebNode::Live::Playback::${i}::Clicked`,1,!1),a&&e.count("DVWebNode::Live::Playback::SSM::Clicked",1,!1),t&&e.count(`DVWebNode::Live::Playback::${t}::Clicked`,1,!1)})(d,e.playbackStatus,s,!0)}))})),e&&r?i.createElement(Jr,{isVisible:e,onRequestClose:t,size:"s",className:h()(vo,yo),titleText:n,header:i.createElement("div",{className:go},a&&i.createElement(Uo,a),n&&i.createElement("h1",null,n)),body:i.createElement(Co.Spacer,{alignItems:Co.spacerAlignItems.center,space:Co.spacerSpacing.m,className:ho},i.createElement(zo,{isMShop:o,playerConfigData:l,playbackContentList:r,triggerLocation:s,triggerPlaybackList:f})),footer:u?i.createElement(Qo,{isChecked:g,text:u.text,onClick:()=>{v(!g)}}):void 0,disableFooter:!u,testID:"stream-selector-modal"}):null});function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ml.apply(this,arguments)}const pl=i.createContext({});pl.displayName="SsmContext";const{Provider:gl}=pl,vl=({children:e})=>{const[t,n]=(0,i.useState)({isOpen:!1});(0,i.useEffect)((()=>{const{refMarkerPrefix:e,logger:n,triggerLocation:a,isOpen:i}=t;e&&n&&((e,t,n,a)=>{const i=n||"Unknown";Fn(`${e}_${i.toLowerCase()}_live_playmod${a?"_back":""}`,sn.ATVModal,cn.SSM,void 0,void 0,vn.PageTouch),t.count(`DVWebNode::Live::SSM::${i}::${a?"Closed":"Opened"}`,1,!1)})(e,n,a,!i)}),[t]);const a=(0,i.useMemo)((()=>({openSsm:e=>n({...e,isOpen:!0}),isSsmOpen:t.isOpen})),[t.isOpen]);return i.createElement(gl,{value:a},e,i.createElement(ul,ml({},t,{onClose:()=>n({...t,isOpen:!1})})))},hl="rY7SY5",fl=({onClick:e})=>i.createElement("button",{onClick:e,tabIndex:-1,"aria-hidden":!0,className:hl,"data-testid":"invisible-play"}),yl=e=>!!e&&("EMBEDDED"!==e&&"NONE"!==e);var bl=n("./node_modules/@amzn/dvui/dist/Fable/components/Button/index.js");const El="Xy+P7G",Cl="KwKmLk";let _l=function(e){return e[e.Circular=0]="Circular",e[e.Square=1]="Square",e[e.Secondary=2]="Secondary",e[e.Invisible=3]="Invisible",e[e.Modal=4]="Modal",e}({});const Tl=({playbackAction:e,playbackGroup:t,streamSelectorProps:n,titleId:a,label:r,className:o,playButtonVariant:l="standard",buttonVariant:s=_l.Circular,secondaryButtonIcon:d,carouselRefTag:u="atv_unknown",labelClassname:m})=>{var p,g;const{actions:{getEnrichments:v},enrichments:f}=i.useContext(_E),y=(0,V.h)()("DV_WEB_FABLE_BUTTON_MIGRATION_651324"),{openSsm:b}=i.useContext(pl),{isInResiliencyMode:E}=i.useContext(N),C=(0,c.L1)(),_="COLLAPSED"===(null==t||null===(p=t.groupMetadata)||void 0===p?void 0:p.behaviour)?null===(g=t.groupTreatments)||void 0===g?void 0:g.displayTreatments.label:r;return i.createElement(dr.Consumer,null,(({onPlay:r,launchType:c})=>{var p;const g="PVVideoPlayerClosed",T=()=>{a&&v([a],!0),window.removeEventListener(g,T)},k=i=>{var o,l;window.addEventListener(g,T);const s=null!==(o=e.titleID)&&void 0!==o?o:e.channelId;if(r&&"COLLAPSED"===(null==t||null===(l=t.groupMetadata)||void 0===l?void 0:l.behaviour)){const{deeplinkUrl:e,fallbackUrl:o}=null==t?void 0:t.groupMetadata;e&&yl(c)?ti()[c]({url:e,fallbackUrl:o}):((e,t)=>{var i,r,o,l;const s={playbackActions:e.playbackActions,defaultResumeTime:0,carouselRefTag:u,triggerLocation:null==n?void 0:n.triggerLocation},c={logger:C.logger,refMarkerPrefix:"atv_hm",triggerLocation:null==n?void 0:n.triggerLocation,eventTitle:null==n?void 0:n.eventTitle,liveState:{text:null==n||null===(i=n.liveInfo)||void 0===i?void 0:i.label,isLive:"LIVE"===(null==n||null===(r=n.liveInfo)||void 0===r?void 0:r.status)},playbackContentList:(d=s,d.playbackActions.map((e=>{var t,n;return{playbackUrl:e.fallbackUrl,fallbackUrl:e.appFallbackUrl,signInUrl:e.signInUrl,contentConfig:{asin:null!==(t=e.titleID)&&void 0!==t?t:e.channelId,videoType:e.videoMaterialType,trailer:!1,position:e.resumeTime||d.defaultResumeTime,ref:e.refMarker,playbackEnvelope:null!==(n=e.playbackExperienceMetadata)&&void 0!==n&&n.playbackEnvelope?{envelope:e.playbackExperienceMetadata.playbackEnvelope,correlationId:e.playbackExperienceMetadata.correlationId,expiration:e.playbackExperienceMetadata.expiryTime}:void 0,playbackExperiences:e.playbackExperiences},triggerLocation:d.triggerLocation,playbackStatus:jo(e.playbackStatus),label:e.label,refMarker:(0,Cn.vA)(d.carouselRefTag,e.videoMaterialType,e.playbackStatus)}}))||[]),onPlay:t,recordSeasonCheckboxProps:a?null===(o=f[a])||void 0===o||null===(o=o.recordSeason)||void 0===o?void 0:o.checkbox:void 0,customerIntentAction:a?null===(l=f[a])||void 0===l||null===(l=l.recordSeason)||void 0===l?void 0:l.customerIntentAction:void 0};var d;b(c)})(t,r),i.preventDefault()}else if(r&&e.fallbackUrl&&s){var d;const t=E?io.gz.LIVE:e.videoMaterialType;r({playbackUrl:e.fallbackUrl,fallbackUrl:e.appFallbackUrl,signInUrl:e.signInUrl,contentConfig:{asin:s,videoType:t,trailer:!1,position:e.resumeTime||0,ref:e.refMarker,playbackEnvelope:null!==(d=e.playbackExperienceMetadata)&&void 0!==d&&d.playbackEnvelope?{envelope:e.playbackExperienceMetadata.playbackEnvelope,correlationId:e.playbackExperienceMetadata.correlationId,expiration:e.playbackExperienceMetadata.expiryTime}:void 0,playbackExperiences:null==e?void 0:e.playbackExperiences},refMarker:(0,Cn.vA)(u,e.videoMaterialType,e.playbackStatus)}),i.preventDefault()}},w=Boolean(e.channelId)&&"EMBEDDED"===c?void 0:e.fallbackUrl;switch(s){case _l.Circular:return y.isOn?i.createElement(Bo.PlayButton,{testID:"play",ariaLabel:null!==(p=e.label)&&void 0!==p?p:"",label:null!=_?_:e.label,className:o,href:w,onClick:k,size:"mini"===l?Bo.PlayButtonSize.mini:void 0}):i.createElement(co,{className:h()(o,{[Cl]:"mini"===l}),labelClassName:h()({[El]:"mini"===l}),href:w,onPlayButtonClick:k,label:null!=_?_:e.label});case _l.Square:return i.createElement(bl.PrimaryLinkButton,{href:w,icon:i.createElement(mo(),null),onClick:k,testID:"play-primary-link",className:o},(0,ao.Wb)(null!=_?_:e.label));case _l.Secondary:return i.createElement(ht,{icon:d,label:null==e?void 0:e.label,labelClassName:h()({[El]:"mini"===l}),smallIconVariant:!0,onSecondaryButtonClick:k,href:w,testID:"play-secondary"});case _l.Invisible:return i.createElement(fl,{onClick:k});case _l.Modal:return i.createElement("button",{className:o,onClick:k,"data-testid":"play-modal"},i.createElement(mo(),null),i.createElement(Oe.Text,{className:m,string:e.label}))}}))};function kl(){return kl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kl.apply(this,arguments)}const wl=({playbackOrTitleArt:e,titleID:t,watchlistAction:n,trailer:a,hideThisAction:r,hideThisCallback:o,dropdownUniqueId:l,dropdownCallback:s,libraryItemActions:c,carouselRefTag:d,recordSeasonTooltipText:u,isModalVariant:m,detailsPageUrl:p,playbackActionModal:g,playbackGroupModal:h})=>{const{actions:{onWatchlistToggle:f},consumingWidgetType:y}=i.useContext(_E),{onPlay:b}=i.useContext(dr),{getString:E}=i.useContext(N),C=(0,V.h)(),_=C("DV_WEB_FABLE_ICON_MIGRATION_651317").isT1?yi:void 0,T=null==c?void 0:c.softDeleteAction,k=null==c?void 0:c.restoreAction,w=null==c?void 0:c.permanentDeleteAction;function L(e){"string"==typeof t&&f(e,t,d)}const I="remove"===(null==n?void 0:n.tag.toLowerCase()),P=[],D=[],S=a&&b,x="Search"!==y&&"string"==typeof t&&r,M=T&&"string"==typeof t,R=k&&"string"==typeof t,A=w&&"string"==typeof t,O=1===[S,x,M,R,A].filter(Boolean).length,W=v(Ei,Ci),B=v(_i,Ti),G={buttonStyle:m?W:v({[Ei]:!O,[yi]:C("DV_WEB_FABLE_ICON_MIGRATION_651317").isT1}),textStyle:m?B:O?ki:_i,isInDropdown:!O,isModalVariant:m};if(S){const e=i.createElement(ji,kl({trailer:a,onPlay:b},G,{isModalVariant:m}));P.push(e),m&&D.push(e)}if(m&&g){const e=i.createElement(Tl,{playbackAction:g,playbackGroup:h,buttonVariant:_l.Modal,className:W,labelClassname:B});D.push(e)}if(m&&n){const e=i.createElement("button",{className:W,onClick:L,"data-testid":I?"watchlist-remove":"watchlist-add"},I?i.createElement(br(),null):i.createElement(Tr(),null),i.createElement(Oe.Text,{className:B,string:E("DV_WEB_WATCHLIST_TOOLTIP")}));D.push(e)}if(x){const e=i.createElement(ft,kl({hideThisAction:r,titleID:t,callback:o},G));P.push(e),m&&D.push(e)}if(M){const e=no(t,T,G.textStyle,G.isInDropdown,G.buttonStyle);P.push(e),m&&D.push(e)}if(R){const e=no(t,k,G.textStyle,G.isInDropdown,G.buttonStyle);P.push(e),m&&D.push(e)}if(A){const e=no(t,w,G.textStyle,G.isInDropdown,G.buttonStyle);P.push(e),m&&D.push(e)}if(m&&p){const e=i.createElement("a",{className:W,href:p,"data-testid":"view-details"},i.createElement(Cr(),null),i.createElement(Oe.Text,{className:B,string:E("DV_WEB_MORE_DETAILS")}));D.push(e)}const H=I?void 0:u;return m?i.createElement("ul",{className:wi},D.map(((e,t)=>i.createElement("li",{key:`modal-element-${t}`},e)))):i.createElement("section",{className:hi},i.createElement("div",null,e),i.createElement("section",{className:fi},n&&i.createElement(ht,{icon:I?i.createElement(br(),{height:rt,width:ot}):i.createElement(Tr(),{height:rt,width:ot}),isInverted:!1,onSecondaryButtonClick:L,isDisabled:!1,label:H||E("DV_WEB_WATCHLIST_TOOLTIP"),className:_,labelClassName:ki,smallIconVariant:!0,testID:I?"watchlist-remove":"watchlist-add"}),O&&1==P.length&&P[0],!O&&P.length>1&&l&&i.createElement(Oi,{className:bi,uniqueId:l,buttonIcon:i.createElement(fr(),{height:rt,width:ot}),label:E("DV_WEB_OVERFLOW_MENU_TOOLTIP"),buttonClassName:_,labelClassName:ki,dropdownElements:P,smallIconVariant:!0,onClick:s})))},Ll="RmtlRt",Il="_1HBcAl",Pl="NgkdA8",Dl="oeG1vb",Sl="dL5AME",xl="Krg12D",Ml="EarBrV",Nl="YLGBUW",Rl="xfAyx4",Al="BWkLNj";var Ol=n("./node_modules/@amzn/dvui/dist/AgeRating.js");const Vl="Kwb7-Y",Wl="WZDhY+",Bl=i.memo((({full:e,half:t=!1,total:n=5,className:a})=>{const r=Math.max(Math.min(e,n),0),o=[];for(let e=0;e<n;e++)o.push(i.createElement("use",{key:e,href:"#full",x:24*e,className:e<r?Wl:Vl}));return r<n&&t&&o.push(i.createElement("use",{key:"half",href:"#half",x:24*r,className:Wl})),i.createElement("svg",{className:a,viewBox:`0 0 ${24*n} 24`,fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("defs",null,i.createElement("symbol",{id:"full"},i.createElement("path",{d:"M1.2809 10.3315L6.02519 15.2548L4.81316 21.6846C4.65559 22.5206 5.54745 23.1589 6.28793 22.7402L11.9952 19.5132L17.8071 22.864C18.5354 23.2839 19.4253 22.6722 19.2942 21.8418L18.2102 14.9747L22.7218 10.2565C23.2775 9.67533 22.9548 8.7093 22.1614 8.57881L15.6881 7.51408L12.8897 1.57378C12.5241 0.797621 11.4149 0.812151 11.0697 1.59762L8.45025 7.55822L1.83786 8.65115C1.04318 8.7825 0.722003 9.75149 1.2809 10.3315Z"})),i.createElement("symbol",{id:"half"},i.createElement("path",{d:"M12 1.0001C11.6245 0.994797 11.2467 1.19602 11.0697 1.60111L8.45025 7.59652L1.83786 8.69583C1.04318 8.82795 0.722003 9.80259 1.2809 10.386L6.02519 15.338L4.81316 21.8054C4.65559 22.6462 5.54745 23.2883 6.28793 22.8672L11.9952 19.6213L12 19.6241V1.0001Z"}))),o)})),Gl="GrFd67",Hl="_5-C52A";var jl=n("./node_modules/@amzn/dvui/dist/StarRating.js");const $l=({customerReviews:e,className:t})=>{const n=(0,jl.sanitiseNumber)(e.value),a=Math.floor(n);return i.createElement("span",{className:v(Gl,Hl,t),"data-testid":"star-rating",role:"img","aria-label":e.customerReviewsText.string},i.createElement(Bl,{full:a,half:n!==a}))},zl={NZ:{g:{stringId:"vcc_maturity_rating_oflc_g",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/g.png"},pg:{stringId:"vcc_maturity_rating_oflc_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/pg.png"},13:{stringId:"vcc_maturity_rating_cvod_13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/13.png"},rp13:{stringId:"vcc_maturity_rating_oflc_rp13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp13.png"},r13:{stringId:"vcc_maturity_rating_oflc_r13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r13.png"},r15:{stringId:"vcc_maturity_rating_oflc_r15",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r15.png"},m:{stringId:"vcc_maturity_rating_oflc_m",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/m.png"},16:{stringId:"vcc_maturity_rating_cvod_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/16.png"},rp16:{stringId:"vcc_maturity_rating_oflc_rp16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp16.png"},r16:{stringId:"vcc_maturity_rating_oflc_r16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r16.png"},18:{stringId:"vcc_maturity_rating_cvod_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/cvod/18.png"},rp18:{stringId:"vcc_maturity_rating_oflc_rp18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/rp18.png"},r18:{stringId:"vcc_maturity_rating_oflc_r18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r18.png"},r:{stringId:"vcc_maturity_rating_oflc_r",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/oflc/r.png"}},BR:{l:{stringId:"vcc_maturity_rating_djctq_l",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/l.png"},10:{stringId:"vcc_maturity_rating_djctq_10",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/10.png"},12:{stringId:"vcc_maturity_rating_djctq_12",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/12.png"},14:{stringId:"vcc_maturity_rating_djctq_14",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/14.png"},16:{stringId:"vcc_maturity_rating_djctq_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/16.png"},18:{stringId:"vcc_maturity_rating_djctq_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/djctq/18.png"},al:{stringId:"vcc_maturity_rating_adjctq_al",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/al.png"},a10:{stringId:"vcc_maturity_rating_adjctq_a10",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a10.png"},a12:{stringId:"vcc_maturity_rating_adjctq_a12",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a12.png"},a14:{stringId:"vcc_maturity_rating_adjctq_a14",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a14.png"},a16:{stringId:"vcc_maturity_rating_adjctq_a16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a16.png"},a18:{stringId:"vcc_maturity_rating_adjctq_a18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/adjctq/a18.png"}},ZA:{a:{stringId:"vcc_maturity_rating_fpb_a",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/a.png"},pg:{stringId:"vcc_maturity_rating_fpb_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/pg.png"},"7-9-pg":{stringId:"vcc_maturity_rating_fpb_7_9_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/7-9-pg.png"},"10-12-pg":{stringId:"vcc_maturity_rating_fpb_10_12_pg",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/10-12-pg.png"},13:{stringId:"vcc_maturity_rating_fpb_13",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/13.png"},16:{stringId:"vcc_maturity_rating_fpb_16",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/16.png"},18:{stringId:"vcc_maturity_rating_fpb_18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/18.png"},x18:{stringId:"vcc_maturity_rating_fpb_x18",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/x18.png"},xx:{stringId:"vcc_maturity_rating_fpb_xx",url:"https://m.media-amazon.com/images/G/01/vcc/maturity-ratings-logos/png/fpb/xx.png"}}},Fl=({locale:e,rating:t,title:n,className:a})=>{var r;const o=(0,m.getRequestContext)();if(!t)return null;const l=null===(r=zl[null==o?void 0:o.recordTerritory])||void 0===r||null===(r=r[t])||void 0===r?void 0:r.url;return l?i.createElement(Ol.AgeRating,{ariaLabel:n,logoUrl:l,className:a}):i.createElement(Ol.AgeRating,{ariaLabel:n,rating:t,locale:e,className:a})},Ul=e=>{const{message:t,className:n}=e;return i.createElement(O.Marker,{className:n,"data-testid":"high-value-msg"},t)},ql="XkwSbj";var Kl=n("./node_modules/@amzn/dvui/dist/TextBlock.js");const Ql=({synopsis:e,className:t})=>i.createElement(Kl.TextBlock,{testID:"synopsis",className:h()(ql,t)},e),Zl=({stationTitle:e,nextBroadcastTitle:t,nextBroadcastStartTime:n,nextUpText:a})=>{const r=n&&new Date(n).toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hourCycle:"h12"}).toLocaleUpperCase();return i.createElement("section",{className:Nl},e&&i.createElement("span",null,e),i.createElement("span",{className:Rl},t&&i.createElement(i.Fragment,null,i.createElement("span",{className:Al},"·"),i.createElement("span",null,a,t)),r&&i.createElement(i.Fragment,null,i.createElement("span",{className:Al},"·"),i.createElement("span",null,r))))};var Jl=n("./node_modules/@amzn/dvui/dist/Fable/components/MaturityRating/index.js");function Xl(){return Xl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xl.apply(this,arguments)}const Yl=({customerReviews:e,releaseYear:t,runtime:n,contentMaturityRating:a,maturityRatingBadge:r,highValueMessage:o,synopsis:l,linearProps:s,dateTime:c,isModalVariant:d})=>{var u,m,p,g;const{stationTitle:v,episodeTitle:f,currentBroadcastStartTime:y,nextBroadcastTitle:b,nextBroadcastStartTime:E,nextUpText:C}=null!=s?s:{},_={stationTitle:v,nextBroadcastTitle:b,nextBroadcastStartTime:E,nextUpText:C},T=y&&new Date(y).toLocaleTimeString([],{hour:"numeric",minute:"2-digit",hour12:!0}).toLocaleUpperCase(),k=(0,V.h)()("DV_WEB_FABLE_BADGE_MIGRATION_708245");return d?i.createElement(i.Fragment,null,i.createElement("section",{className:h()(Ll,Il)},r?k.isT1?i.createElement(Jl.MaturityRating,{rating:r.displayText,locale:null===(u=r.countryCode)||void 0===u?void 0:u.toLowerCase(),logoUrl:r.logoUrl,title:r.description,ariaLabel:r.description,className:Sl}):i.createElement(Ol.AgeRating,{rating:r.displayText,locale:null===(m=r.countryCode)||void 0===m?void 0:m.toLowerCase(),logoUrl:r.logoUrl,title:r.description,ariaLabel:r.description,className:Sl}):a&&i.createElement(Fl,Xl({},a,{className:Sl})))):i.createElement(i.Fragment,null,f&&i.createElement("section",{className:Ll},f),i.createElement("section",{className:Ll},e&&i.createElement($l,{className:h()(Dl,Pl),customerReviews:e}),T&&i.createElement("span",{className:Dl},T),c&&i.createElement("span",{className:Dl,"data-testid":"date-time"},c),t&&i.createElement("span",{className:Dl,"data-testid":"release-year"},t),n&&i.createElement("span",{className:Dl,"data-testid":"runtime"},n),r?k.isT1?i.createElement(Jl.MaturityRating,{rating:r.displayText,locale:null===(p=r.countryCode)||void 0===p?void 0:p.toLowerCase(),logoUrl:r.logoUrl,title:r.description,ariaLabel:r.description}):i.createElement(Ol.AgeRating,{rating:r.displayText,locale:null===(g=r.countryCode)||void 0===g?void 0:g.toLowerCase(),logoUrl:r.logoUrl,title:r.description,ariaLabel:r.description,className:Sl}):a&&i.createElement(Fl,Xl({},a,{className:Sl}))),(null==o?void 0:o.message)&&i.createElement(Ul,{className:xl,message:o.message}),l&&i.createElement(Ql,{className:Ml,synopsis:l}),(v||b||E)&&i.createElement(Zl,_))},es="_4bPlFR";let ts=function(e){return e.Mega="h2",e.Super="h2",e.Header="h3",e.SubHeader="h4",e}({});const ns=e=>{const{title:t,titleLogoOptions:n,headingClassName:a,headingLevel:r,baseValue:o,providerLogoOptions:l,titleID:s}=e,c=`${null!=r?r:ts.Header}`,d=n?i.createElement(Ca,{alt:t,src:n.url,wrapperClassName:n.wrapperClassName,imageClassName:n.imageClassName,baseValue:o||500,autoCrop:!0,shouldLazyLoad:n.shouldLazyLoadImage,debugID:s}):t;return i.createElement(i.Fragment,null,l&&i.createElement(Ca,{alt:l.alt,src:l.url,wrapperClassName:l.wrapperClassName,imageClassName:l.imageClassName,baseValue:500,autoCrop:!0,shouldLazyLoad:l.shouldLazyLoadImage,debugID:s}),i.createElement(c,{className:h()(es,a),"data-testid":"title-art"},e.url?i.createElement("a",{href:e.url,tabIndex:-1,"aria-hidden":!0,onClick:()=>{e.parentElement&&Aa.logManualImpression(e.parentElement,"Select")}},d):d))};function as(){return as=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},as.apply(this,arguments)}const is=({className:e,titleID:t,focusMessage:n,playbackAction:a,playbackGroup:r,streamSelectorProps:o,watchlistAction:l,trailer:s,hideThisAction:d,hideThisCallback:u,providerLogo:m,displayTitle:p,customerReviews:g,releaseYear:v,runtime:f,contentMaturityRating:y,maturityRatingBadge:b,highValueMessage:E,synopsis:C,linearProps:_,callToActionButtonLabel:T,callToActionButtonLink:w,dateTime:L,carouselRefTag:I,libraryItemActions:P,isTouchEnabledWindowsDevice:D,recordSeasonTooltipText:S,showTouchModal:x,dismissTouchModal:M,detailsPageUrl:N})=>{const[R,A]=i.useState(!1),{logger:O}=(0,c.L1)(),[V,W]=i.useState(null);i.useEffect((()=>{const e=D?"TouchEnabled":"NonTouchEnabled";O.count(`DVWeb::StandardMiniDetails::Invocation::${e}`,1,!1),k.c.count("DVWebComponentInteraction",{Component:"StandardMiniDetails",Action:"Invocation",InteractionType:e}),W(document.body)}),[]);const B=a?i.createElement(Tl,{playButtonVariant:"mini",playbackAction:a,playbackGroup:r,streamSelectorProps:o,label:a.label,titleId:t,carouselRefTag:I}):void 0,G=p?i.createElement(ns,{title:p,headingLevel:ts.SubHeader,headingClassName:pi,providerLogoOptions:m?{url:m.url,alt:m.alternateText,wrapperClassName:h()(ui,{[mi]:!B}),shouldLazyLoadImage:!1}:void 0,titleID:t}):void 0,H=null!=B?B:G,j=`actn-drpdn-${t}`,$=i.useCallback((e=>{null==e||e.preventDefault(),null==M||M()}),[]),z={customerReviews:g,releaseYear:v,runtime:f,contentMaturityRating:y,maturityRatingBadge:b,highValueMessage:E,synopsis:C,linearProps:_,dateTime:L},F={isModalVariant:x,detailsPageUrl:N,playbackActionModal:a,playbackGroupModal:r},U={playbackOrTitleArt:H,titleID:t,watchlistAction:l,recordSeasonTooltipText:S,trailer:s,hideThisAction:d,hideThisCallback:u,dropdownUniqueId:j,dropdownCallback:e=>A(e.target.checked),libraryItemActions:P,carouselRefTag:I};return i.createElement(i.Fragment,null,x&&V&&i.createElement(Jr,{testID:"minidetails-modal",onRequestClose:$,className:vi,titleText:p,isVisible:!0,disableFooter:!0,body:i.createElement(i.Fragment,null,i.createElement(Yl,as({},z,{isModalVariant:x})),i.createElement(wl,as({},U,F))),rootElement:V}),!x&&i.createElement("article",{className:h()(li,e),"data-testid":"standard-mini-details"},i.createElement(nt,{className:ci,labelClassName:di,message:null==n?void 0:n.message,icon:null==n?void 0:n.icon}),!a&&T&&w&&i.createElement(Ur.PrimaryButton,{className:gi,href:w,testID:"promotion"},i.createElement(Oe.Text,null,T)),i.createElement(wl,U),B&&G,i.createElement(Yl,z),R&&i.createElement("label",{"data-testid":`${j}-overlay`,className:si,htmlFor:j,"aria-hidden":"true"})))},rs="Z9dd1d",os="_6Ee48g",ls="_9DLJTq",ss="adbzBM",cs="CPzlyj",ds="pmtwKl",us="l3Byg9",ms="yLrUM0",ps="EltWag",gs="KMJBuq",vs="Zwe5a0",hs="yO1YXp",fs="frgzFh",ys="aIGd1S",bs="rNCyT6",Es="XGQ6I8",Cs="_7apyuU",_s="E8zf-P",Ts="SCwdFt",ks="apGNVX",ws="YpimTj",Ls="OLpbif",Is=i.createContext({});Is.displayName="MiniDetailsContext";var Ps=n("./src/util/utils/domUtils.ts"),Ds=n("./src/util/utils/titleType.ts");const Ss=(e,t)=>{const n=Date.now(),a=Math.max(t-e,1),i=n-e;if(i<0)return;return{percentage:Math.min(i/a*100,100),isLive:!0}},xs=(e,t=0)=>{if(!e)return;const n=Date.now(),a=e&&e.schedule.sort(((e,t)=>e.start-t.start))||[],i=a.findIndex((e=>e.start<n&&e.end>n));return i>-1?a[i+t]:void 0},Ms=(e,t)=>{var n,a;return null!==(n=null==e?void 0:e.metadata.seriesTitle)&&void 0!==n?n:null===(a=t.station)||void 0===a?void 0:a.name},Ns=(e,t,n)=>{var a,i,r;return{displayTitle:Ms(t,e),stationTitle:null===(a=e.station)||void 0===a?void 0:a.name,episodeTitle:null==t?void 0:t.metadata.title,currentBroadcastStartTime:null==t?void 0:t.start,nextBroadcastTitle:null!==(i=null==n?void 0:n.metadata.seriesTitle)&&void 0!==i?i:null==n?void 0:n.metadata.title,nextBroadcastStartTime:null==n?void 0:n.start,nextUpText:null==e||null===(r=e.station)||void 0===r?void 0:r.strings.nextUp}},Rs="j5ZgN-",As="r0m8Kk",Os="zhBx7Q",Vs="zWk6SW",Ws="syyFPX",Bs="IcdAu8",Gs="gJwnOo",Hs="_0rmWBt",js="GzqpBB",$s="Yh+jMe",zs="_7pXMwt",Fs="umDKqv";var Us=n("./node_modules/@amzn/dvui/dist/Fable/components/ProgressBar/index.js");const qs=({className:e,broadcast:t,nextBroadcastCallback:n})=>{var a;const r=null===(a=Ss(t.start,t.end))||void 0===a?void 0:a.percentage,[o,l]=i.useState(r);i.useEffect((()=>{const e=setTimeout((()=>{s()}),1e4);return()=>clearTimeout(e)}),[o]),i.useEffect((()=>{s()}),[t]);const s=()=>{var e;const a=null===(e=Ss(t.start,t.end))||void 0===e?void 0:e.percentage;a&&(a>=100?n():l(a))};return o&&o>0?i.createElement(Us.ProgressBar,{className:e,percentage:o,progressColor:"live",testID:"progress-bar"}):null};function Ks(){return Ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ks.apply(this,arguments)}const Qs=({title:e,dateTime:t,progress:n,linearProgress:a,hovered:r=!1,isSuperCarousel:o=!1,playable:l=!1})=>{var s;if(!(e||t||l||n||a))return null;const c=i.createElement(Lo.Icon,{className:h()($s),use:Lo.IconType.PLAY_ARROW}),d=i.createElement("p",{className:h()(Bs)},l&&c,i.createElement("span",{className:t||l?zs:Fs},e)),u=i.createElement("div",{className:h()({[js]:r})},l&&!e&&c,e&&d,t&&i.createElement("p",{className:Gs},t)),m=n||a,p=!m&&r,g=i.createElement("div",{className:h()(Os,{[Hs]:m,[js]:p,[Vs]:o})});return i.createElement(i.Fragment,null,i.createElement("div",{className:h()(Rs,{[As]:m,[Hs]:m}),"data-testid":"card-overlay"},u,n&&!a&&i.createElement(Us.ProgressBar,{progressColor:n.isLive?"live":"vod",percentage:null!==(s=n.percentage)&&void 0!==s?s:0,testID:"progress-bar"}),a&&!n&&i.createElement(qs,Ks({className:Ws},a))),g)};var Zs=n("./src/util/types/wps/storefront.ts"),Js=n("./node_modules/@amzn/dvui/dist/Fable/components/LabelBadge/index.js");const Xs="vUebBe",Ys=({colour:e,label:t,className:n,testID:a})=>{const r=e?ec[e]:Fo.BadgeVariant.default,o=e?tc[e]:"secondary",l=(0,V.h)()("DV_WEB_FABLE_BADGE_MIGRATION_708245");return i.createElement(i.Fragment,null,t&&(l.isT1?i.createElement(Js.LabelBadge,{className:h()(Xs,n),label:t,color:o,ariaLabel:t,testID:null!=a?a:"status-badge"}):i.createElement(Fo.Badge,{className:h()(Xs,n),variant:r,testID:null!=a?a:"status-badge"},t)))},ec={[Zs.T.LINEAR]:Fo.BadgeVariant.linear,[Zs.T.AVAILABILITY]:Fo.BadgeVariant.availability,[Zs.T.LIVE]:Fo.BadgeVariant.live},tc={[Zs.T.LINEAR]:"primary",[Zs.T.AVAILABILITY]:"secondary",[Zs.T.LIVE]:"live"},nc=({liveInfo:e,className:t,testID:n})=>{if(!e)return null;const a="LIVE"===e.status?Zs.T.LIVE:Zs.T.AVAILABILITY;return i.createElement(Ys,{colour:a,label:e.label,className:t,testID:n})};function ac(e){var t;return(null==e||null===(t=e.degradations)||void 0===t?void 0:t.includes(Wo.l4.Playback))||null==e}function ic(e,t){return rc(null==e?void 0:e.playbackActions,t)}function rc(e,t){var n;return ac(t)?null==e?void 0:e[0]:null==t||null===(n=t.playbackActions)||void 0===n?void 0:n[0]}function oc(e){var t;return ac(e)?void 0:{playbackActions:null!==(t=null==e?void 0:e.playbackActions)&&void 0!==t?t:[],groupTreatments:null==e?void 0:e.playbackGroupTreatments,groupMetadata:null==e?void 0:e.playbackGroupMetadata}}let lc=function(e){return e[e.PHONE_PORTRAIT=5]="PHONE_PORTRAIT",e[e.PHONE=10]="PHONE",e[e.TABLET_SMALL=15]="TABLET_SMALL",e[e.TABLET=20]="TABLET",e[e.LAPTOP=30]="LAPTOP",e[e.DESKTOP=40]="DESKTOP",e[e.DESKTOP_HD=50]="DESKTOP_HD",e[e.DESKTOP_UHD=60]="DESKTOP_UHD",e}({});class sc{static is(e){const t=cc();switch(e){case lc.PHONE:return t===lc.PHONE_PORTRAIT||t===lc.PHONE;case lc.TABLET:return t===lc.TABLET_SMALL||t===lc.TABLET;default:return t===e}}static isAtleast(e){return cc()>=e}static isAtmost(e){return cc()<=e}static isSmallerThan(e){return cc()<e}static isLargerThan(e){return cc()>e}}function cc(){const e=b("--dv-current-target-screen");return e?parseInt(e):0}const dc="lzHv2t",uc="UUey8g",mc=({message:e,className:t,onUndo:n,undoText:a})=>i.createElement("section",{className:v(Cs,t),"data-testid":"title-removed-overlay"},i.createElement("div",{className:_s},i.createElement("span",{"data-testid":"title-removed-overlay-message"},e),a&&n&&i.createElement("button",{type:"submit",onClick:n,className:dc,"data-testid":"removed-card-undo-button"},i.createElement(Oe.Text,{string:a,className:uc})))),pc=(e,t,n,a)=>{let i=!1;switch(t){case"IntermissionHero":case"StandardHero":i=a>=2;break;case"Cover":case"Nodes":case"StandardCarousel":case"Charts":case"SuperCarousel":i=a>=5;break;case"Grid":i=a>=15}return(e=>["Storefront","Search","Genre","Browse","Categories"].includes(e))(e)&&(n>=3||i)&&gc(t)},gc=e=>!0,vc="_56AITU",hc="M5+zU-";function fc(e,t){const{isMiniDetailsMobileOn:n}=i.useContext(N),a=i.useRef(),[r,o]=i.useState(!1),[l,s]=i.useState(t),c=i.useCallback((()=>{s(void 0),a.current=window.setTimeout((()=>{s(t),o(!0)}),500)}),[]),d=i.useCallback((()=>{s(t),clearTimeout(a.current)}),[]),u=i.useCallback((()=>{s(t),clearTimeout(a.current)}),[]),m=i.useCallback((e=>{"pointerType"in e.nativeEvent&&"touch"===e.nativeEvent.pointerType&&(e.preventDefault(),e.stopPropagation())}),[]),p=i.useCallback((()=>{s(t),o(!1)}),[]);i.useEffect((()=>()=>{clearTimeout(a.current)}),[]);const g=i.useMemo((()=>({onTouchStart:c,onTouchMove:d,onTouchEnd:u,onContextMenu:m})),[]);return n&&e?{touchMiniDetailsModalListeners:r?{...g,onTouchStart:void 0}:g,isMiniDetailsModalVisible:r,dismissMiniDetailsModal:p,removeContextMenuClass:vc,removeDragAnimationClass:hc,link:l}:{touchMiniDetailsModalListeners:void 0,isMiniDetailsModalVisible:!1,dismissMiniDetailsModal:()=>{},removeContextMenuClass:void 0,removeDragAnimationClass:void 0,link:t}}const yc="tjl5-c",bc="j18dK5",Ec="_1z+0fQ",Cc="ThT3Nm",_c="rwLkMg",Tc="+ZckYi",kc="jggga1";function wc(e){switch(e){case"Bottom_Left":return h()(Cc,Tc);case"Bottom_Right":return h()(Cc,kc);case"Bottom_Center":return h()(Cc,_c);case"Top_Left":return h()(Ec,Tc);case"Top_Right":return h()(Ec,kc);case"Top_Center":return h()(Ec,_c);case"Center_Left":return h()(bc,Tc);case"Center_Right":return h()(bc,kc);default:return h()(bc,_c)}}const Lc=({displayTitle:e,overlayTextPosition:t})=>e&&t?i.createElement("span",{className:h()(yc,wc(t))},i.createElement("span",null,e)):null;var Ic=n("./node_modules/@amzn/dvui/dist/Fable/components/Toast/index.js");function Pc(){return Pc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pc.apply(this,arguments)}const Dc=({hiddenInputs:e={},method:t="POST",children:n,...a})=>i.createElement("form",Pc({},a,{method:t}),n,Object.keys(e).map((t=>i.createElement("input",{key:t,type:"hidden",name:t,value:e[t]})))),Sc="mPtDpI",xc="JVQBsl",Mc="mO+eGr";var Nc=n("./node_modules/@amzn/dvui/dist/IconButton.js");const Rc=({setAnimation:e})=>{const[t,n]=i.useState("");return i.useEffect((()=>n((0,Ma.Z)())),[]),i.useEffect((()=>{if(t){const n=document.getElementById(`addLike${t}`),a=()=>e($c.NoAnimation);return null==n||n.addEventListener("endEvent",a),()=>{null==n||n.removeEventListener("endEvent",a)}}}),[t,e]),i.createElement("svg",{className:Mc,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 60 60","data-testid":"addLike"},i.createElement("defs",null,i.createElement("animate",{id:`addLike${t}`,repeatCount:"1",dur:"1.1s",begin:"0s",xlinkHref:`#addLike_R_G_L_0_G_L_5_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"0",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"0;0;1;0;0",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_5_G${t}`,fill:"freeze",keyTimes:"0;0.2;0.3454545;0.6545455;1",path:"M75.23 87.88 C75.23,87.88 75.23,87.88 75.23,87.88 C75.23,87.88 54.08,40.25 54.08,40.25 C54.08,40.25 47,30.33 47,30.33 C47,30.33 47,30.33 47,30.33 ",keyPoints:"0;0;0.81;1;1",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_5_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"-180",type:"rotate",additive:"sum",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"0;0;-100;-180;-180",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_5_G${t}`,fill:"freeze",attributeName:"transform",from:"2 2",to:"1.2 1.2",type:"scale",additive:"sum",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"2 2;2 2;2 2;1.2 1.2;1.2 1.2",keySplines:"0.333 0 0.667 1;0.333 0 0.667 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_5_G${t}`,fill:"freeze",attributeName:"transform",from:"-36.062 -39.188",to:"-36.062 -39.188",type:"translate",additive:"sum",keyTimes:"0;1",values:"-36.062 -39.188;-36.062 -39.188",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_5_G_M${t}`,fill:"freeze",attributeName:"opacity",from:"1",to:"0",keyTimes:"0;0.9848485;0.9848485;1",values:"1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_4_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"0",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"0;0;1;0;0",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_4_G${t}`,fill:"freeze",keyTimes:"0;0.2;0.3454545;0.6545455;1",path:"M94.13 87.38 C94.13,87.38 94.13,87.38 94.13,87.38 C94.13,87.38 105.58,33 105.58,33 C105.58,33 114.58,21.25 114.58,21.25 C114.58,21.25 114.58,21.25 114.58,21.25 ",keyPoints:"0;0;0.79;1;1",keySplines:"0.4 0 0 1;0.4 0 0 1;0.403 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_4_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"140",type:"rotate",additive:"sum",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"0;0;100;140;140",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_4_G${t}`,fill:"freeze",attributeName:"transform",from:"1.2 1.2",to:"1.2 1.2",type:"scale",additive:"sum",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"1.2 1.2;1.2 1.2;2 2;1.2 1.2;1.2 1.2",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_4_G${t}`,fill:"freeze",attributeName:"transform",from:"-36.062 -39.062",to:"-36.062 -39.062",type:"translate",additive:"sum",keyTimes:"0;1",values:"-36.062 -39.062;-36.062 -39.062",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_4_G_M${t}`,fill:"freeze",attributeName:"opacity",from:"1",to:"0",keyTimes:"0;0.9848485;0.9848485;1",values:"1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_3_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"0",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"0;0;1;0;0",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_3_G${t}`,fill:"freeze",keyTimes:"0;0.2;0.3454545;0.6545455;1",path:"M62.25 86.4 C62.25,86.4 62.25,86.4 62.25,86.4 C62.25,86.4 47.25,59.75 47.25,59.75 C47.25,59.75 38,50.75 38,50.75 C38,50.75 38,50.75 38,50.75 ",keyPoints:"0;0;0.7;1;1",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_3_G${t}`,fill:"freeze",attributeName:"transform",from:"1.2 1.2",to:"1.6 1.6",type:"scale",additive:"sum",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"1.2 1.2;1.2 1.2;1.6 1.6;1.6 1.6;1.6 1.6",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_2_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"0",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"0;0;1;0;0",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_2_G${t}`,fill:"freeze",keyTimes:"0;0.2;0.3454545;0.6545455;1",path:"M84.4 68.5 C84.4,68.5 84.4,68.5 84.4,68.5 C84.4,68.5 71.75,25.25 71.75,25.25 C71.75,25.25 66.25,15.25 66.25,15.25 C66.25,15.25 66.25,15.25 66.25,15.25 ",keyPoints:"0;0;0.8;1;1",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_2_G${t}`,fill:"freeze",attributeName:"transform",from:"1.2 1.2",to:"1.6 1.6",type:"scale",additive:"sum",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"1.2 1.2;1.2 1.2;1.6 1.6;1.6 1.6;1.6 1.6",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_1_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"0",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"0;0;1;0;0",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",keyTimes:"0;0.2;0.3454545;0.6545455;1",path:"M102.25 88 C102.25,88 102.25,88 102.25,88 C102.25,88 106.5,56 106.5,56 C106.5,56 114.25,44.5 114.25,44.5 C114.25,44.5 114.25,44.5 114.25,44.5 ",keyPoints:"0;0;0.7;1;1",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.6 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"1.2 1.2",to:"2 2",type:"scale",additive:"sum",keyTimes:"0;0.2;0.3454545;0.6545455;1",values:"1.2 1.2;1.2 1.2;2 2;2 2;2 2",keySplines:"0.4 0 0 1;0.4 0 0 1;0.2 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_2_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"1",to:"0",keyTimes:"0;0.1545455;1",values:"1;0;0",keySplines:"0 0 0.183 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_2_G${t}`,fill:"freeze",keyTimes:"0;0.1545455;1",path:"M84 84 C84,84 84,88 84,88 C84,88 84,88 84,88 ",keyPoints:"0;1;1",keySplines:"0 0 0.192 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_2_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"5",type:"rotate",additive:"sum",keyTimes:"0;0.1545455;1",values:"0;5;5",keySplines:"0 0 0.192 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_2_G${t}`,fill:"freeze",attributeName:"transform",from:"2 2",to:"2 2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 2;2 2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_2_G${t}`,fill:"freeze",attributeName:"transform",from:"-42 -42",to:"-42 -42",type:"translate",additive:"sum",keyTimes:"0;1",values:"-42 -42;-42 -42",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_2_G_M${t}`,fill:"freeze",attributeName:"opacity",from:"1",to:"0",keyTimes:"0;0.9848485;0.9848485;1",values:"1;1;0;0",keySplines:"0 0 0 0;0 0 0 0;0 0 0 0",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_1_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"1",keyTimes:"0;0.1545455;0.3454545;0.3636364;0.9818182;1",values:"0;1;1;1;1;1",keySplines:"0 0 0.192 1;0.009 0 0.282 1;0 0 0 1;1 0 0.297 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_1_G${t}`,fill:"freeze",keyTimes:"0;0.1545455;0.3454545;0.3636364;0.9818182;1",path:"M82 84 C82,84 82,88 82,88 C82,88 81.03,73.17 81.03,73.17 C81.03,73.17 81.03,73.17 81.03,73.17 C81.03,73.17 82,84 82,84 C82,84 82,84 82,84 ",keyPoints:"0;0.13;0.63;0.63;1;1",keySplines:"0 0 0.192 1;0.806 0 0.194 1;0 0 1 1;1 0 0.293 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.1545455;0.3454545;0.3636364;0.9818182;1",values:"0;5;-5;-5;0;0",keySplines:"0 0 0.192 1;0.806 0 0.2 1;0.333 0 0.667 1;1 0 0.299 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"2 2",to:"2 2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 2;2 2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"0.125 5.438",to:"0.125 5.438",type:"translate",additive:"sum",keyTimes:"0;1",values:"0.125 5.438;0.125 5.438",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_0_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"1",keyTimes:"0;0.1545455;0.3454545;0.3636364;0.9818182;1",values:"0;1;1;1;1;1",keySplines:"0 0 0.2 1;0.333 0 0.667 1;0.333 0 0.667 1;0.333 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_0_G_D_0_P_0${t}`,fill:"freeze",attributeName:"d",attributeType:"XML",from:"M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ",to:"M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ",keyTimes:"0;0.1545455;0.3454545;0.3636364;0.9818182;1",values:"M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ;M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.9,-0.25 -5.9,-0.25 C-5.9,-0.25 1.4,-2.85 1.4,-2.85 C1.4,-2.85 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ;M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.8,-2.84 -5.8,-2.84 C-5.8,-2.84 0.07,-0.56 0.07,-0.56 C0.07,-0.56 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ;M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.8,-2.84 -5.8,-2.84 C-5.8,-2.84 0.07,-0.56 0.07,-0.56 C0.07,-0.56 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ;M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ;M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ",keySplines:"0 0 0.192 1;0.806 0 0.194 1;0.333 0 0.667 1;1 0 0.297 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_0_G${t}`,fill:"freeze",keyTimes:"0;0.1545455;0.3454545;0.3636364;0.9818182;1",path:"M84 79.13 C84,79.13 82.95,86.5 82.95,86.5 C82.95,86.5 84.37,68.13 84.37,68.13 C84.37,68.13 84.37,68.13 84.37,68.13 C84.37,68.13 84,79.88 84,79.88 C84,79.88 84,79.88 84,79.88 ",keyPoints:"0;0.2;0.69;0.69;1;1",keySplines:"0 0 0.192 1;0.806 0 0.194 1;0.333 0.333 0.667 0.667;1 0 0.293 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.1545455;0.3454545;0.3636364;0.9818182;1",values:"0;20;-24;-24;0;0",keySplines:"0 0 0.192 1;0.806 0 0.194 1;0.333 0 0.667 1;1 0 0.293 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"1.1s",begin:`addLike${t}.begin`,xlinkHref:`#addLike_R_G_L_0_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"2 2",to:"2 2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 2;2 2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{attributeType:"XML",attributeName:"opacity",dur:"1s",from:"0",to:"1",xlinkHref:`#time_group${t}`})),i.createElement("g",{id:`addLike_R_G${t}`},i.createElement("g",{id:"addLike_R_G_L_0_G{suffix}",transform:" translate(30, 30) scale(0.4, 0.4) translate(-81.436, -84)"},i.createElement("g",{id:`addLike_R_G_L_0_G_L_5_G_M${t}`},i.createElement("g",{id:`addLike_R_G_L_0_G_L_5_G${t}`,opacity:"0.9986400000000001"},i.createElement("path",{id:`addLike_R_G_L_0_G_L_5_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M33.98 35.54 C33.98,35.54 36.38,37.52 36.38,37.52 C36.38,37.52 39.45,37 39.45,37 C39.45,37 37.46,39.39 37.46,39.39 C37.46,39.39 37.98,42.46 37.98,42.46 C37.98,42.46 35.59,40.48 35.59,40.48 C35.59,40.48 32.52,41 32.52,41 C32.52,41 34.51,38.6 34.51,38.6 C34.51,38.6 33.98,35.54 33.98,35.54z "}))),i.createElement("g",{id:`addLike_R_G_L_0_G_L_4_G_M${t}`},i.createElement("g",{id:`addLike_R_G_L_0_G_L_4_G${t}`},i.createElement("path",{id:`addLike_R_G_L_0_G_L_4_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M33.98 35.54 C33.98,35.54 36.38,37.52 36.38,37.52 C36.38,37.52 39.45,37 39.45,37 C39.45,37 37.46,39.39 37.46,39.39 C37.46,39.39 37.98,42.46 37.98,42.46 C37.98,42.46 35.59,40.48 35.59,40.48 C35.59,40.48 32.52,41 32.52,41 C32.52,41 34.51,38.6 34.51,38.6 C34.51,38.6 33.98,35.54 33.98,35.54z "}))),i.createElement("g",{id:`addLike_R_G_L_0_G_L_3_G${t}`},i.createElement("path",{id:`addLike_R_G_L_0_G_L_3_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M0 -2 C1.1,-2 2,-1.1 2,0 C2,1.1 1.1,2 0,2 C-1.1,2 -2,1.1 -2,0 C-2,-1.1 -1.1,-2 0,-2z "})),i.createElement("g",{id:`addLike_R_G_L_0_G_L_2_G${t}`},i.createElement("path",{id:`addLike_R_G_L_0_G_L_2_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M0 -2 C1.1,-2 2,-1.1 2,0 C2,1.1 1.1,2 0,2 C-1.1,2 -2,1.1 -2,0 C-2,-1.1 -1.1,-2 0,-2z "})),i.createElement("g",{id:`addLike_R_G_L_0_G_L_1_G${t}`},i.createElement("path",{id:`addLike_R_G_L_0_G_L_1_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M0 -2 C1.1,-2 2,-1.1 2,0 C2,1.1 1.1,2 0,2 C-1.1,2 -2,1.1 -2,0 C-2,-1.1 -1.1,-2 0,-2z "})),i.createElement("g",{id:`addLike_R_G_L_0_G_L_0_G${t}`,transform:" translate(84, 84) scale(1.2, 1.2) translate(-84, -84)"},i.createElement("g",{id:`addLike_R_G_L_0_G_L_0_G_L_2_G_M${t}`},i.createElement("g",{id:`addLike_R_G_L_0_G_L_0_G_L_2_G${t}`},i.createElement("path",{id:`addLike_R_G_L_0_G_L_0_G_L_2_G_D_0_P_0${t}`,"fill-opacity":"1","fill-rule":"nonzero",d:" M25.98 45.62 C25.98,45.62 25.98,52.44 25.98,52.44 C25.98,53.63 26.45,54.78 27.3,55.62 C28.14,56.47 29.29,56.94 30.48,56.94 C30.48,56.94 49.57,56.94 49.57,56.94 C50.63,56.94 51.65,56.57 52.45,55.9 C53.26,55.22 53.81,54.29 54,53.25 C54,53.25 55.9,42.75 55.9,42.75 C56.02,42.1 56,41.44 55.83,40.8 C55.66,40.16 55.35,39.57 54.93,39.06 C54.51,38.55 53.98,38.15 53.38,37.87 C52.79,37.59 52.14,37.44 51.48,37.44 C51.48,37.44 44.64,37.44 44.64,37.44 C44.64,37.44 45.48,35.3 45.48,35.3 C45.83,34.36 45.95,33.35 45.82,32.35 C45.69,31.36 45.33,30.41 44.75,29.59 C44.18,28.77 43.41,28.1 42.52,27.64 C41.63,27.17 40.65,26.94 39.64,26.94 C39.35,26.94 39.07,27.03 38.83,27.18 C38.59,27.34 38.4,27.56 38.28,27.83 C38.28,27.83 34,37.44 34,37.44 C34,37.44 30.48,37.44 30.48,37.44 C29.29,37.44 28.14,37.91 27.3,38.76 C26.45,39.6 25.98,40.75 25.98,41.94 C25.98,41.94 25.98,46.71 25.98,46.71 C25.98,46.71 28.98,45.84 28.98,45.84 C28.98,45.84 28.98,41.94 28.98,41.94 C28.98,41.54 29.14,41.16 29.42,40.88 C29.7,40.6 30.08,40.44 30.48,40.44 C30.48,40.44 33.48,40.44 33.48,40.44 C33.48,40.44 33.26,55.3 33.26,55.3 C33.26,55.3 36.04,54.32 36.04,54.32 C36.04,54.32 36.48,39.26 36.48,39.26 C36.48,39.26 40.56,30.08 40.56,30.08 C40.98,30.2 41.37,30.41 41.7,30.69 C42.04,30.97 42.31,31.32 42.51,31.71 C42.7,32.1 42.81,32.53 42.83,32.96 C42.86,33.4 42.79,33.84 42.63,34.25 C42.63,34.25 41.83,36.39 41.83,36.39 C41.67,36.84 41.61,37.33 41.67,37.81 C41.73,38.29 41.9,38.75 42.18,39.15 C42.45,39.55 42.82,39.87 43.25,40.1 C43.68,40.32 44.16,40.44 44.64,40.44 C44.64,40.44 51.48,40.44 51.48,40.44 C51.7,40.44 51.92,40.49 52.12,40.58 C52.32,40.67 52.49,40.81 52.63,40.98 C52.78,41.15 52.88,41.34 52.94,41.56 C53,41.77 53.02,41.99 52.98,42.21 C52.98,42.21 51.07,52.71 51.07,52.71 C51.01,53.06 50.82,53.38 50.55,53.6 C50.27,53.83 49.93,53.95 49.57,53.94 C49.57,53.94 36.48,53.94 36.48,53.94 C36.48,53.94 33.48,53.94 33.48,53.94 C33.48,53.94 30.48,53.94 30.48,53.94 C30.08,53.94 29.7,53.78 29.42,53.5 C29.14,53.22 28.98,52.84 28.98,52.44 C28.98,52.44 28.98,45.04 28.98,45.04 C28.98,45.04 25.98,45.62 25.98,45.62z "}))),i.createElement("g",{id:`addLike_R_G_L_0_G_L_0_G_L_1_G${t}`},i.createElement("path",{id:`addLike_R_G_L_0_G_L_0_G_L_1_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M-14.16 -4.95 C-14.16,-7.05 -12.46,-8.75 -10.36,-8.75 C-10.36,-8.75 -8.66,-8.75 -8.66,-8.75 C-7.84,-8.75 -7.16,-8.08 -7.16,-7.25 C-7.16,-7.25 -7.16,7.25 -7.16,7.25 C-7.16,8.08 -7.84,8.75 -8.66,8.75 C-8.66,8.75 -10.36,8.75 -10.36,8.75 C-12.46,8.75 -14.16,7.05 -14.16,4.95 C-14.16,4.95 -14.16,-4.95 -14.16,-4.95z  M10.36 -8.75 C10.36,-8.75 1.86,-8.75 1.86,-8.75 C1.86,-8.75 -5.14,-8.75 -5.14,-8.75 C-5.14,-8.75 -5.14,7.75 -5.14,7.75 C-5.14,8.3 -4.7,8.75 -4.15,8.75 C-4.15,8.75 8.36,8.75 8.36,8.75 C10.36,8.75 11.69,6.92 11.86,6.25 C11.98,5.75 13.86,-4.25 13.86,-4.25 C13.86,-4.25 13.91,-4.78 13.91,-4.78 C14.15,-6.9 12.49,-8.75 10.36,-8.75z "})),i.createElement("g",{id:`addLike_R_G_L_0_G_L_0_G_L_0_G${t}`},i.createElement("path",{id:`addLike_R_G_L_0_G_L_0_G_L_0_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z "}))))),i.createElement("g",{id:`time_group${t}`}))},Ac=({setAnimation:e})=>{const[t,n]=i.useState("");return i.useEffect((()=>n((0,Ma.Z)())),[]),i.useEffect((()=>{if(t){const n=document.getElementById(`removeLike${t}`),a=()=>e($c.NoAnimation);return null==n||n.addEventListener("endEvent",a),()=>{null==n||n.removeEventListener("endEvent",a)}}}),[t,e]),i.createElement("svg",{className:Mc,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 60 60","data-testid":"removeLike"},i.createElement("defs",null,i.createElement("animate",{id:`removeLike${t}`,repeatCount:"1",dur:"0.5s",begin:"0s",xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_1_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"1",keyTimes:"0;0.32;0.48;1",values:"0;0;1;1",keySplines:"0 0 0.667 1;0.012 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_1_G${t}`,fill:"freeze",keyTimes:"0;0.16;0.32;0.48;0.72;1",path:"M84 84 C84,84 78,84 78,84 C78,84 90,84 90,84 C90,84 78,84 78,84 C78,84 84,84 84,84 C84,84 84,84 84,84 ",keyPoints:"0;0.17;0.5;0.83;1;1",keySplines:"0 0 0.667 1;0 0 0.667 1;0 0 0.667 1;0 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.16;0.32;0.48;0.72;1",values:"0;-5;5;-5;0;0",keySplines:"0 0 0.667 1;0.167 0 0.667 1;0.167 0 0.667 1;0.167 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"2 2",to:"2 2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 2;2 2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"-42 -42",to:"-42 -42",type:"translate",additive:"sum",keyTimes:"0;1",values:"-42 -42;-42 -42",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_0_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"1",to:"0",keyTimes:"0;0.32;0.48;1",values:"1;1;0;0",keySplines:"0 0 0.667 1;0.012 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_0_G${t}`,fill:"freeze",keyTimes:"0;0.16;0.32;0.48;0.72;1",path:"M82 84 C82,84 78,84 78,84 C78,84 90,84 90,84 C90,84 78,84 78,84 C78,84 82,84 82,84 C82,84 82,84 82,84 ",keyPoints:"0;0.13;0.5;0.88;1;1",keySplines:"0 0 0.667 1;0 0 0.667 1;0 0 0.667 1;0 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.16;0.32;0.48;0.72;1",values:"0;-5;5;-5;0;0",keySplines:"0 0 0.667 1;0.167 0 0.667 1;0.167 0 0.667 1;0.167 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"2 2",to:"2 2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 2;2 2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeLike${t}.begin`,xlinkHref:`#removeLike_R_G_L_0_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"0.125 5.438",to:"0.125 5.438",type:"translate",additive:"sum",keyTimes:"0;1",values:"0.125 5.438;0.125 5.438",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{attributeType:"XML",attributeName:"opacity",dur:"1s",from:"0",to:"1",xlinkHref:`#time_group${t}`})),i.createElement("g",{id:`removeLike_R_G${t}`},i.createElement("g",{id:`removeLike_R_G_L_0_G${t}`,transform:" translate(30, 30) scale(0.42, 0.42) translate(-84, -84)"},i.createElement("g",{id:`removeLike_R_G_L_0_G_L_0_G${t}`,transform:" translate(87, 84) scale(1.17, 1.17) translate(-84, -84)"},i.createElement("g",{id:`removeLike_R_G_L_0_G_L_0_G_L_1_G${t}`},i.createElement("path",{id:`removeLike_R_G_L_0_G_L_0_G_L_1_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M25.98 45.62 C25.98,45.62 25.98,52.44 25.98,52.44 C25.98,53.63 26.45,54.78 27.3,55.62 C28.14,56.47 29.29,56.94 30.48,56.94 C30.48,56.94 49.57,56.94 49.57,56.94 C50.63,56.94 51.65,56.57 52.45,55.9 C53.26,55.22 53.81,54.29 54,53.25 C54,53.25 55.9,42.75 55.9,42.75 C56.02,42.1 56,41.44 55.83,40.8 C55.66,40.16 55.35,39.57 54.93,39.06 C54.51,38.55 53.98,38.15 53.38,37.87 C52.79,37.59 52.14,37.44 51.48,37.44 C51.48,37.44 44.64,37.44 44.64,37.44 C44.64,37.44 45.48,35.3 45.48,35.3 C45.83,34.36 45.95,33.35 45.82,32.35 C45.69,31.36 45.33,30.41 44.75,29.59 C44.18,28.77 43.41,28.1 42.52,27.64 C41.63,27.17 40.65,26.94 39.64,26.94 C39.35,26.94 39.07,27.03 38.83,27.18 C38.59,27.34 38.4,27.56 38.28,27.83 C38.28,27.83 34,37.44 34,37.44 C34,37.44 30.48,37.44 30.48,37.44 C29.29,37.44 28.14,37.91 27.3,38.76 C26.45,39.6 25.98,40.75 25.98,41.94 C25.98,41.94 25.98,46.71 25.98,46.71 C25.98,46.71 28.98,45.84 28.98,45.84 C28.98,45.84 28.98,41.94 28.98,41.94 C28.98,41.54 29.14,41.16 29.42,40.88 C29.7,40.6 30.08,40.44 30.48,40.44 C30.48,40.44 33.48,40.44 33.48,40.44 C33.48,40.44 33.51,55.29 33.51,55.29 C33.51,55.29 36.48,54.32 36.48,54.32 C36.48,54.32 36.48,39.26 36.48,39.26 C36.48,39.26 40.56,30.08 40.56,30.08 C40.98,30.2 41.37,30.41 41.7,30.69 C42.04,30.97 42.31,31.32 42.51,31.71 C42.7,32.1 42.81,32.53 42.83,32.96 C42.86,33.4 42.79,33.84 42.63,34.25 C42.63,34.25 41.83,36.39 41.83,36.39 C41.67,36.84 41.61,37.33 41.67,37.81 C41.73,38.29 41.9,38.75 42.18,39.15 C42.45,39.55 42.82,39.87 43.25,40.1 C43.68,40.32 44.16,40.44 44.64,40.44 C44.64,40.44 51.48,40.44 51.48,40.44 C51.7,40.44 51.92,40.49 52.12,40.58 C52.32,40.67 52.49,40.81 52.63,40.98 C52.78,41.15 52.88,41.34 52.94,41.56 C53,41.77 53.02,41.99 52.98,42.21 C52.98,42.21 51.07,52.71 51.07,52.71 C51.01,53.06 50.82,53.38 50.55,53.6 C50.27,53.83 49.93,53.95 49.57,53.94 C49.57,53.94 36.48,53.94 36.48,53.94 C36.48,53.94 34.29,53.94 34.29,53.94 C34.29,53.94 30.48,53.94 30.48,53.94 C30.08,53.94 29.7,53.78 29.42,53.5 C29.14,53.22 28.98,52.84 28.98,52.44 C28.98,52.44 28.98,45.04 28.98,45.04 C28.98,45.04 25.98,45.62 25.98,45.62z "})),i.createElement("g",{id:`removeLike_R_G_L_0_G_L_0_G_L_0_G${t}`},i.createElement("path",{id:`removeLike_R_G_L_0_G_L_0_G_L_0_G_D_0_P_0${t}`,"fill-opacity":"1","fill-rule":"nonzero",d:" M-1.91 -18.77 C-1.91,-18.77 -4.9,-11.95 -4.9,-11.95 C-5.06,-11.57 -5.15,-11.16 -5.15,-10.74 C-5.15,-10.74 -5.15,-7.14 -5.15,-7.14 C-5.15,-7.14 1.26,-7.79 1.26,-7.79 C1.26,-7.79 2.55,-10.57 2.55,-10.57 C3.41,-12.41 4.11,-14.56 3.13,-16.35 C2.13,-18.18 0.28,-19.07 -1,-19.31 C-1.39,-19.38 -1.75,-19.14 -1.91,-18.77z  M-14.16 -4.95 C-14.16,-7.05 -12.46,-8.75 -10.36,-8.75 C-10.36,-8.75 -8.66,-8.75 -8.66,-8.75 C-7.84,-8.75 -7.16,-8.08 -7.16,-7.25 C-7.16,-7.25 -7.16,7.25 -7.16,7.25 C-7.16,8.08 -7.84,8.75 -8.66,8.75 C-8.66,8.75 -10.36,8.75 -10.36,8.75 C-12.46,8.75 -14.16,7.05 -14.16,4.95 C-14.16,4.95 -14.16,-4.95 -14.16,-4.95z  M10.36 -8.75 C10.36,-8.75 1.86,-8.75 1.86,-8.75 C1.86,-8.75 -5.14,-8.75 -5.14,-8.75 C-5.14,-8.75 -5.14,7.75 -5.14,7.75 C-5.14,8.3 -4.7,8.75 -4.15,8.75 C-4.15,8.75 8.36,8.75 8.36,8.75 C10.36,8.75 11.69,6.92 11.86,6.25 C11.98,5.75 13.86,-4.25 13.86,-4.25 C13.86,-4.25 13.91,-4.78 13.91,-4.78 C14.15,-6.9 12.49,-8.75 10.36,-8.75z "}))))),i.createElement("g",{id:`time_group${t}`}))},Oc=()=>i.createElement("svg",{className:Mc,viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"thumbUpFilled"},i.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.76 26.5183C17.8109 26.5183 16.2308 28.0984 16.2308 30.0476V40.1466C16.2308 42.0957 17.8109 43.6758 19.76 43.6758H21.4762C22.3696 43.6758 23.0938 42.9516 23.0938 42.0583V28.1359C23.0938 27.2426 22.3696 26.5183 21.4762 26.5183H19.76ZM31.9224 26.5183H40.256C42.3481 26.5183 43.9757 28.3368 43.7447 30.4161L43.6875 30.9303C43.6875 30.9303 41.8492 40.7345 41.7267 41.2248C41.5633 41.8784 40.256 43.6758 38.2952 43.6758H26.5297C25.7175 43.6758 25.0594 43.0175 25.0594 42.2053V24.9901C25.0594 24.3815 25.1854 23.7794 25.4293 23.2218L28.1054 17.105C28.3396 16.5697 28.8739 16.2132 29.4405 16.3557C30.3674 16.5887 31.5054 17.1425 32.3976 18.1082C34.3522 20.2241 33.2788 23.4665 32.1089 26.0988L31.9224 26.5183Z"})),Vc=()=>i.createElement("svg",{className:Mc,viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"thumbUpOutlined"},i.createElement("path",{d:"M43.7186 27.1678C43.3041 26.6702 42.7855 26.2696 42.1992 25.9943C41.613 25.719 40.9735 25.5758 40.3258 25.5747H33.5993L34.4253 23.4652C34.7689 22.5416 34.8834 21.5484 34.7588 20.5709C34.6342 19.5934 34.2744 18.6606 33.7102 17.8527C33.1459 17.0448 32.3941 16.3858 31.5192 15.9322C30.6444 15.4787 29.6725 15.2442 28.6871 15.2488C28.4033 15.2493 28.1258 15.3318 27.8877 15.4861C27.6496 15.6405 27.461 15.8603 27.3447 16.1191L23.1406 25.5747H19.674C18.5004 25.5747 17.3747 26.0409 16.5448 26.8708C15.7149 27.7007 15.2487 28.8263 15.2487 30V40.3259C15.2487 41.4996 15.7149 42.6252 16.5448 43.4551C17.3747 44.2851 18.5004 44.7513 19.674 44.7513H38.4524C39.4877 44.751 40.4901 44.3877 41.2851 43.7247C42.0802 43.0616 42.6177 42.1408 42.8041 41.1225L44.6775 30.7966C44.7933 30.1584 44.7675 29.5026 44.6018 28.8755C44.4361 28.2484 44.1346 27.6654 43.7186 27.1678ZM22.6243 41.8011H19.674C19.2828 41.8011 18.9076 41.6456 18.631 41.369C18.3543 41.0924 18.1989 40.7172 18.1989 40.3259V30C18.1989 29.6088 18.3543 29.2336 18.631 28.957C18.9076 28.6803 19.2828 28.5249 19.674 28.5249H22.6243V41.8011ZM41.801 30.2656L39.9276 40.5915C39.8647 40.9351 39.682 41.2453 39.4118 41.4668C39.1417 41.6883 38.8017 41.8068 38.4524 41.8011H25.5746V27.3596L29.5869 18.3318C29.9999 18.4522 30.3835 18.6569 30.7134 18.933C31.0433 19.2091 31.3124 19.5506 31.5037 19.936C31.695 20.3213 31.8043 20.7421 31.8248 21.1718C31.8452 21.6016 31.7764 22.0309 31.6226 22.4326L30.8408 24.5421C30.6742 24.9879 30.6179 25.4675 30.6768 25.9398C30.7357 26.4121 30.9081 26.8631 31.1791 27.2544C31.4501 27.6457 31.8117 27.9656 32.2331 28.1869C32.6546 28.4081 33.1233 28.5241 33.5993 28.5249H40.3258C40.5426 28.5246 40.7567 28.572 40.953 28.6637C41.1493 28.7555 41.323 28.8894 41.4617 29.056C41.6038 29.2202 41.7079 29.4137 41.7665 29.6228C41.8252 29.8319 41.8369 30.0514 41.801 30.2656Z"})),Wc=({setAnimation:e})=>{const[t,n]=i.useState("");return i.useEffect((()=>n((0,Ma.Z)())),[]),i.useEffect((()=>{if(t){const n=document.getElementById(`addDislike${t}`),a=()=>e($c.NoAnimation);return null==n||n.addEventListener("endEvent",a),()=>{null==n||n.removeEventListener("endEvent",a)}}}),[t,e]),i.createElement("svg",{className:Mc,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 60 60","data-testid":"addDislike"},i.createElement("defs",null,i.createElement("animate",{id:`addDislike${t}`,repeatCount:"1",dur:"0.6s",begin:"0s",xlinkHref:`#addDislike_R_G_L_0_G_L_2_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"1",to:"0",keyTimes:"0;0.2833333;0.45;1",values:"1;1;0;0",keySplines:"0 0 0.541 1;0.441 0.166 0.838 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_2_G${t}`,fill:"freeze",keyTimes:"0;0.2833333;0.4166667;1",path:"M86.05 86.5 C86.05,86.5 83.5,82.25 83.5,82.25 C83.5,82.25 84,86.5 84,86.5 C84,86.5 86.05,84.5 86.05,84.5 ",keyPoints:"0;0.41;0.76;1",keySplines:"0 0 0.667 1;0 0 0.667 1;0 0 0.667 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_2_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.2833333;0.4166667;1",values:"0;-6;0;0",keySplines:"0 0 0.833 1;0.167 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_2_G${t}`,fill:"freeze",attributeName:"transform",from:"2 -2",to:"2 -2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 -2;2 -2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_2_G${t}`,fill:"freeze",attributeName:"transform",from:"-42 -42",to:"-42 -42",type:"translate",additive:"sum",keyTimes:"0;1",values:"-42 -42;-42 -42",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_1_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"1",keyTimes:"0;0.2833333;0.45;0.5;1",values:"0;0;1;1;1",keySplines:"0.336 0 0.661 0;0.324 0.159 0.654 0.874;0.28 1 0.596 0.282;0.309 1 0.641 1",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",keyTimes:"0;0.2833333;0.5;1",path:"M84.05 86.5 C84.05,86.5 81,82.25 81,82.25 C81,82.25 82,90.75 82,90.75 C82,90.75 83.8,87.25 83.8,87.25 ",keyPoints:"0;0.3;0.78;1",keySplines:"0.403 0 0.72 1;0.407 0 0.55 0.935;0.275 0.201 0.6 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.2833333;0.5;1",values:"0;-6;6;0",keySplines:"0.318 0 0.617 1;0.302 0 0.572 0.923;0.297 0 0.626 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"2 -2",to:"2 -2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 -2;2 -2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"0.125 5.438",to:"0.125 5.438",type:"translate",additive:"sum",keyTimes:"0;1",values:"0.125 5.438;0.125 5.438",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_0_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"1",keyTimes:"0;0.2833333;0.45;0.5;1",values:"0;0;1;1;1",keySplines:"0.251 0 0.599 0;0.316 0.141 0.652 0.893;0.32 1 0.679 0.136;0.361 1 0.701 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_0_G_D_0_P_0${t}`,fill:"freeze",attributeName:"d",attributeType:"XML",from:"M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ",to:"M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ",keyTimes:"0;0.5;1",values:"M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ;M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ;M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z ",keySplines:"0.167 0 0.833 0.833;0.167 0.167 0.297 1",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_0_G${t}`,fill:"freeze",keyTimes:"0;0.2833333;0.5;1",path:"M86.05 91.63 C86.05,91.63 83.5,87.44 83.5,87.44 C83.5,87.44 84,95.85 84,95.85 C84,95.85 85.8,92.38 85.8,92.38 ",keyPoints:"0;0.28;0.77;1",keySplines:"0.403 0 0.72 1;0.407 0 0.55 0.935;0.275 0.197 0.6 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.2833333;0.4;0.5;1",values:"0;-6;0.515;16;0",keySplines:"0.32 0 0.617 1;0.329 0 0.638 0.048;0.294 0.279 0.618 0.975;0.296 0 0.626 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.6s",begin:`addDislike${t}.begin`,xlinkHref:`#addDislike_R_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"2 -2",to:"2 -2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 -2;2 -2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{attributeType:"XML",attributeName:"opacity",dur:"1s",from:"0",to:"1",xlinkHref:`#time_group${t}`})),i.createElement("g",{id:`addDislike_R_G${t}`},i.createElement("g",{id:`addDislike_R_G_L_0_G${t}`,transform:" translate(30, 30) scale(0.5, 0.5) translate(-84, -84)"},i.createElement("g",{id:`addDislike_R_G_L_0_G_L_2_G${t}`},i.createElement("path",{id:`addDislike_R_G_L_0_G_L_2_G_D_0_P_0${t}`,"fill-opacity":"1","fill-rule":"nonzero",d:" M25.98 45.62 C25.98,45.62 25.98,52.44 25.98,52.44 C25.98,53.63 26.45,54.78 27.3,55.62 C28.14,56.47 29.29,56.94 30.48,56.94 C30.48,56.94 49.57,56.94 49.57,56.94 C50.63,56.94 51.65,56.57 52.45,55.9 C53.26,55.22 53.81,54.29 54,53.25 C54,53.25 55.9,42.75 55.9,42.75 C56.02,42.1 56,41.44 55.83,40.8 C55.66,40.16 55.35,39.57 54.93,39.06 C54.51,38.55 53.98,38.15 53.38,37.87 C52.79,37.59 52.14,37.44 51.48,37.44 C51.48,37.44 44.64,37.44 44.64,37.44 C44.64,37.44 45.48,35.3 45.48,35.3 C45.83,34.36 45.95,33.35 45.82,32.35 C45.69,31.36 45.33,30.41 44.75,29.59 C44.18,28.77 43.41,28.1 42.52,27.64 C41.63,27.17 40.65,26.94 39.64,26.94 C39.35,26.94 39.07,27.03 38.83,27.18 C38.59,27.34 38.4,27.56 38.28,27.83 C38.28,27.83 34,37.44 34,37.44 C34,37.44 30.48,37.44 30.48,37.44 C29.29,37.44 28.14,37.91 27.3,38.76 C26.45,39.6 25.98,40.75 25.98,41.94 C25.98,41.94 25.98,46.71 25.98,46.71 C25.98,46.71 28.98,45.84 28.98,45.84 C28.98,45.84 28.98,41.94 28.98,41.94 C28.98,41.54 29.14,41.16 29.42,40.88 C29.7,40.6 30.08,40.44 30.48,40.44 C30.48,40.44 33.48,40.44 33.48,40.44 C33.48,40.44 33.26,55.3 33.26,55.3 C33.26,55.3 36.04,54.32 36.04,54.32 C36.04,54.32 36.48,39.26 36.48,39.26 C36.48,39.26 40.56,30.08 40.56,30.08 C40.98,30.2 41.37,30.41 41.7,30.69 C42.04,30.97 42.31,31.32 42.51,31.71 C42.7,32.1 42.81,32.53 42.83,32.96 C42.86,33.4 42.79,33.84 42.63,34.25 C42.63,34.25 41.83,36.39 41.83,36.39 C41.67,36.84 41.61,37.33 41.67,37.81 C41.73,38.29 41.9,38.75 42.18,39.15 C42.45,39.55 42.82,39.87 43.25,40.1 C43.68,40.32 44.16,40.44 44.64,40.44 C44.64,40.44 51.48,40.44 51.48,40.44 C51.7,40.44 51.92,40.49 52.12,40.58 C52.32,40.67 52.49,40.81 52.63,40.98 C52.78,41.15 52.88,41.34 52.94,41.56 C53,41.77 53.02,41.99 52.98,42.21 C52.98,42.21 51.07,52.71 51.07,52.71 C51.01,53.06 50.82,53.38 50.55,53.6 C50.27,53.83 49.93,53.95 49.57,53.94 C49.57,53.94 36.48,53.94 36.48,53.94 C36.48,53.94 33.48,53.94 33.48,53.94 C33.48,53.94 30.48,53.94 30.48,53.94 C30.08,53.94 29.7,53.78 29.42,53.5 C29.14,53.22 28.98,52.84 28.98,52.44 C28.98,52.44 28.98,45.04 28.98,45.04 C28.98,45.04 25.98,45.62 25.98,45.62z "})),i.createElement("g",{id:`addDislike_R_G_L_0_G_L_1_G${t}`},i.createElement("path",{id:`addDislike_R_G_L_0_G_L_1_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M-14.16 -4.95 C-14.16,-7.05 -12.46,-8.75 -10.36,-8.75 C-10.36,-8.75 -8.66,-8.75 -8.66,-8.75 C-7.84,-8.75 -7.16,-8.08 -7.16,-7.25 C-7.16,-7.25 -7.16,7.25 -7.16,7.25 C-7.16,8.08 -7.84,8.75 -8.66,8.75 C-8.66,8.75 -10.36,8.75 -10.36,8.75 C-12.46,8.75 -14.16,7.05 -14.16,4.95 C-14.16,4.95 -14.16,-4.95 -14.16,-4.95z  M10.36 -8.75 C10.36,-8.75 1.86,-8.75 1.86,-8.75 C1.86,-8.75 -5.14,-8.75 -5.14,-8.75 C-5.14,-8.75 -5.14,7.75 -5.14,7.75 C-5.14,8.3 -4.7,8.75 -4.15,8.75 C-4.15,8.75 8.36,8.75 8.36,8.75 C10.36,8.75 11.69,6.92 11.86,6.25 C11.98,5.75 13.86,-4.25 13.86,-4.25 C13.86,-4.25 13.91,-4.78 13.91,-4.78 C14.15,-6.9 12.49,-8.75 10.36,-8.75z "})),i.createElement("g",{id:`addDislike_R_G_L_0_G_L_0_G${t}`},i.createElement("path",{id:`addDislike_R_G_L_0_G_L_0_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M-2.73 -11.53 C-2.73,-11.53 -5.71,-4.7 -5.71,-4.7 C-5.88,-4.32 -5.97,-3.91 -5.97,-3.5 C-5.97,-3.5 -5.96,-0.58 -5.96,-0.58 C-5.96,-0.58 0.44,-0.54 0.44,-0.54 C0.44,-0.54 1.73,-3.32 1.73,-3.32 C2.59,-5.17 3.29,-7.31 2.31,-9.1 C1.31,-10.93 -0.53,-11.83 -1.82,-12.06 C-2.21,-12.13 -2.57,-11.89 -2.73,-11.53z "})))),i.createElement("g",{id:`time_group${t}`}))},Bc=({setAnimation:e})=>{const[t,n]=i.useState("");return i.useEffect((()=>n((0,Ma.Z)())),[]),i.useEffect((()=>{if(t){const n=document.getElementById(`removeDislike${t}`),a=()=>e($c.NoAnimation);return null==n||n.addEventListener("endEvent",a),()=>{null==n||n.removeEventListener("endEvent",a)}}}),[t,e]),i.createElement("svg",{className:Mc,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 60 60","data-testid":"removeDislike"},i.createElement("defs",null,i.createElement("animate",{id:`removeDislike${t}`,repeatCount:"1",dur:"0.5s",begin:"0s",xlinkHref:`#removeDislike_R_G_L_0_G_L_1_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"0",to:"1",keyTimes:"0;0.32;0.48;1",values:"0;0;1;1",keySplines:"0 0 0.667 1;0.012 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",keyTimes:"0;0.16;0.32;0.48;0.72;1",path:"M82 84.5 C82,84.5 76,82 76,82 C76,82 90,81.75 90,81.75 C90,81.75 76,82 76,82 C76,82 82,83.5 82,83.5 C82,83.5 82,83.5 82,83.5 ",keyPoints:"0;0.16;0.5;0.85;1;1",keySplines:"0 0 0.667 1;0 0 0.667 1;0 0 0.667 1;0 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.16;0.32;0.48;0.72;1",values:"0;-5;5;-5;0;0",keySplines:"0 0 0.667 1;0.167 0 0.667 1;0.167 0 0.667 1;0.167 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"2 -2",to:"2 -2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 -2;2 -2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_1_G${t}`,fill:"freeze",attributeName:"transform",from:"-42 -42",to:"-42 -42",type:"translate",additive:"sum",keyTimes:"0;1",values:"-42 -42;-42 -42",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_0_G_D_0_P_0${t}`,fill:"freeze",attributeName:"fill-opacity",from:"1",to:"0",keyTimes:"0;0.32;0.48;1",values:"1;1;0;0",keySplines:"0 0 0.667 1;0.012 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateMotion",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_0_G${t}`,fill:"freeze",keyTimes:"0;0.16;0.32;0.48;0.72;1",path:"M80 84.5 C80,84.5 76,82 76,82 C76,82 88,82 88,82 C88,82 76,82 76,82 C76,82 80,83.5 80,83.5 C80,83.5 80,83.5 80,83.5 ",keyPoints:"0;0.14;0.51;0.87;1;1",keySplines:"0 0 0.667 1;0 0 0.667 1;0 0 0.667 1;0 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"0",to:"0",type:"rotate",additive:"sum",keyTimes:"0;0.16;0.32;0.48;0.72;1",values:"0;-5;5;-5;0;0",keySplines:"0 0 0.667 1;0.167 0 0.667 1;0.167 0 0.667 1;0.167 0 0.667 1;0 0 0 0",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"2 -2",to:"2 -2",type:"scale",additive:"sum",keyTimes:"0;1",values:"2 -2;2 -2",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animateTransform",{repeatCount:"1",dur:"0.5s",begin:`removeDislike${t}.begin`,xlinkHref:`#removeDislike_R_G_L_0_G_L_0_G${t}`,fill:"freeze",attributeName:"transform",from:"0.125 5.438",to:"0.125 5.438",type:"translate",additive:"sum",keyTimes:"0;1",values:"0.125 5.438;0.125 5.438",keySplines:"0 0 1 1",calcMode:"spline"}),i.createElement("animate",{attributeType:"XML",attributeName:"opacity",dur:"1s",from:"0",to:"1",xlinkHref:`#time_group${t}`})),i.createElement("g",{id:`removeDislike_R_G${t}`},i.createElement("g",{id:`removeDislike_R_G_L_0_G${t}`,transform:" translate(31.062, 30) scale(0.5, 0.5) translate(-82, -82)"},i.createElement("g",{id:`removeDislike_R_G_L_0_G_L_1_G${t}`},i.createElement("path",{id:`removeDislike_R_G_L_0_G_L_1_G_D_0_P_0${t}`,"fill-opacity":"0","fill-rule":"nonzero",d:" M25.98 45.62 C25.98,45.62 25.98,52.44 25.98,52.44 C25.98,53.63 26.45,54.78 27.3,55.62 C28.14,56.47 29.29,56.94 30.48,56.94 C30.48,56.94 49.57,56.94 49.57,56.94 C50.63,56.94 51.65,56.57 52.45,55.9 C53.26,55.22 53.81,54.29 54,53.25 C54,53.25 55.9,42.75 55.9,42.75 C56.02,42.1 56,41.44 55.83,40.8 C55.66,40.16 55.35,39.57 54.93,39.06 C54.51,38.55 53.98,38.15 53.38,37.87 C52.79,37.59 52.14,37.44 51.48,37.44 C51.48,37.44 44.64,37.44 44.64,37.44 C44.64,37.44 45.48,35.3 45.48,35.3 C45.83,34.36 45.95,33.35 45.82,32.35 C45.69,31.36 45.33,30.41 44.75,29.59 C44.18,28.77 43.41,28.1 42.52,27.64 C41.63,27.17 40.65,26.94 39.64,26.94 C39.35,26.94 39.07,27.03 38.83,27.18 C38.59,27.34 38.4,27.56 38.28,27.83 C38.28,27.83 34,37.44 34,37.44 C34,37.44 30.48,37.44 30.48,37.44 C29.29,37.44 28.14,37.91 27.3,38.76 C26.45,39.6 25.98,40.75 25.98,41.94 C25.98,41.94 25.98,46.71 25.98,46.71 C25.98,46.71 28.98,45.84 28.98,45.84 C28.98,45.84 28.98,41.94 28.98,41.94 C28.98,41.54 29.14,41.16 29.42,40.88 C29.7,40.6 30.08,40.44 30.48,40.44 C30.48,40.44 33.48,40.44 33.48,40.44 C33.48,40.44 33.51,55.29 33.51,55.29 C33.51,55.29 36.48,54.32 36.48,54.32 C36.48,54.32 36.48,39.26 36.48,39.26 C36.48,39.26 40.56,30.08 40.56,30.08 C40.98,30.2 41.37,30.41 41.7,30.69 C42.04,30.97 42.31,31.32 42.51,31.71 C42.7,32.1 42.81,32.53 42.83,32.96 C42.86,33.4 42.79,33.84 42.63,34.25 C42.63,34.25 41.83,36.39 41.83,36.39 C41.67,36.84 41.61,37.33 41.67,37.81 C41.73,38.29 41.9,38.75 42.18,39.15 C42.45,39.55 42.82,39.87 43.25,40.1 C43.68,40.32 44.16,40.44 44.64,40.44 C44.64,40.44 51.48,40.44 51.48,40.44 C51.7,40.44 51.92,40.49 52.12,40.58 C52.32,40.67 52.49,40.81 52.63,40.98 C52.78,41.15 52.88,41.34 52.94,41.56 C53,41.77 53.02,41.99 52.98,42.21 C52.98,42.21 51.07,52.71 51.07,52.71 C51.01,53.06 50.82,53.38 50.55,53.6 C50.27,53.83 49.93,53.95 49.57,53.94 C49.57,53.94 36.48,53.94 36.48,53.94 C36.48,53.94 34.29,53.94 34.29,53.94 C34.29,53.94 30.48,53.94 30.48,53.94 C30.08,53.94 29.7,53.78 29.42,53.5 C29.14,53.22 28.98,52.84 28.98,52.44 C28.98,52.44 28.98,45.04 28.98,45.04 C28.98,45.04 25.98,45.62 25.98,45.62z "})),i.createElement("g",{id:`removeDislike_R_G_L_0_G_L_0_G${t}`},i.createElement("path",{id:`removeDislike_R_G_L_0_G_L_0_G_D_0_P_0${t}`,"fill-opacity":"1","fill-rule":"nonzero",d:" M-1.91 -18.77 C-1.91,-18.77 -4.9,-11.95 -4.9,-11.95 C-5.06,-11.57 -5.15,-11.16 -5.15,-10.74 C-5.15,-10.74 -5.15,-7.14 -5.15,-7.14 C-5.15,-7.14 1.26,-7.79 1.26,-7.79 C1.26,-7.79 2.55,-10.57 2.55,-10.57 C3.41,-12.41 4.11,-14.56 3.13,-16.35 C2.13,-18.18 0.28,-19.07 -1,-19.31 C-1.39,-19.38 -1.75,-19.14 -1.91,-18.77z  M-14.16 -4.95 C-14.16,-7.05 -12.46,-8.75 -10.36,-8.75 C-10.36,-8.75 -8.66,-8.75 -8.66,-8.75 C-7.84,-8.75 -7.16,-8.08 -7.16,-7.25 C-7.16,-7.25 -7.16,7.25 -7.16,7.25 C-7.16,8.08 -7.84,8.75 -8.66,8.75 C-8.66,8.75 -10.36,8.75 -10.36,8.75 C-12.46,8.75 -14.16,7.05 -14.16,4.95 C-14.16,4.95 -14.16,-4.95 -14.16,-4.95z  M10.36 -8.75 C10.36,-8.75 1.86,-8.75 1.86,-8.75 C1.86,-8.75 -5.14,-8.75 -5.14,-8.75 C-5.14,-8.75 -5.14,7.75 -5.14,7.75 C-5.14,8.3 -4.7,8.75 -4.15,8.75 C-4.15,8.75 8.36,8.75 8.36,8.75 C10.36,8.75 11.69,6.92 11.86,6.25 C11.98,5.75 13.86,-4.25 13.86,-4.25 C13.86,-4.25 13.91,-4.78 13.91,-4.78 C14.15,-6.9 12.49,-8.75 10.36,-8.75z "})))),i.createElement("g",{id:`time_group${t}`}))},Gc=()=>i.createElement("svg",{className:Mc,viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"thumbDownFilled"},i.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M19.7609 33.4813C17.8119 33.4813 16.232 31.9014 16.232 29.9524V19.8543C16.232 17.9053 17.8119 16.3254 19.7609 16.3254H21.477C22.3702 16.3254 23.0944 17.0495 23.0944 17.9428V31.8639C23.0944 32.7572 22.3702 33.4813 21.477 33.4813H19.7609ZM31.9222 33.4813H40.2551C42.347 33.4813 43.9745 31.663 43.7434 29.584L43.6863 29.0698C43.6863 29.0698 41.8482 19.2664 41.7256 18.7762C41.5622 18.1227 40.2551 16.3254 38.2944 16.3254H26.53C25.7179 16.3254 25.0599 16.9837 25.0599 17.7958V35.0095C25.0599 35.618 25.1858 36.22 25.4297 36.7775L28.1056 42.8939C28.3397 43.4291 28.874 43.7856 29.4405 43.6431C30.3674 43.4101 31.5053 42.8564 32.3974 41.8907C34.3518 39.775 33.2785 36.5329 32.1087 33.9009L31.9222 33.4813Z"})),Hc=()=>i.createElement("svg",{className:Mc,viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"thumbDownOutlined"},i.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M42.1982 34.0054C42.7844 33.7301 43.303 33.3296 43.7174 32.832C44.1334 32.3344 44.4349 31.7514 44.6006 31.1244C44.7662 30.4974 44.7921 29.8416 44.6762 29.2035L42.8029 18.8785C42.6166 17.8602 42.0792 16.9395 41.2842 16.2766C40.4892 15.6136 39.4869 15.2503 38.4517 15.25H19.675C18.5014 15.25 17.3759 15.7162 16.546 16.546C15.7162 17.3759 15.25 18.5014 15.25 19.675V30C15.25 31.1735 15.7162 32.2991 16.546 33.1289C17.3759 33.9588 18.5014 34.425 19.675 34.425H23.1412L27.345 43.8797C27.4613 44.1385 27.6498 44.3582 27.8879 44.5126C28.126 44.6669 28.4035 44.7493 28.6872 44.7499C29.6726 44.7545 30.6443 44.52 31.5191 44.0665C32.3939 43.613 33.1457 42.9541 33.7099 42.1462C34.2741 41.3384 34.6339 40.4057 34.7584 39.4283C34.883 38.4508 34.7685 37.4577 34.425 36.5342L33.599 34.425H40.3249C40.9725 34.4239 41.612 34.2806 42.1982 34.0054ZM39.9267 19.4094L41.7999 29.7344C41.8359 29.9485 41.8242 30.168 41.7655 30.3771C41.7069 30.5861 41.6028 30.7797 41.4607 30.9439C41.322 31.1104 41.1483 31.2443 40.952 31.3361C40.7558 31.4279 40.5416 31.4753 40.3249 31.4749H33.599C33.123 31.4757 32.6544 31.5917 32.233 31.8129C31.8116 32.0341 31.45 32.354 31.179 32.7453C30.908 33.1365 30.7357 33.5875 30.6768 34.0598C30.6179 34.5321 30.6741 35.0116 30.8407 35.4574L31.6225 37.5666C31.7763 37.9684 31.8451 38.3976 31.8246 38.8273C31.8042 39.257 31.6948 39.6778 31.5036 40.0631C31.3123 40.4484 31.0432 40.7899 30.7134 41.0659C30.3835 41.342 29.9999 41.5467 29.587 41.6671L25.575 32.6401V18.1999H38.4517C38.801 18.1942 39.1409 18.3127 39.411 18.5342C39.6811 18.7557 39.8639 19.0658 39.9267 19.4094ZM22.625 18.1999H19.675C19.2838 18.1999 18.9086 18.3553 18.632 18.6319C18.3554 18.9085 18.2 19.2837 18.2 19.6749V29.9999C18.2 30.391 18.3554 30.7662 18.632 31.0428C18.9086 31.3194 19.2838 31.4748 19.675 31.4748H22.625V18.1999Z"}));function jc(){return jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jc.apply(this,arguments)}let $c=function(e){return e[e.AddLike=0]="AddLike",e[e.RemoveLike=1]="RemoveLike",e[e.AddDislike=2]="AddDislike",e[e.RemoveDislike=3]="RemoveDislike",e[e.NoAnimation=4]="NoAnimation",e}({});const zc=e=>{const{gti:t,reactionAction:{reaction:n,signInUrl:a,csrfToken:r,feedbackSource:o},buttonType:l,strings:s,setReactionCall:c,onSetReactionSuccess:d,clickstreamAction:u,iconWrapperClassName:m,iconButtonClassName:p,isWrapperClickable:g,showLabelOnTouchDevices:h,parentOnClick:f}=e,[y,b]=i.useState($c.NoAnimation),[E,C]=i.useState(!1);i.useEffect((()=>{if(!document||!window)return;const e=()=>{C(!0)};if("complete"!==document.readyState)return window.addEventListener("load",e),()=>window.removeEventListener("load",e);e()}),[]);const _=Fc(s,l,n),T=Uc(s,l,n),k="Like"===l?"like-button":"dislike-button",w=qc(l,n,y,b),L={reactionState:n},I=e=>{let a,i;switch((e=>{e&&e.nativeEvent&&e.nativeEvent.ack&&e.nativeEvent.ack(e.currentTarget)})(e),l){case"Like":a="Like"!==n?"Add":"Remove",i="Add"===a?$c.AddLike:$c.RemoveLike;break;case"Dislike":a="Dislike"!==n?"Add":"Remove",i="Add"===a?$c.AddDislike:$c.RemoveDislike}E&&b(i),"Add"===a&&"Like"===l&&s.likeToastMsg?(0,Ic.toast)(s.likeToastMsg):"Add"===a&&"Dislike"===l&&s.dislikeToastMsg&&(0,Ic.toast)(s.dislikeToastMsg),c(l,a,r,t,o,(()=>b($c.NoAnimation)),d),null==u||u(l,a),e.preventDefault()},P=a?void 0:e=>{null==f||f(),I(e),g&&e.stopPropagation()},D=g?{onClick:a?void 0:e=>{null==f||f(),I(e)},tabIndex:-1,"data-testid":k+"-wrapper"}:void 0;return i.createElement(Dc,{action:a,method:"POST",hiddenInputs:L},i.createElement("div",jc({className:v(m,Sc)},D),i.createElement(Nc.IconButton,{className:v(p,xc),icon:w,type:"submit",onClick:P,ariaLabel:_,label:T,"data-ux-click":!0,testID:k,showLabelOnTouchDevices:null==h||h})))},Fc=(e,t,n)=>{switch(t){case"Like":return"Like"===n&&e.removeLikeAriaLabel?e.removeLikeAriaLabel:"Like"!==n||e.removeLikeAriaLabel?e.likeUnselectedAriaLabel:e.likeSelectedAriaLabel;case"Dislike":return"Dislike"===n?e.dislikeSelectedAriaLabel:e.dislikeUnselectedAriaLabel}},Uc=(e,t,n)=>{switch(t){case"Like":return"Like"===n&&e.removeLikeLabel?e.removeLikeLabel:e.likeButtonLabel;case"Dislike":return e.dislikeButtonLabel}},qc=(e,t,n,a)=>{switch(e){case"Like":return n===$c.AddLike&&"Like"===t?i.createElement(Rc,{setAnimation:a}):n===$c.RemoveLike&&"NoReaction"===t?i.createElement(Ac,{setAnimation:a}):"Like"===t?i.createElement(Oc,null):i.createElement(Vc,null);case"Dislike":return n===$c.AddDislike&&"Dislike"===t?i.createElement(Wc,{setAnimation:a}):n===$c.RemoveDislike&&"NoReaction"===t?i.createElement(Bc,{setAnimation:a}):"Dislike"===t?i.createElement(Gc,null):i.createElement(Hc,null)}},Kc="wzHIm0",Qc="_4X567c",Zc="a9tR+5";const Jc=(0,n("./node_modules/zustand/esm/vanilla.mjs").M)((e=>({numOfLikedCards:0,onboardingLifeCycleCompleted:!1,handleLikeAction:async(t,n)=>{e("Add"===t?e=>({numOfLikedCards:e.numOfLikedCards+1}):e=>({numOfLikedCards:e.numOfLikedCards-1}));const{onboardingLifeCycleCompleted:a,numOfLikedCards:i,setOnboardingStatus:r}=Jc.getState();if(!a&&i>0){const t=await r("COMPLETED_ONBOARDING",n);null!=t&&t.success&&e({onboardingLifeCycleCompleted:!0})}else a&&0==i&&k.c.info("Customer removed all the liked cards during onboarding")},setOnboardingStatus:async(e,t)=>{try{const n=(0,m.getRequestContext)();return await(new r.e).SetOnboardingStatus({status:e,token:t,context:n})}catch(e){k.c.warn(e)}}}))),Xc=({gti:e,reactionAction:t,iconButtonClassname:n})=>{const{actions:{onSetReaction:a},container:{onboardingAction:r,containerType:o}}=i.useContext(_E),{clickstream:l,clickstreamPageContext:s,getString:c}=i.useContext(N);return i.createElement(zc,{gti:e,reactionAction:t,buttonType:"Like",strings:{likeButtonLabel:c("DV_DP_TR_like_btn"),dislikeButtonLabel:c("DV_DP_TR_dislike_btn"),likeUnselectedAriaLabel:c("DV_DP_TR_like_aria"),likeSelectedAriaLabel:c("DV_DP_TR_liked_aria"),dislikeUnselectedAriaLabel:c("DV_DP_TR_dislike_aria"),dislikeSelectedAriaLabel:c("DV_DP_TR_disliked_aria"),removeLikeLabel:c("DV_WEB_Undo_like"),removeLikeAriaLabel:c("DV_WEB_Undo_like")},iconWrapperClassName:h()(Kc,{[Zc]:"Like"===t.reaction}),iconButtonClassName:h()(Qc,n),setReactionCall:a,isWrapperClickable:!0,showLabelOnTouchDevices:!1,onSetReactionSuccess:e=>{r?Jc.getState().handleLikeAction(e,r.csrfToken):k.c.warn("OnboardingAction is not defined in the Card component")},parentOnClick:()=>{document.activeElement.blur()},clickstreamAction:(t,n)=>{if(s){const a="Remove"===n?"rm_":"",i="Like"===t?"like":"dislike",r="ATVHome"===s.pageType&&"Home"===s.subPageType&&"Onboarding"===o;Fn(`atv_hm_ocx_react_${a}${i}`,r?"ATVModal":s.pageType,r?"Onboarding":s.subPageType,e,[gn.Click],r?vn.PageTouch:vn.PageHit,s.clientVariant,l)}}})},Yc=(e,t,n)=>{var a;const i=Boolean(null===(a=t.link)||void 0===a?void 0:a.deeplinkFallbackUrl);return["ScheduleCard","BonusContentCard"].includes(n)&&i&&yl(e.launchType)?e.launchType:void 0},ed=e=>"LiveLinearCard"===e,td="_08F4Xs",nd="_1wbCtj",ad="xMq65K",id="+69gmr",rd="_82EmV-",od="D8a0Rv",ld="_3xB0xC",sd="Z324wh",cd="tMGtBC",dd="EuHIIv",ud="VS+OGj",md="Qlfpmq",pd="_2h8HTV",gd="s41gM5",vd="_4jVBXq",hd="bW3Us-",fd="bFgDjs",yd="lwhxx9",bd="_6a5V75",Ed="_34fY8G",Cd="Y1p8tl",_d="_3w8uNa";function Td(){return Td=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Td.apply(this,arguments)}const kd=(0,s.s6)((({index:e,card:t,wrapperClassName:n,enrichment:a,isCircle:r=!1,renderGlanceSpaceIfNoGlanceMessage:o,onWrapperElementChange:l,render:s})=>{var d,u,m,p,g,v,f,y,E,C,_,T,L,I,P;const{container:{impressionData:D,containerType:S},consumingWidgetType:x,removedItemsMap:M,index:R}=i.useContext(_E),{logger:A}=(0,c.L1)(),[O,V]=i.useState(),W=e=>{var t;const n=null===(t=e.hideThisAction)||void 0===t?void 0:t.tag;e.success&&"Unhide"===n?(V(e.message),Z(!1)):e.success&&"Hide"===n&&V(void 0)},B=i.useRef(null),{isHoverEnabled:G,contingencies:H,theme:j,isTouchEnabledWindowsDevice:$}=i.useContext(N),{connected:z,cardIndexWithMiniDetails:F,actions:U}=i.useContext(Is),q=F===e,K=!Boolean(null==H?void 0:H.disableHover)&&!(!G||null==t||null===(d=t.hoverInfo)||void 0===d||!d.canHover||O||!sc.isAtleast(lc.TABLET)),[Q,Z]=i.useState(!1),[J,X]=i.useState(!1),{touchMiniDetailsModalListeners:Y,isMiniDetailsModalVisible:ee,dismissMiniDetailsModal:te,removeContextMenuClass:ne,removeDragAnimationClass:ae,link:ie}=fc(void 0!==t.titleID,t.link);i.useEffect((()=>{if(q&&J&&!(0,Ps.sT)(null==B?void 0:B.current)&&B.current){var e;null===(e=(0,Ps.GO)(B.current)[0])||void 0===e||e.focus()}}),[q,J]);const re=Q||J,oe=null!==(u=q&&!ee)&&void 0!==u?u:re,[le,se]=i.useState(!1),[ce,de]=i.useState("default"),ue=void 0!==t.titleID?null==M?void 0:M[t.titleID]:void 0,me=void 0!==ue,pe=i.useCallback((()=>{if(!(0,Ps.sT)(null==B?void 0:B.current)){var e;X(!1);(null===(e=document)||void 0===e?void 0:e.activeElement).blur()}Z(!0)}),[]),ge=i.useCallback((()=>{Z(!1)}),[]),ve=i.useCallback((e=>{["Enter"," "].includes(e.key)&&(q||(e.preventDefault(),X(!0)))}),[q]),he=(0,w.D)((()=>{(0,Ps.sT)(null==B?void 0:B.current)||X(!1)}),100),fe=i.useCallback((n=>{const a=null==B?void 0:B.current;a||n===a?a&&!n&&Aa.unobserve(a):D&&We&&Me&&Ne&&n&&Aa.observe(n,{collectionImpressionData:D,titleID:xe,imageURL:We,refMarker:Ne,widgetType:Me,carouselPosition:R,itemPosition:e,itemAnalytics:t.itemAnalytics}),B.current=n,null==l||l(n,e)}),[]);i.useEffect((()=>{if(z){if("undefined"!=typeof window&&!oe){var t;const e=null==B||null===(t=B.current)||void 0===t?void 0:t.getBoundingClientRect(),n=parseFloat(b("--dv-carousel-column-margin")),a=parseFloat(b("--dv-carousel-column-gap"));if(e&&n&&a){de("default");let t=n+a,i=n+a;0;const r=e.left<=t,o=window.innerWidth-e.right<=i;r&&de("left"),o&&de("right")}}re&&!q?U.reportHoverOrFocusEvent({event:"ACTIVE",cardIndex:e}):!re&&q&&U.reportHoverOrFocusEvent({event:"BLUR",cardIndex:e})}}),[re]),i.useEffect((()=>{if(z&&ee&&!q){const e=null==B?void 0:B.current;e&&Aa.logManualImpression(e,"Highlight")}}),[ee]);const ye=i.useRef();i.useEffect((()=>{if(q){const e=null==B?void 0:B.current;e&&(ye.current=window.setTimeout((()=>{Aa.logManualImpression(e,"Highlight")}),300))}else clearTimeout(ye.current)}),[q]),i.useEffect((()=>()=>{clearTimeout(ye.current)}),[]);const be=i.useRef(),[Ee,Ce]=i.useState(!1),_e=null==a?void 0:a.prerolls,{isTrailerAutoplayEnabled:Te}=i.useContext(_E);i.useEffect((()=>{oe?be.current=window.setTimeout((()=>Ce(!0)),1600):(clearTimeout(be.current),Ce(!1))}),[oe]);const ke=Te&&(K||q)&&oe&&_e?{prerolls:_e,canPlay:Ee,delay:1600,placement:zt.StandardMiniDetails,className:rd}:void 0,we=i.useRef();i.useEffect((()=>{clearTimeout(we.current),oe&&!le?se(!0):!oe&&le&&(we.current=window.setTimeout((()=>se(!1)),100))}),[oe]);const Le=r?Cd:td,Ie=Boolean(t.station)?null==t||null===(m=t.playbackActions)||void 0===m?void 0:m[0]:ic(t,a);let Pe=oc(a);const{images:De,hideThisAction:Se,titleID:xe,widgetType:Me,refMarker:Ne,title:Re,liveInfo:Ae,entityType:Oe,reactionAction:Ve}=t;let We=null==De||null===(p=De.cover)||void 0===p?void 0:p.url,Be=t.displayTitle||(null===(g=t.link)||void 0===g?void 0:g.label),Ge=null==De||null===(v=De.cover)||void 0===v?void 0:v.alternateText;const He=i.useContext(dr),je=pc(x,S,R,e),$e=Yc(He,t,Me);let{synopsis:ze,releaseYear:Fe,contentMaturityRating:Ue,maturityRatingBadge:qe}=t;const Ke=null!==(f=null==a?void 0:a.entitlementCues)&&void 0!==f?f:t.entitlementCues;let Qe,Ze,Je,Xe;Ve&&"Onboarding"===S&&(Xe=i.createElement(Xc,{gti:xe,reactionAction:Ve})),Ie&&ed(Me)&&!Xe&&(Je=i.createElement(Tl,{playbackAction:Ie,titleId:xe,carouselRefTag:t.refMarker,buttonVariant:_l.Invisible}));const Ye=null!==(y=null==a?void 0:a.progress)&&void 0!==y?y:t.progress,et=Boolean((null==Ye?void 0:Ye.percentage)&&Ye.percentage>0),tt=Boolean(oe||t.progress),at=et&&tt?Ye:void 0;Ze=i.createElement(Qs,{progress:at,hovered:oe});const[it,rt]=i.useState(xs(t.station)),ot=xs(t.station,1),lt=Ns(t,it,ot);let st,ct,dt;if(it){var ut,mt,pt,gt,vt,ht;st={broadcast:it,nextBroadcastCallback:()=>{rt(xs(t.station))}},We=null===(ut=it.metadata.image)||void 0===ut?void 0:ut.url,Be=lt.displayTitle,Ge=null===(mt=it.metadata.image)||void 0===mt?void 0:mt.alternateText,ct=null===(pt=t.promotedAcquisitionGroup)||void 0===pt?void 0:pt.label,dt=null==ie?void 0:ie.url,({synopsis:ze,releaseYear:Fe,contentMaturityRating:Ue}=it.metadata),Qe=i.createElement(Ys,{colour:null===(gt=it.metadata.linearBadge)||void 0===gt?void 0:gt.colour,label:null===(vt=it.metadata.linearBadge)||void 0===vt?void 0:vt.label,className:_d}),Ze=i.createElement(Qs,{title:null===(ht=t.station)||void 0===ht?void 0:ht.name,playable:void 0!==Ie,hovered:oe,linearProgress:st})}const{actions:{getEnrichments:yt}}=i.useContext(_E);if(i.useEffect((()=>{if((0,Ds.Dy)(Oe)&&"DetailPage"===x){const e="PVVideoPlayerClosed",n=()=>{t.titleID&&yt([t.titleID],!0)};return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}}}),[]),(0,Ds.g2)(Oe)){var bt,Et;const e=Oe==Ds.Ze?null==Ae?void 0:Ae.timeBadge:void 0;Ze=i.createElement(Qs,{title:Re,dateTime:e,hovered:oe}),Qe=i.createElement(nc,{liveInfo:Ae,className:_d}),ct=null==a||null===(bt=a.promotedAcquisitionGroup)||void 0===bt?void 0:bt.label,dt=null==a||null===(Et=a.promotedAcquisitionGroup)||void 0===Et?void 0:Et.url}const Ct={eventTitle:Be,triggerLocation:"Hover",liveInfo:Ae};return i.useEffect((()=>{if(!We){const e=t.station?`station: ${t.channelId}`:`title ${xe}`;A.count("MissingImageCard",1,!1),k.c.count("MissingImageCard"),A.warn(`Missing cover image in Card for ${e}`)}}),[]),i.createElement("article",Td({className:h()(Le,n,ne,{[id]:oe,[cd]:le})},K&&{onMouseOver:pe,onMouseLeave:ge,onBlur:he},Y,{ref:fe,"data-card-title":t.title,"data-card-entity-type":t.entityType,"data-card-position":e,"data-testid":r?"circle-card":"card","data-to-be-deprecated":!0}),O&&Se&&xe&&i.createElement("section",{className:fd},i.createElement("div",{className:yd},O,i.createElement(ft,{hideThisAction:Se,titleID:xe,buttonStyle:bd,textStyle:Ed,isInDropdown:!1,callback:W}))),me&&ue.removedOverlayMessage&&i.createElement(mc,{message:ue.removedOverlayMessage,undoText:ue.undoMessage,onUndo:ue.undo}),i.createElement("section",{className:h()(dd,{[ud]:!r})},!me&&!O&&i.createElement(i.Fragment,null,i.createElement(oi,{className:h()(nd,{[md]:"left"===ce,[pd]:"right"===ce}),imageClassName:h()(od,ae),imageWrapperClassName:ad,isCircle:r,imageUrl:We,alternateText:Ge,fallbackTitle:Be,url:null==t||null===(E=t.link)||void 0===E?void 0:E.url,deeplinkFallbackUrl:null==ie?void 0:ie.deeplinkFallbackUrl,deeplinkType:$e,parentElement:B.current,backgroundTrailerConfig:ke,hasProgress:et,badge:Qe,cardOverlay:Ze,playButtonOverlay:Je,linkAriaRole:q?"link":"button",onPackshotLinkKeyDown:ve,noBottomCornerRadiusLink:q,refMarker:t.refMarker,titleID:null!==(C=null!==(_=t.titleID)&&void 0!==_?_:null===(T=t.station)||void 0===T?void 0:T.id)&&void 0!==C?C:t.channelId,shouldLazyLoadImage:je,reactionOverlay:Xe}),(oe||ee)&&i.createElement(is,{className:h()(ld,{[vd]:"left"===ce,[hd]:"right"===ce,[gd]:"default"===ce}),titleID:null==t?void 0:t.titleID,playbackAction:Ie,playbackGroup:Pe,streamSelectorProps:Ct,providerLogo:null==De?void 0:De.providerLogo,displayTitle:Be,watchlistAction:null==a?void 0:a.watchlistAction,trailer:null==a?void 0:a.trailer,hideThisAction:null==t?void 0:t.hideThisAction,customerReviews:null==t?void 0:t.customerReviews,releaseYear:Fe,runtime:null==t?void 0:t.runtime,dateTime:null==Ae?void 0:Ae.timeBadge,contentMaturityRating:Ue,maturityRatingBadge:qe,synopsis:ze,entitlementType:null==Ke?void 0:Ke.entitlementType,focusMessage:null==Ke?void 0:Ke.focusMessage,highValueMessage:null==Ke?void 0:Ke.highValueMessage,hideThisCallback:W,linearProps:lt,callToActionButtonLabel:ct,callToActionButtonLink:dt,carouselRefTag:t.refMarker,libraryItemActions:null==t?void 0:t.libraryItemActions,isTouchEnabledWindowsDevice:$,recordSeasonTooltipText:null==a||null===(L=a.recordSeason)||void 0===L||null===(L=L.watchlistAddon)||void 0===L?void 0:L.tooltipText,showTouchModal:ee,dismissTouchModal:te,detailsPageUrl:null==ie?void 0:ie.url}),i.createElement(Lc,t))),!me&&!O&&i.createElement(nt,{message:null==Ke||null===(I=Ke.glanceMessage)||void 0===I?void 0:I.message,icon:null==Ke||null===(P=Ke.glanceMessage)||void 0===P?void 0:P.icon,className:sd,hideIcon:"Store"===j,takeUpSpaceIfEmpty:o}))}));function wd(){return wd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wd.apply(this,arguments)}const Ld=({index:e,card:t,wrapperClassName:n,enrichment:a,isCircle:r=!1,renderGlanceSpaceIfNoGlanceMessage:o,onWrapperElementChange:l,render:s})=>{var d,u,m,p,g,v,f,y,E,C,_,T,L,I,P;const{container:{impressionData:D,containerType:S},consumingWidgetType:x,removedItemsMap:M,index:R}=i.useContext(_E),{logger:A}=(0,c.L1)(),[O,V]=i.useState(),W=e=>{var t;const n=null===(t=e.hideThisAction)||void 0===t?void 0:t.tag;e.success&&"Unhide"===n?(V(e.message),Z(!1)):e.success&&"Hide"===n&&V(void 0)},B=i.useRef(null),{isHoverEnabled:G,contingencies:H,theme:j,isTouchEnabledWindowsDevice:$}=i.useContext(N),{connected:z,cardIndexWithMiniDetails:F,actions:U}=i.useContext(Is),q=F===e,K=!Boolean(null==H?void 0:H.disableHover)&&!(!G||null==t||null===(d=t.hoverInfo)||void 0===d||!d.canHover||O||!sc.isAtleast(lc.TABLET)),[Q,Z]=i.useState(!1),[J,X]=i.useState(!1),{touchMiniDetailsModalListeners:Y,isMiniDetailsModalVisible:ee,dismissMiniDetailsModal:te,removeContextMenuClass:ne,removeDragAnimationClass:ae,link:ie}=fc(void 0!==t.titleID,t.link);i.useEffect((()=>{if(q&&J&&!(0,Ps.sT)(null==B?void 0:B.current)&&B.current){var e;null===(e=(0,Ps.GO)(B.current)[0])||void 0===e||e.focus()}}),[q,J]);const re=Q||J,oe=null!==(u=q&&!ee)&&void 0!==u?u:re,[le,se]=i.useState(!1),[ce,de]=i.useState("default"),ue=void 0!==t.titleID?null==M?void 0:M[t.titleID]:void 0,me=void 0!==ue,pe=i.useCallback((()=>{if(!(0,Ps.sT)(null==B?void 0:B.current)){var e;X(!1);(null===(e=document)||void 0===e?void 0:e.activeElement).blur()}Z(!0)}),[]),ge=i.useCallback((()=>{Z(!1)}),[]),ve=i.useCallback((e=>{["Enter"," "].includes(e.key)&&(q||(e.preventDefault(),X(!0)))}),[q]),he=(0,w.D)((()=>{(0,Ps.sT)(null==B?void 0:B.current)||X(!1)}),100),fe=i.useCallback((n=>{const a=null==B?void 0:B.current;a||n===a?a&&!n&&Aa.unobserve(a):D&&We&&Me&&Ne&&n&&Aa.observe(n,{collectionImpressionData:D,titleID:xe,imageURL:We,refMarker:Ne,widgetType:Me,carouselPosition:R,itemPosition:e,itemAnalytics:t.itemAnalytics}),B.current=n,null==l||l(n,e)}),[]);i.useEffect((()=>{if(z){if("undefined"!=typeof window&&!oe){var t;const e=null==B||null===(t=B.current)||void 0===t?void 0:t.getBoundingClientRect(),n=parseFloat(b("--dv-carousel-column-margin")),a=parseFloat(b("--dv-carousel-column-gap"));if(e&&n&&a){de("default");let t=n+a,i=n+a;0;const r=e.left<=t,o=window.innerWidth-e.right<=i;r&&de("left"),o&&de("right")}}re&&!q?U.reportHoverOrFocusEvent({event:"ACTIVE",cardIndex:e}):!re&&q&&U.reportHoverOrFocusEvent({event:"BLUR",cardIndex:e})}}),[re]),i.useEffect((()=>{if(z&&ee&&!q){const e=null==B?void 0:B.current;e&&Aa.logManualImpression(e,"Highlight")}}),[ee]);const ye=i.useRef();i.useEffect((()=>{if(q){const e=null==B?void 0:B.current;e&&(ye.current=window.setTimeout((()=>{Aa.logManualImpression(e,"Highlight")}),300))}else clearTimeout(ye.current)}),[q]),i.useEffect((()=>()=>{clearTimeout(ye.current)}),[]);const be=i.useRef(),[Ee,Ce]=i.useState(!1),_e=null==a?void 0:a.prerolls,{isTrailerAutoplayEnabled:Te}=i.useContext(_E);i.useEffect((()=>{oe?be.current=window.setTimeout((()=>Ce(!0)),1600):(clearTimeout(be.current),Ce(!1))}),[oe]);const ke=Te&&(K||q)&&oe&&_e?{prerolls:_e,canPlay:Ee,delay:1600,placement:zt.StandardMiniDetails,className:cs}:void 0,we=i.useRef();i.useEffect((()=>{clearTimeout(we.current),oe&&!le?se(!0):!oe&&le&&(we.current=window.setTimeout((()=>se(!1)),100))}),[oe]);const Le=r?ws:rs,Ie=Boolean(t.station)?null==t||null===(m=t.playbackActions)||void 0===m?void 0:m[0]:ic(t,a);let Pe=oc(a);const{images:De,hideThisAction:Se,titleID:xe,widgetType:Me,refMarker:Ne,title:Re,liveInfo:Ae,entityType:Oe,reactionAction:Ve}=t;let We=null==De||null===(p=De.cover)||void 0===p?void 0:p.url,Be=t.displayTitle||(null===(g=t.link)||void 0===g?void 0:g.label),Ge=null==De||null===(v=De.cover)||void 0===v?void 0:v.alternateText;const He=i.useContext(dr),je=pc(x,S,R,e),$e=Yc(He,t,Me);let{synopsis:ze,releaseYear:Fe,contentMaturityRating:Ue,maturityRatingBadge:qe}=t;const Ke=null!==(f=null==a?void 0:a.entitlementCues)&&void 0!==f?f:t.entitlementCues;let Qe,Ze,Je,Xe;Ve&&"Onboarding"===S&&(Xe=i.createElement(Xc,{gti:xe,reactionAction:Ve})),Ie&&ed(Me)&&!Xe&&(Je=i.createElement(Tl,{playbackAction:Ie,titleId:xe,carouselRefTag:t.refMarker,buttonVariant:_l.Invisible}));const Ye=null!==(y=null==a?void 0:a.progress)&&void 0!==y?y:t.progress,et=Boolean((null==Ye?void 0:Ye.percentage)&&Ye.percentage>0),tt=Boolean(oe||t.progress),at=et&&tt?Ye:void 0;Ze=i.createElement(Qs,{progress:at,hovered:oe});const[it,rt]=i.useState(xs(t.station)),ot=xs(t.station,1),lt=Ns(t,it,ot);let st,ct,dt;if(it){var ut,mt,pt,gt,vt,ht;st={broadcast:it,nextBroadcastCallback:()=>{rt(xs(t.station))}},We=null===(ut=it.metadata.image)||void 0===ut?void 0:ut.url,Be=lt.displayTitle,Ge=null===(mt=it.metadata.image)||void 0===mt?void 0:mt.alternateText,ct=null===(pt=t.promotedAcquisitionGroup)||void 0===pt?void 0:pt.label,dt=null==ie?void 0:ie.url,({synopsis:ze,releaseYear:Fe,contentMaturityRating:Ue}=it.metadata),Qe=i.createElement(Ys,{colour:null===(gt=it.metadata.linearBadge)||void 0===gt?void 0:gt.colour,label:null===(vt=it.metadata.linearBadge)||void 0===vt?void 0:vt.label,className:Ls}),Ze=i.createElement(Qs,{title:null===(ht=t.station)||void 0===ht?void 0:ht.name,playable:void 0!==Ie,hovered:oe,linearProgress:st})}const{actions:{getEnrichments:yt}}=i.useContext(_E);if(i.useEffect((()=>{if((0,Ds.Dy)(Oe)&&"DetailPage"===x){const e="PVVideoPlayerClosed",n=()=>{t.titleID&&yt([t.titleID],!0)};return window.addEventListener(e,n),()=>{window.removeEventListener(e,n)}}}),[]),(0,Ds.g2)(Oe)){var bt,Et;const e=Oe==Ds.Ze?null==Ae?void 0:Ae.timeBadge:void 0;Ze=i.createElement(Qs,{title:Re,dateTime:e,hovered:oe}),Qe=i.createElement(nc,{liveInfo:Ae,className:Ls}),ct=null==a||null===(bt=a.promotedAcquisitionGroup)||void 0===bt?void 0:bt.label,dt=null==a||null===(Et=a.promotedAcquisitionGroup)||void 0===Et?void 0:Et.url}const Ct={eventTitle:Be,triggerLocation:"Hover",liveInfo:Ae};return i.useEffect((()=>{if(!We){const e=t.station?`station: ${t.channelId}`:`title ${xe}`;A.count("MissingImageCard",1,!1),k.c.count("MissingImageCard"),A.warn(`Missing cover image in Card for ${e}`)}}),[]),i.createElement("article",wd({className:h()(Le,n,ne,{[ss]:oe,[ps]:le})},K&&{onMouseOver:pe,onMouseLeave:ge,onBlur:he},Y,{ref:fe,"data-card-title":t.title,"data-card-entity-type":t.entityType,"data-card-position":e,"data-testid":r?"circle-card":"card"}),O&&Se&&xe&&i.createElement("section",{className:Cs},i.createElement("div",{className:_s},O,i.createElement(ft,{hideThisAction:Se,titleID:xe,buttonStyle:Ts,textStyle:ks,isInDropdown:!1,callback:W}))),me&&ue.removedOverlayMessage&&i.createElement(mc,{message:ue.removedOverlayMessage,undoText:ue.undoMessage,onUndo:ue.undo}),i.createElement("section",{className:h()(gs,{[vs]:!r})},!me&&!O&&i.createElement(i.Fragment,null,i.createElement(oi,{className:h()(os,{[hs]:"left"===ce,[fs]:"right"===ce}),imageClassName:h()(ds,ae),imageWrapperClassName:ls,isCircle:r,imageUrl:We,alternateText:Ge,fallbackTitle:Be,url:null==t||null===(E=t.link)||void 0===E?void 0:E.url,deeplinkFallbackUrl:null==ie?void 0:ie.deeplinkFallbackUrl,deeplinkType:$e,parentElement:B.current,backgroundTrailerConfig:ke,hasProgress:et,badge:Qe,cardOverlay:Ze,playButtonOverlay:Je,linkAriaRole:q?"link":"button",onPackshotLinkKeyDown:ve,noBottomCornerRadiusLink:q,refMarker:t.refMarker,titleID:null!==(C=null!==(_=t.titleID)&&void 0!==_?_:null===(T=t.station)||void 0===T?void 0:T.id)&&void 0!==C?C:t.channelId,shouldLazyLoadImage:je,reactionOverlay:Xe}),(oe||ee)&&i.createElement(is,{className:h()(us,{[bs]:"left"===ce,[Es]:"right"===ce,[ys]:"default"===ce}),titleID:null==t?void 0:t.titleID,playbackAction:Ie,playbackGroup:Pe,streamSelectorProps:Ct,providerLogo:null==De?void 0:De.providerLogo,displayTitle:Be,watchlistAction:null==a?void 0:a.watchlistAction,trailer:null==a?void 0:a.trailer,hideThisAction:null==t?void 0:t.hideThisAction,customerReviews:null==t?void 0:t.customerReviews,releaseYear:Fe,runtime:null==t?void 0:t.runtime,dateTime:null==Ae?void 0:Ae.timeBadge,contentMaturityRating:Ue,maturityRatingBadge:qe,synopsis:ze,entitlementType:null==Ke?void 0:Ke.entitlementType,focusMessage:null==Ke?void 0:Ke.focusMessage,highValueMessage:null==Ke?void 0:Ke.highValueMessage,hideThisCallback:W,linearProps:lt,callToActionButtonLabel:ct,callToActionButtonLink:dt,carouselRefTag:t.refMarker,libraryItemActions:null==t?void 0:t.libraryItemActions,isTouchEnabledWindowsDevice:$,recordSeasonTooltipText:null==a||null===(L=a.recordSeason)||void 0===L||null===(L=L.watchlistAddon)||void 0===L?void 0:L.tooltipText,showTouchModal:ee,dismissTouchModal:te,detailsPageUrl:null==ie?void 0:ie.url}),i.createElement(Lc,t))),!me&&!O&&i.createElement(nt,{message:null==Ke||null===(I=Ke.glanceMessage)||void 0===I?void 0:I.message,icon:null==Ke||null===(P=Ke.glanceMessage)||void 0===P?void 0:P.icon,className:ms,hideIcon:"Store"===j,takeUpSpaceIfEmpty:o}))},Id=(0,s.s6)((e=>(0,V.h)()("DV_WEB_XPL_CARD_REFACTOR_LAUNCH_797138").isOn?i.createElement(Ld,e):i.createElement(kd,e))),Pd="+OSZzQ",Dd="YxKE01",Sd="LLws87",xd="EPBbt1",Md="Ml46ZK",Nd=(e,t)=>{if("FORCE_CLOSE"===t.event)return null;const{cardIndex:n,event:a}=t;return"BLUR"===a?e===n?null:e:n},Rd=({children:e})=>{const{isTouchDevice:t}=i.useContext(N),{isCarouselHovered:n,isCarouselFocused:a,isHoveringNavArrows:r,state:o,scrollToCard:l,hasCircleCard:s}=i.useContext(_e),c=i.useContext(se),[d,u]=i.useReducer(Nd,null),{isSsmOpen:m}=i.useContext(pl),[p,g]=i.useState(!t),h=i.useRef(),[f,y]=i.useState(!1),b=i.useRef();i.useEffect((()=>{clearTimeout(b.current),null===d?f&&(b.current=window.setTimeout((()=>y(!1)),100)):y(!0)}),[d]);const[E,C]=i.useState(!1);i.useEffect((()=>{const e=c.connected&&c.isScrolling;C(!!((n||a||e)&&!(r&&!e)))}),[n,a,c.connected&&c.isScrolling,r]),i.useEffect((()=>{E||m||u({event:"FORCE_CLOSE"})}),[E,m]),i.useEffect((()=>{let e;e=!t&&(!E&&!s),p!==e&&(clearTimeout(h.current),e?l(o.min):g(!1))}),[E]);const _=i.useCallback((e=>{m||u(e)}),[m]);i.useEffect((()=>{m||u({event:"FORCE_CLOSE"})}),[m]);const T=i.useMemo((()=>({connected:!0,cardIndexWithMiniDetails:d,actions:{reportHoverOrFocusEvent:_}})),[d,_]);return i.createElement("div",{className:v({[Sd]:f})},i.createElement(Is.Provider,{value:T},e))},Ad="CUqrUf",Od="whIpcm",Vd="fAKy1i",Wd="o86fri",Bd="wtkZWr",Gd="u-vmzo",Hd="JwLRN-",jd=({title:e,facetText:t,offerType:n,entitlementType:a,children:r,className:o,icon:l})=>{const s=e.trim();if(!s)return null;let c;if("SVOD"===n)c=i.createElement("div",{className:Od},t&&i.createElement(Oe.Text,{testID:"svod-facet-text",string:t,tag:"span",className:h()(Bd,Vd,Gd)}),i.createElement("span",{"data-testid":"carousel-title",className:h()({[Hd]:l})},s),l);else{const e="NotEntitled"===a;c=i.createElement("div",{className:h()(Od,{[Wd]:e})},t&&i.createElement(i.Fragment,null,i.createElement(Oe.Text,{testID:"facet-text",string:t,tag:"span",className:h()(Vd)}),i.createElement(Oe.Text,{string:":",tag:"span",className:h()(Gd)})),i.createElement("span",{"data-testid":"carousel-title",className:h()({[Hd]:l})},s),l)}return i.createElement(jr,{className:h()(Ad,o)},c,r)};var $d=n("./node_modules/@amzn/dvui/dist/Icons/LinkArrow.js"),zd=n.n($d);const Fd="KJx9ci",Ud="GnSDwP",qd=e=>i.createElement("a",{href:e.url,"aria-label":null==e?void 0:e.label,className:v(Fd,null==e?void 0:e.className),"data-testid":"see-more"},i.createElement("span",{className:Ud},null==e?void 0:e.label),i.createElement(zd(),null)),Kd="TzubWf",Qd="JwNGgp",Zd=e=>{var t;const n=null!==(t=e.text)&&void 0!==t?t:e.title;if(n){var a,r;const t=null==e?void 0:e.entitlementCues,o=null==t?void 0:t.entitledCarousel,l=null==t?void 0:t.offerType,s=e.seeMoreLink,c=null==e?void 0:e.facetText,d=e.seeMore,u=d&&"Inline"===(null==d?void 0:d.displayPlacement)||!d&&s;return i.createElement("section",{className:Kd,"data-entitled":"Entitled"===o},i.createElement(jd,{title:n,facetText:c,entitlementType:o,offerType:l},u?i.createElement(qd,{url:null!==(a=null==d?void 0:d.link.url)&&void 0!==a?a:s.url,label:null!==(r=null==d?void 0:d.link.label)&&void 0!==r?r:s.label,className:"NotEntitled"===o&&"SVOD"!==l?Qd:void 0}):void 0))}return null},Jd=1.5,Xd=2,Yd=3,eu=4,tu=5,nu=5,au=6,iu=({entities:e,seeMore:t,actions:n,enrichments:a,header:r,otherWrapperClassName:o})=>{const{isTouchDevice:l,pageWidth:s,hasPageMounted:c,isMiniDetailsMobileOn:d,isContentDensityExperimentOn:u}=i.useContext(N),{hasMoreItems:m}=i.useContext(_E),p=i.useRef(Object.values(e).some((e=>{var t;return!(null===(t=e.entitlementCues)||void 0===t||null===(t=t.glanceMessage)||void 0===t||!t.message)}))),g=i.useCallback((()=>{if(u){let e=au;return sc.is(lc.PHONE_PORTRAIT)?e=Jd:sc.is(lc.TABLET_SMALL)?e=Xd:sc.is(lc.TABLET)?e=Yd:sc.is(lc.LAPTOP)?e=eu:sc.is(lc.DESKTOP)&&(e=nu),e}{let e=tu;return sc.is(lc.PHONE_PORTRAIT)?e=Jd:sc.is(lc.TABLET_SMALL)?e=Xd:sc.is(lc.TABLET)?e=Yd:sc.is(lc.LAPTOP)&&(e=eu),e}}),[]),[h,f]=i.useState(c?g():u?au:tu);let y,b;i.useEffect((()=>{f(g())}),[]),i.useEffect((()=>{f(g())}),[s]);const E=()=>{var n,a;if(null==t||null===(n=t.backgroundImage)||void 0===n||!n.url||null==t||null===(a=t.link)||void 0===a||!a.url)return e;const i={images:{cover:{url:t.backgroundImage.url}},link:{url:t.link.url,label:t.link.label}},r=JSON.parse(JSON.stringify(e));return"Start"===t.displayPlacement?(r.unshift(i),y=2):"End"!==t.displayPlacement||m||(r.push(i),b=e.length),r},[C,_]=i.useState(E());i.useEffect((()=>_(E())),[e]);const T=i.useCallback((t=>{if(l&&!d)return;const a=e.filter(((e,n)=>t.has(n+1)));if(a.length>0){const e=a.filter((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID})).map((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID}));n.getEnrichments(e)}}),[l,e,n]),k=i.useCallback(((e,n,r)=>{var o,l;const s="Start"===(null==t?void 0:t.displayPlacement)&&0===r||"End"===(null==t?void 0:t.displayPlacement)&&r===C.length-1&&!m;return i.createElement(Id,{card:e,isVisible:n,enrichment:null==a?void 0:a[null!==(o=null!==(l=e.entityID)&&void 0!==l?l:e.titleID)&&void 0!==o?o:""],index:r,renderGlanceSpaceIfNoGlanceMessage:p.current,isCircle:s,wrapperClassName:v({[Md]:s})})}),[a]);return i.createElement(ce,null,i.createElement(Ae,{className:Dd,wrapperClassName:v(Pd,o),navigation:xe.Framed,"data-card-total-count":C.length,cards:C,cardsVisibilityThreshold:.3,customCarouselContainer:Rd,header:r,renderCard:k,performantRender:{maxCardNum:h,onFirstTimeCardRender:T,startIndexForVirtualisation:y,endIndexForVirtualisation:b},testID:"standard-carousel",hasCircleCard:y||b}))},ru=()=>i.createElement(_E.Consumer,null,(({container:e,actions:t,enrichments:n})=>i.createElement(iu,{entities:e.entities,seeMore:e.seeMore,actions:t,header:Zd(e),enrichments:n})));ru.displayName="StandardCarousel";const ou=ru,lu={grid:"bv3JXH","grid-container":"dvzqmw",carousel:"ZPsSO2",cards:"bQ4KjJ",card:"NU0PPr",StandardHero:"i2gTNg",Nodes:"vPL+Wp",container:"hLPm0W",mobileCard:"gUb7Qp",backgroundImageWrapper:"C81Ge2",IntermissionHeroBackgroundImageWrapper:"b9HgDO",videoPlaying:"LSqtDy",notVisibleInCarousel:"_3gHUdf",backgroundTrailer:"wrUgu5",backgroundTrailerVignette:"bwragx",backgroundImage:"bNPVex",backgroundImageVignette:"NAHZF5",IntermissionHeroBackgroundImageVignette:"zt0E9q",mobileBackgroundImageVignette:"_0X6bes",detailPageLink:"_2eO272",touchDeviceCard:"zDj22O",nonTouchDeviceCard:"ql6HCx",aspectRatioWrapper:"aoQ9tU"},su="DYBas-",cu="kw3QkO",du="Zgte-n",uu="+cAQM8",mu="hj9oUW",pu="Dh0fsf",gu="AIBqlu",vu="buzKCX",hu="Ozxx6Y",fu="_8qiQr1",yu="YQI101",bu="R1vcpH",Eu="xcP7NY",Cu="yCgBRs",_u="JBK4DO",Tu="K8HVp6",ku="G3NyeE",wu="mPCC-I",Lu="zEXseC";var Iu=n("./node_modules/@amzn/dvui/dist/Icons/Add.js");const Pu="y3gsEM",Du="gPlQH3",Su="kb934y",xu="iQQ3TD",Mu=({titleId:e,playbackAction:t,playbackGroup:n,streamSelectorProps:a,promotedAcquisitionGroup:r,link:o,withTransparentIcons:l=!1,useCircularPlayButton:s=!0,className:c,carouselRefTag:d,parentElement:u})=>{const{getString:m}=i.useContext(N),{container:p}=i.useContext(_E),g=m("DV_WEB_MORE_DETAILS"),h=null==o?void 0:o.url,f="StandardHero"===p.containerType||"SuperCarousel"===p.containerType||"TentpoleHero"===p.containerType||"Charts"===p.containerType,y=null==r?void 0:r.label,b=f&&y?g:y,E=!t&&h,C=t&&h,_=()=>{u&&Aa.logManualImpression(u,"Select")};return i.createElement("div",{className:v(Pu,c)},t&&i.createElement("div",{className:Du},i.createElement(Tl,{buttonVariant:s?_l.Circular:_l.Square,playbackAction:t,playbackGroup:n,streamSelectorProps:a,label:t.label,titleId:e,carouselRefTag:d})),E&&i.createElement(Ur.PrimaryButton,{href:h,testID:b?"promotion":"details",className:xu,onClick:_},null!=b?b:g),e&&i.createElement(Nu,{titleId:e,withTransparentIcons:l,carouselRefTag:d}),C&&i.createElement(ht,{icon:i.createElement(Er.Info,null),href:h,isTransparentBackground:l,label:m("DV_WEB_DETAILS_TOOLTIP"),testID:"details",onSecondaryButtonClick:_}))},Nu=e=>{const{actions:t,enrichments:n}=i.useContext(_E),{getString:a}=i.useContext(N),r=e.titleId;if(r){var o;const s=null===(o=n[r])||void 0===o?void 0:o.watchlistAction;if(s){var l;const o="Remove"===s.tag,c=n=>{t.onWatchlistToggle(n,r,e.carouselRefTag)},d=o||null===(l=n[r])||void 0===l||null===(l=l.recordSeason)||void 0===l||null===(l=l.watchlistAddon)||void 0===l?void 0:l.tooltipText;return i.createElement(ht,{icon:o?i.createElement(yr.Tick,null):i.createElement(Iu.Add,null),className:Su,isTransparentBackground:e.withTransparentIcons,onSecondaryButtonClick:c,isDisabled:!r,ariaLabel:"string"==typeof s.text?s.text:s.text.string,label:d||a("DV_WEB_WATCHLIST_TOOLTIP"),testID:o?"watchlist-remove":"watchlist-add"})}}return null};function Ru(){return Ru=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ru.apply(this,arguments)}const Au=({displayTitle:e,playbackAction:t,playbackGroup:n,promotedAcquisitionGroup:a,link:r,highValueMessage:o,focusMessage:l,contentMaturityRating:s,maturityRatingBadge:c,titleID:d,isCardActive:u,images:m,liveEventMetadata:p,enrichmentAttempted:g,carouselRefTag:h,shouldLazyLoadImage:f,parentElement:y})=>{var b,E;const{providerLogo:C,titleLogo:_}=m||{},{isInResiliencyMode:T,isDesktopDeviceVariant:k}=i.useContext(N),{container:{entities:w,containerType:L},resiliencyCxMode:I}=i.useContext(_E),P=!w.some((e=>e.titleID))||T||"TENTPOLE"===I,D=g||P,S="IntermissionHero"===L,x={eventTitle:e,triggerLocation:"StandardHero",liveInfo:p},M=(0,V.h)()("DV_WEB_FABLE_BADGE_MIGRATION_708245"),R=i.createElement("div",{className:v(Eu,{[cu]:!k})},(l||c||s)&&i.createElement("div",{className:v(yu,{[cu]:!k})},l&&i.createElement(nt,{icon:l.icon,message:l.message,className:v({[wu]:!k}),labelClassName:v({[wu]:!k,[Lu]:!k})}),c?M.isT1?i.createElement(Jl.MaturityRating,{rating:c.displayText,locale:null===(b=c.countryCode)||void 0===b?void 0:b.toLowerCase(),logoUrl:c.logoUrl,title:c.description,ariaLabel:c.description,className:bu}):i.createElement(Ol.AgeRating,{rating:c.displayText,locale:null===(E=c.countryCode)||void 0===E?void 0:E.toLowerCase(),logoUrl:c.logoUrl,title:c.description,ariaLabel:c.description,className:bu}):s&&i.createElement(Fl,Ru({},s,{className:bu}))),k&&i.createElement(Mu,{className:v(Cu,{[ku]:D}),playbackAction:t,playbackGroup:n,streamSelectorProps:x,link:r,titleId:d,promotedAcquisitionGroup:a,useCircularPlayButton:!S,carouselRefTag:h,parentElement:y})),A=void 0!==(null==_?void 0:_.url);return i.createElement("section",{className:v(su,{[Tu]:u,[cu]:!k}),"data-testid":"title-details"},(null==o?void 0:o.message)&&k&&i.createElement(Ul,{message:o.message,className:v(vu)}),p&&k&&("UPCOMING"===p.status?i.createElement(Wr,{className:v(hu)},p.timeBadge):i.createElement(nc,{liveInfo:p,className:v(fu)})),e&&i.createElement(ns,{title:e,headingLevel:ts.Mega,headingClassName:v(_u,{[pu]:A,[cu]:A&&!k,[du]:!A,[uu]:!A&&!k,[mu]:!A&&p}),titleLogoOptions:_?{url:_.url,shouldLazyLoadImage:f}:void 0,providerLogoOptions:C&&k?{url:C.url,alt:C.alternateText,wrapperClassName:v(_u,gu),shouldLazyLoadImage:f}:void 0,url:null==r?void 0:r.url,titleID:d,baseValue:1e3,parentElement:y}),R)};function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ou.apply(this,arguments)}const Vu=[1440,2160,2880,3840],Wu=[720,1080,1440,1920],Bu=({images:e,displayTitle:t,isVisibleInCarousel:n,size:a,link:r,titleID:o,entitlementCues:l,index:s,refMarker:d,widgetType:u,liveInfo:m,contentMaturityRating:p,maturityRatingBadge:g,playbackActions:h,itemAnalytics:f,shouldAutoRotate:y,prerolls:b,setAutoRotateActive:E,isDynamicMobileCard:C})=>{var _,T,w;const L=i.useRef(null),I=i.useRef(),[P,D]=i.useState(!1),[S,x]=i.useState(Jn.Init),{container:{impressionData:M,containerType:R},enrichments:A,enrichmentAttempted:O,isTrailerAutoplayEnabled:V,index:W,consumingWidgetType:B}=i.useContext(_E),{logger:G}=(0,c.L1)(),H=pc(B,R,W,s),j=A[null!=o?o:""],{promotedAcquisitionGroup:$}=null!=j?j:{},z="IntermissionHero"===R,F=z&&b?b:null==j?void 0:j.prerolls,U=rc(h,j),q=oc(j),K=void 0===j||C?l:j.entitlementCues,Q=C?null==K?void 0:K.compactFocusMessage:null==K?void 0:K.focusMessage,{isCarouselVisible:Z}=i.useContext(_e),{isPageVisible:J,pageWidth:X,isDesktopDeviceVariant:Y,isTouchDevice:ee,shouldUseReducedMotion:te,isPlayerVisible:ne,isTouchEnabledWindowsDevice:ae}=i.useContext(N),[ie,re]=i.useState(!1),[oe,le]=i.useState(!0),{isSsmOpen:se}=i.useContext(pl),{touchMiniDetailsModalListeners:ce,isMiniDetailsModalVisible:de,dismissMiniDetailsModal:ue,removeContextMenuClass:me,removeDragAnimationClass:pe,link:ge}=fc(void 0!==o,r);i.useEffect((()=>{re(n&&Z&&J)}),[n,Z,J]);const ve=null==e||null===(_=e.hero)||void 0===_?void 0:_.url,he=i.useCallback((e=>{const t=null==L?void 0:L.current;t||e===t?t&&!e&&Aa.unobserve(t):M&&ve&&u&&d&&e&&Aa.observe(e,{collectionImpressionData:M,titleID:o,imageURL:ve,refMarker:d,widgetType:u,carouselPosition:W,itemPosition:s,itemAnalytics:f}),L.current=e}),[]),{state:fe,scrollToCard:ye}=i.useContext(_e),be=()=>{const e=s+1+1;e>a?(E(!1),ye(1)):ye(e)};i.useEffect((()=>{0}),[X]),i.useEffect((()=>{le(sc.isAtleast(ee?lc.DESKTOP:lc.LAPTOP))}),[X,ee]);const Ee=F&&oe&&V;i.useEffect((()=>{if(!(te||ne||se||!y||de)){if(ie){var e,t;const n=null!==(e=null===(t=L.current)||void 0===t?void 0:t.matches(":hover"))&&void 0!==e&&e;if(Ee){if(!P)if([Jn.Stop,Jn.Error].includes(S)){const e=S===Jn.Error?3e3:n?5e3:1e3;I.current=window.setTimeout((()=>{be()}),e)}else S===Jn.Init&&clearTimeout(I.current)}else I.current=window.setTimeout((()=>be()),5e3)}else clearTimeout(I.current);return()=>clearTimeout(I.current)}}),[ie,P,te,S,se,y,de]),i.useEffect((()=>{(te||ne)&&clearTimeout(I.current),E(!te&&!ne)}),[te,ne]),i.useEffect((()=>{ve||(G.count("MissingImageStandardHeroCard",1,!1),k.c.count("MissingImageStandardHeroCard"),G.warn(`Missing hero image in StandardHeroCard for title ${o}`))}),[]);const Ce=()=>{null!=L&&L.current&&Aa.logManualImpression(null==L?void 0:L.current,"Select")},Te=i.useMemo((()=>i.createElement("a",{href:null==ge?void 0:ge.url,className:v(lu.detailPageLink,{[lu.mobileCard]:!Y}),"data-testid":"image-link",onClick:Ce,"aria-label":t},t)),[ge,lu,Ce,t]);return i.createElement("article",Ou({ref:he,className:v(lu.container,me,{[lu.notVisibleInCarousel]:!n,[lu.videoPlaying]:Ee&&P,[lu.mobileCard]:!Y,[lu.touchDeviceCard]:ee,[lu.nonTouchDeviceCard]:!ee})},ce,{"data-testid":z?"intermission-hero-card":"standard-hero-card"}),i.createElement("div",{className:v(lu.aspectRatioWrapper,lu.grid)},ve&&i.createElement(i.Fragment,null,i.createElement(Ca,{alt:null==e||null===(T=e.hero)||void 0===T?void 0:T.alternateText,src:ve,imageClassName:v({[lu.backgroundImage]:!z},pe),wrapperClassName:z?lu.IntermissionHeroBackgroundImageWrapper:lu.backgroundImageWrapper,aspectRatio:Y&&!z?yt.ThreeByOne:yt.SixteenByNine,sizesOptions:{defaultSrcSize:Y?2260:815,srcSizes:[{"max-tablet-lowest":400},{"max-laptop-lowest":815},{"max-desktop-lowest":1300},{"max-desktop-hd-lowest":1650},{"max-desktop-uhd-lowest":2260}]},srcSetWidths:Y?Vu:Wu,baseValue:Y?2880:1440,shouldLazyLoad:H,debugID:o}),(Y||C||z)&&i.createElement("div",{className:v({[lu.IntermissionHeroBackgroundImageVignette]:z,[lu.backgroundImageVignette]:!z&&Y,[lu.mobileBackgroundImageVignette]:!z&&!Y}),"data-testid":"background-image-vignette"})),(null==ge?void 0:ge.url)&&Te,(Y||C||z)&&i.createElement(Au,{displayTitle:t,link:ge,titleID:o,playbackAction:U,playbackGroup:q,highValueMessage:null==K?void 0:K.highValueMessage,focusMessage:Q,contentMaturityRating:p,maturityRatingBadge:g,images:e,isCardActive:ie,promotedAcquisitionGroup:$,liveEventMetadata:m,enrichmentAttempted:O,carouselRefTag:d,shouldLazyLoadImage:H,parentElement:L.current}),de&&i.createElement(is,{titleID:o,playbackAction:U,playbackGroup:q,displayTitle:t,watchlistAction:null==j?void 0:j.watchlistAction,trailer:null==j?void 0:j.trailer,contentMaturityRating:p,maturityRatingBadge:g,isTouchEnabledWindowsDevice:ae,recordSeasonTooltipText:null==j||null===(w=j.recordSeason)||void 0===w||null===(w=w.watchlistAddon)||void 0===w?void 0:w.tooltipText,showTouchModal:de,dismissTouchModal:ue,detailsPageUrl:null==ge?void 0:ge.url}),Ee&&ie&&!ne&&i.createElement(ia,{key:o,canPlay:!0,delay:2e3,placement:zt.StandardHero,playback:aa.Restart,prerolls:F,onStateChange:x,playing:D,className:lu.backgroundTrailer,playerIsActive:!1,link:P?null==ge?void 0:ge.url:void 0,draperParentListeners:{onClick:Ce},videoFadeOverlayClassname:lu.backgroundTrailerVignette,refMarker:d,titleID:o})))};Bu.displayName="StandardHeroCard";const Gu=(0,s.s6)(Bu),Hu="jVpjZD",ju="cIbiJK",$u="Dz+gPK";function zu(){return zu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zu.apply(this,arguments)}const Fu=({index:e,isActive:t,handleNavigation:n})=>{const a=i.useCallback((()=>n(e)),[e,n]);return i.createElement("li",zu({"aria-hidden":!0,className:v(ju,{[$u]:t}),onClick:a},t&&{"data-testid":"active-dot"}))},Uu=({size:e,handleNavigation:t,activeIndex:n,className:a})=>{const r=[];for(let a=1;a<=e;++a)r.push(i.createElement(Fu,{key:a,index:a,isActive:n===a,handleNavigation:t}));return i.createElement("ul",{className:v(Hu,a),"data-testid":"navigation-slider","aria-hidden":!0},r)},qu="_9SL+k6",Ku="PkqXx3";function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Qu.apply(this,arguments)}const Zu=({size:e})=>{const{state:t,scrollToCard:n}=i.useContext(_e);return i.createElement("div",{className:qu},i.createElement(Uu,{size:e,handleNavigation:n,activeIndex:t.min}))},Ju=({isDynamicMobileVariant:e})=>{const{actions:t,container:n}=i.useContext(_E),[a,r]=i.useState(!0),o=n.entities,l=o.length>0,s="IntermissionHero"===n.containerType,c=s?Zd(n):null;i.useEffect((()=>{const e=o.filter((e=>e.titleID)).map((e=>e.titleID));t.getEnrichments(e,void 0,!s,!s)}),[l]);const d=i.useCallback(((t,n,l)=>i.createElement(Gu,Qu({shouldAutoRotate:a,setAutoRotateActive:r,isVisibleInCarousel:n,isDynamicMobileCard:e,index:l},t,{size:o.length}))),[a]);return i.createElement(Ae,{cards:o,navigation:xe.Regular,className:pe,wrapperClassName:Ku,header:s?c:null,renderCard:d,carouselVisibilityThreshold:.7,footer:o.length>1&&i.createElement(Zu,{size:o.length}),testID:s?"intermission-hero":"standard-hero"})};Ju.displayName="StandardHero";const Xu=Ju,Yu="WKVLn6",em="w93mn5",tm="Tspi18",nm="_76wgdZ",am="ZJ+MZQ",im="LKIkHM",rm="xzH5Px",om="wcr54O",lm="sIyVVJ",sm="JAd8bO",cm="t4tVxF",dm="_0sEABY",um="anunnx",mm="CPHis2",pm="_2CfE4M",gm="ECbJrQ",vm="Z0msKX",hm="_5Weo1T",fm="hkAVQf",ym="+a4baI",bm="VZKXTg",Em="cVuct3",Cm=[1080,2160,2880,3840],_m=[1e3,1125,1500,2e3],Tm=({url:e,ariaLabel:t,shouldBeVisible:n,shouldLazyLoadImage:a,titleID:r})=>{const{isDesktopDeviceVariant:o,isTabletDeviceVariant:l}=i.useContext(N),s=!o&&!l;return i.createElement("div",{className:h()(mm,n?fm:hm,{[pm]:l,[gm]:s}),"data-testid":"tentpole-hero-image"},i.createElement(Ca,{alt:t,src:e,aspectRatio:o?yt.SixteenByNine:yt.TwoByThree,sizesOptions:{defaultSrcSize:o?2400:880,srcSizes:[{"max-tablet-lowest":450},{"max-laptop-lowest":880},{"max-desktop-lowest":1400},{"max-desktop-hd-lowest":1800},{"max-desktop-uhd-lowest":2400}]},srcSetWidths:o?Cm:_m,baseValue:o?2880:1500,imageClassName:vm,shouldLazyLoad:a,debugID:r}),i.createElement("div",{className:o?ym:l?Em:bm}))},km="FmypN+",wm="zLJeeH",Lm="_4dHokH",Im="vQLwG0",Pm="PtNZ1f",Dm="INNVnS",Sm="LQhFNd",xm="ricmob",Mm="zsirBJ",Nm="JEptkj",Rm="Rld4qj",Am="hd+LCp",Om="jrYMAX",Vm="PfW69h",Wm="gzWYBG",Bm="JWMhG0",Gm="BJGaIn",Hm="fDle0A",jm="_5GvTVc",$m="-a84F4",zm="N+2-zX",Fm="obgSGX",Um="Z01qGr",qm="pXqVOQ",Km=e=>{var t,n,a,r;const{isDesktopDeviceVariant:o,isTabletDeviceVariant:l}=i.useContext(N),{containerItem:c,highValueMessage:d,trailerState:u,detailPageLink:m}=e,p=null===(t=c.images)||void 0===t?void 0:t.titleLogo,g=null===(n=c.images)||void 0===n?void 0:n.providerLogo,h=u===Jn.Play,f=null!==(a=null===(r=(0,s.G4)().render)||void 0===r?void 0:r.isRTL)&&void 0!==a&&a;return i.createElement("div",{className:v(Lm,{[Im]:h})},i.createElement("div",{className:v(Pm,{[Dm]:h})},(null==d?void 0:d.message)&&i.createElement(Ul,{message:d.message})),i.createElement("div",{className:Sm},i.createElement(nc,{liveInfo:e.containerItem.liveInfo,className:xm})),c.displayTitle&&i.createElement(ns,{title:c.displayTitle,baseValue:1e3,headingLevel:ts.Mega,headingClassName:v(Rm,{[Am]:null==p?void 0:p.url,[Vm]:!(null!=p&&p.url),[Wm]:h}),titleLogoOptions:p?{url:p.url,shouldLazyLoadImage:e.shouldLazyLoadImage}:void 0,providerLogoOptions:g?{url:g.url,wrapperClassName:v(Om,{[Wm]:h}),alt:g.alternateText,shouldLazyLoadImage:e.shouldLazyLoadImage}:void 0,url:m,titleID:c.titleID,parentElement:e.parentElement}),(o||l)&&c.synopsis&&i.createElement(Ql,{synopsis:c.synopsis,className:v(Mm,{[Nm]:h&&!f})}))},Qm=e=>{var t,n;const{isDesktopDeviceVariant:a,isTouchDevice:r}=i.useContext(N),{enrichmentAttempted:o}=i.useContext(_E),l={eventTitle:e.containerItem.displayTitle,triggerLocation:"TentpoleHero",liveInfo:e.containerItem.liveInfo},s=(0,V.h)()("DV_WEB_FABLE_BADGE_MIGRATION_708245");return i.createElement("div",{className:v(km,{[Um]:e.isContainerActive}),"data-testid":"title-details"},i.createElement("div",{className:v(wm,{[Fm]:e.trailerState===Jn.Play})},i.createElement(Km,e),i.createElement("div",{className:v(Bm,{[Gm]:e.trailerState===Jn.Play})},i.createElement("div",{className:v(Hm)},i.createElement("div",{className:$m},i.createElement(nt,e.focusMessage),e.containerItem.maturityRatingBadge?s.isT1?i.createElement(Jl.MaturityRating,{rating:e.containerItem.maturityRatingBadge.displayText,locale:null===(t=e.containerItem.maturityRatingBadge.countryCode)||void 0===t?void 0:t.toLowerCase(),logoUrl:e.containerItem.maturityRatingBadge.logoUrl,title:e.containerItem.maturityRatingBadge.description,ariaLabel:e.containerItem.maturityRatingBadge.description}):i.createElement(Ol.AgeRating,{rating:e.containerItem.maturityRatingBadge.displayText,locale:null===(n=e.containerItem.maturityRatingBadge.countryCode)||void 0===n?void 0:n.toLowerCase(),logoUrl:e.containerItem.maturityRatingBadge.logoUrl,title:e.containerItem.maturityRatingBadge.description,ariaLabel:e.containerItem.maturityRatingBadge.description}):e.containerItem.contentMaturityRating&&i.createElement(Fl,e.containerItem.contentMaturityRating)),i.createElement(Mu,{playbackAction:e.playbackAction,playbackGroup:e.playbackGroup,titleId:e.containerItem.titleID,streamSelectorProps:l,link:e.containerItem.link,promotedAcquisitionGroup:e.promotedAcquisitionGroup,withTransparentIcons:!a||r,useCircularPlayButton:a&&!r,className:v(jm,{[zm]:!a||r,[qm]:o}),carouselRefTag:e.containerItem.refMarker,parentElement:e.parentElement})))))},Zm=["StandardCarousel","SuperCarousel","Nodes"],Jm=()=>{var e,t,n,a;const{pageWidth:r,isDesktopDeviceVariant:o,isTabletDeviceVariant:l,isPageVisible:s,isPlayerVisible:d}=i.useContext(N),{actions:u,container:m,enrichments:p,isTrailerAutoplayEnabled:g,nextContainer:h,consumingWidgetType:f,index:y}=i.useContext(_E),{logger:b}=(0,c.L1)(),[E,C]=i.useState(!1),[_,T]=i.useState(!1),[w,L]=i.useState(!1),[I,P]=i.useState(void 0),D=i.useRef(null),S=i.useRef(null),x=i.useRef(!1),M=null===(e=m.entities)||void 0===e?void 0:e[0],R=(null==M?void 0:M.titleID)||"",A=null==p?void 0:p[R],O=null==A?void 0:A.prerolls;i.useEffect((()=>{const e=m.entities.filter((e=>e.titleID)).map((e=>e.titleID));u.getEnrichments(e)}),[]),i.useEffect((()=>{x.current=sc.isSmallerThan(lc.LAPTOP)}),[r]),i.useEffect((()=>{C(_&&s)}),[_,s]);const V=i.useCallback((([{isIntersecting:e,intersectionRatio:t}])=>{T(e&&t>=.7)}),[]);(0,Ee.S)({enabled:!0,target:D,onIntersect:V,threshold:.7});const W=!o&&!l,B=w?sm:cm,G=Zm.includes((null==h?void 0:h.containerType)||""),H=G?am:em,j=G?rm:im,$=!I||[Jn.Init,Jn.Stop,Jn.Pause,Jn.Error].includes(I),z=null!==(t=null==A?void 0:A.entitlementCues)&&void 0!==t?t:M.entitlementCues,F=null==M||null===(n=M.images)||void 0===n||null===(n=n.hero)||void 0===n?void 0:n.url,U=null==M||null===(a=M.link)||void 0===a?void 0:a.url;i.useEffect((()=>{F||(b.count("MissingImageTentpoleHero",1,!1),k.c.count("MissingImageTentpoleHero"),b.warn(`Missing hero image in TentpoleHero for title ${R}`))}),[]);const q=i.useCallback((e=>{const t=null==S?void 0:S.current;!t&&e?m.impressionData&&F&&null!=M&&M.widgetType&&null!=M&&M.refMarker&&e&&Aa.observe(e,{collectionImpressionData:m.impressionData,titleID:R,imageURL:F,refMarker:null==M?void 0:M.refMarker,widgetType:null==M?void 0:M.widgetType,carouselPosition:y,itemPosition:1,itemAnalytics:null==M?void 0:M.itemAnalytics}):t&&!e&&Aa.unobserve(t),S.current=e}),[]),K=()=>{null!=S&&S.current&&Aa.logManualImpression(null==S?void 0:S.current,"Select")},Q=pc(f,m.containerType,y,-1);return i.createElement("section",{"data-testid":"tentpole-hero",className:v(Yu),ref:D},i.createElement("div",{className:v(H,{[nm]:l,[tm]:W}),"data-testid":"tentpole-hero-content",ref:q},F&&i.createElement(Tm,{url:F,ariaLabel:null==M?void 0:M.title,shouldBeVisible:$,shouldLazyLoadImage:Q,titleID:R}),U&&!w&&i.createElement("a",{href:U,className:v(j,{[nm]:l,[tm]:W}),onClick:K,"data-testid":"image-link"},M.displayTitle),o&&i.createElement(i.Fragment,null,O&&!x.current&&g&&E&&!d&&i.createElement(ia,{key:R,className:v(om,B),canPlay:!0,delay:2e3,playback:aa.Restart,playing:L,prerolls:O,onStateChange:P,placement:zt.TentpoleHero,link:w?U:void 0,playerIsActive:!1,refMarker:M.refMarker,titleID:M.titleID,draperParentListeners:{onClick:K}}),i.createElement("div",{className:v(lm,B)})),i.createElement("div",{className:v(um,dm)},i.createElement(Qm,{containerItem:M,isContainerActive:E,playbackAction:ic(M,A),playbackGroup:oc(A),highValueMessage:null==z?void 0:z.highValueMessage,focusMessage:null==z?void 0:z.focusMessage,promotedAcquisitionGroup:null==A?void 0:A.promotedAcquisitionGroup,trailerState:I,detailPageLink:U,shouldLazyLoadImage:Q,parentElement:S.current}))))},Xm="GpKcvg",Ym="NAtV-m",ep="Zsox55",tp="_4HpUvK",np="EpXO-Z";let ap=function(e){return e[e.Show=0]="Show",e[e.TrailerPlaying=1]="TrailerPlaying",e[e.TrailerFinished=2]="TrailerFinished",e[e.Hidden=3]="Hidden",e[e.Error=4]="Error",e}({});const ip=(e,t)=>`${e}->${t}`,rp=new Set([ip(ap.Show,ap.TrailerPlaying),ip(ap.TrailerPlaying,ap.TrailerFinished),ip(ap.TrailerFinished,ap.Hidden),ip(ap.Hidden,ap.Show),ip(ap.Show,ap.Hidden),ip(ap.TrailerPlaying,ap.Hidden),ip(ap.Show,ap.Error),ip(ap.TrailerPlaying,ap.Error),ip(ap.Error,ap.Hidden)]);function op(e,t){return rp.has(ip(e,t))?t:e}const lp=[720,1080,1440,1920],sp=({imageUrl:e,ariaLabel:t,state:n,shouldLazyLoadImage:a,titleID:r})=>{const o=[ap.Show,ap.TrailerFinished,ap.Error].includes(n)?np:tp,l=h()(Xm,o);return i.createElement("div",{className:l,"data-testid":"backgroundImage"},i.createElement(Ca,{alt:t,src:e,imageClassName:Ym,aspectRatio:yt.SixteenByNine,sizesOptions:{defaultSrcSize:2400,srcSizes:[{"max-tablet-lowest":450},{"max-laptop-lowest":880},{"max-desktop-lowest":1400},{"max-desktop-hd-lowest":1800},{"max-desktop-uhd-lowest":2400}]},srcSetWidths:lp,baseValue:1440,shouldLazyLoad:a,debugID:r}),i.createElement("div",{className:ep}))},cp="RXvOVk",dp="lLEXNv",up="_1Tpx9J",mp="TCZGs+",pp="_0qE1LZ",gp="xDJxMc",vp="hA8YWI",hp="RvRXeD",fp="_72MAz3",yp="_0bg6nq",bp="-VYF0N",Ep="_1DUh6D",Cp="cimRsP",_p="_5dRcc7",Tp="Ms1fHj",kp="_20+xJa",wp="_9qBKft",Lp="nTe-n3",Ip="jvC8FO",Pp="WQExo4",Dp="mLMMa3",Sp="EjZ1hc";function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xp.apply(this,arguments)}const Mp=e=>{var t,n,a,r;const{containerItem:o,highValueMessage:l}=e,s=null===(t=o.images)||void 0===t?void 0:t.titleLogo,c=null===(n=o.images)||void 0===n?void 0:n.providerLogo,d=e.state===ap.TrailerPlaying||e.state===ap.Hidden,u=o.categorizedGenres,m=u?[u.primaryGenre,...u.secondaryGenres||[]]:void 0;return i.createElement("div",{className:v(cp,_p,e.state===ap.Hidden?kp:wp)},i.createElement("div",{className:v(pp,{[Pp]:d})},(null==l?void 0:l.message)&&i.createElement(Ul,{message:l.message})),o.displayTitle&&i.createElement(ns,{title:o.displayTitle,baseValue:1e3,headingLevel:ts.Mega,headingClassName:v(fp,{[gp]:null==s?void 0:s.url,[hp]:!(null!=s&&s.url),[Lp]:d,[Ip]:e.state===ap.TrailerFinished}),titleLogoOptions:s?{url:s.url,shouldLazyLoadImage:e.shouldLazyLoadImage}:void 0,providerLogoOptions:c?{url:c.url,wrapperClassName:v(vp,{[Lp]:d,[Ip]:e.state===ap.TrailerFinished}),alt:c.alternateText,shouldLazyLoadImage:e.shouldLazyLoadImage}:void 0,url:null===(a=o.link)||void 0===a?void 0:a.url,titleID:o.titleID,parentElement:e.parentElement}),i.createElement("span",{className:v(yp,{[Dp]:d})},o.customerReviews&&i.createElement($l,{customerReviews:o.customerReviews}),o.maturityRatingBadge?i.createElement(Ol.AgeRating,{rating:o.maturityRatingBadge.displayText,locale:null===(r=o.maturityRatingBadge.countryCode)||void 0===r?void 0:r.toLowerCase(),logoUrl:o.maturityRatingBadge.logoUrl,title:o.maturityRatingBadge.description,ariaLabel:o.maturityRatingBadge.description,className:mp}):o.contentMaturityRating&&i.createElement(Fl,xp({},o.contentMaturityRating,{className:mp})),m&&i.createElement("ol",{className:bp},m.slice(0,3).map((e=>i.createElement("li",{key:e},e))))),o.synopsis&&i.createElement(Ql,{synopsis:o.synopsis,className:v(Ep,{[Sp]:d})}))},Np=e=>i.createElement("div",{className:dp,"data-testid":"title-details"},i.createElement(Mp,e),i.createElement("div",{className:v(Cp)},i.createElement("div",{className:v(Tp,e.state===ap.Hidden?kp:wp)},i.createElement(nt,xp({className:up},e.focusMessage)),i.createElement(Mu,{playbackAction:e.playbackAction,titleId:e.containerItem.titleID,link:e.containerItem.link,promotedAcquisitionGroup:e.promotedAcquisitionGroup,carouselRefTag:e.containerItem.refMarker,parentElement:e.parentElement})))),Rp="OhPFdi",Ap="ervlKf",Op="_8b1OaE",Vp="wJ8-iy",Wp="NSnTtP",Bp="HDvWa4",Gp="dhiDpf",Hp="q2Vjv3",jp="hEaNw+",$p="JyV6ce",zp="Yq5lwT",Fp="UHv3jW",Up="ZMRR6G",qp="_0s-2BE",Kp={numberWrapper:"ZkG5T5",svgNumber0:"ukoo6j",svgNumber1:"Gl+vBx",svgNumber2:"fGf4ej",svgNumber3:"aIIX2v",svgNumber4:"+WkHxJ",svgNumber5:"DZG0Bd",svgNumber6:"M3TwRJ",svgNumber7:"YO2sFH",svgNumber8:"perE98",svgNumber9:"uTXXpm",unselected:"wd1fAu",selected:"mG+ov4",nonDesktopNumber:"_6AsT3F",card:"DQJcsT",wrapper:"jG2zso",packshotWrapper:"aC2GcO"},Qp=e=>{const{isDesktopDeviceVariant:t}=i.useContext(N);return i.createElement("article",{className:Kp.card},i.createElement("button",{className:Kp.wrapper,onClick:t=>e.onClick(t,e.index)},i.createElement("div",{className:h()(Kp.numberWrapper)},i.createElement("span",{className:h()(Kp[`svgNumber${e.index}`],e.isSelected?Kp.selected:Kp.unselected,{[Kp.nonDesktopNumber]:!t})})),i.createElement("span",{className:Kp.packshotWrapper},i.createElement(Id,{card:e,isVisible:!0,isCircle:!1,index:e.index,onWrapperElementChange:e.onWrapperElementChange}))))};var Zp=n("./node_modules/@amzn/dvui/dist/Icons/Top10.js"),Jp=n.n(Zp);function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xp.apply(this,arguments)}const Yp=()=>{var e,t,n,a,r,o,l,s,d;const[u,m]=i.useState(0),[p,g]=i.useState(!1),[h,f]=i.useReducer(op,ap.Show),[y,b]=i.useState(!1),[E,C]=i.useState(Jn.Init),_=i.useRef(),T=i.useRef(),w=i.useRef(null),L=i.useRef(null),I=i.useRef(!1),P=i.useRef(!1),D=i.useRef([]),{actions:S,container:x,enrichments:M,isTrailerAutoplayEnabled:R}=i.useContext(_E),{isPageVisible:A,pageWidth:O,theme:V,shouldUseReducedMotion:W,isDesktopDeviceVariant:B,isPlayerVisible:G}=i.useContext(N),{logger:H}=(0,c.L1)(),[j,$]=i.useState(!0);i.useEffect((()=>{$(y&&A)}),[y,A]);const z=x.entities[u].titleID||"",F=null==M?void 0:M[z],U=null==F?void 0:F.prerolls,q=null===(e=x.entities)||void 0===e?void 0:e[u],K=D.current[u],Q=null==x||null===(t=x.entities)||void 0===t?void 0:t.length,Z=(e,t)=>{D.current[t]=e},J=(e,t)=>{!I.current&&B&&(e.preventDefault(),t!==u&&(clearTimeout(_.current),X(t)))},X=e=>{f(ap.Hidden),T.current=window.setTimeout((()=>{m(e),f(ap.Show)}),300)},Y=i.useCallback((()=>{u===Q-1?(clearTimeout(_.current),g(!1),X(0)):X(u+1)}),[u]),ee=i.useCallback((e=>{e&&h===ap.Show?f(ap.TrailerPlaying):!e&&h===ap.TrailerPlaying&&j?f(ap.TrailerFinished):E===Jn.Error&&f(ap.Error)}),[h,E,j]);i.useEffect((()=>{f(G?ap.Hidden:ap.Show)}),[G]),i.useEffect((()=>{P.current=sc.isLargerThan(lc.DESKTOP_HD),I.current=sc.isSmallerThan(lc.LAPTOP)}),[O]),i.useEffect((()=>{[ap.TrailerFinished,ap.Error].includes(h)&&p&&(_.current=window.setTimeout((()=>{Y()}),h===ap.Error?3e3:1e3))}),[h]),i.useEffect((()=>{p&&M&&Object.keys(M).length&&j?U||(_.current=window.setTimeout((()=>{Y()}),5e3)):clearTimeout(_.current)}),[u,U,p,j]),i.useEffect((()=>{const e=null==x?void 0:x.entities.filter((e=>e.titleID)).map((e=>e.titleID));e.length&&(S.getEnrichments(e),g(!0))}),[]),i.useEffect((()=>{(W||G)&&clearTimeout(_.current),g(!W&&!G)}),[W,G]);const te=i.useCallback((([{isIntersecting:e,intersectionRatio:t}])=>{b(e&&t>=.7)}),[]);(0,Ee.S)({enabled:!0,target:w,onIntersect:te,threshold:.7}),i.useEffect((()=>{j||h!==ap.TrailerPlaying&&h!==ap.TrailerFinished?f(ap.Show):f(ap.Hidden)}),[j]);i.useEffect((()=>{var e;const t=u,n=sc.isLargerThan(lc.DESKTOP_HD)?4:3,a=Math.floor(t/n)*n+1;null===(e=L.current)||void 0===e||e.scrollToCardFirstVisible(a)}),[u]);const ne=i.useCallback(((e,t,n)=>i.createElement(Qp,Xp({index:n,isSelected:u===n,onClick:J,onWrapperElementChange:Z,isVisible:t},e))),[u]),ae=()=>{K&&Aa.logManualImpression(K,"Select")},ie=h===ap.TrailerPlaying,oe=ie?jp:$p,{index:le,consumingWidgetType:se,container:{containerType:ce}}=i.useContext(_E),{containerVisibility:de}=i.useContext(N),ue=((null==de?void 0:de.min)||0)-2<le&&le<((null==de?void 0:de.max)||0)+2,me=pc(se,ce,le,-1),pe=null!==(n=null==F?void 0:F.entitlementCues)&&void 0!==n?n:q.entitlementCues,ge=null==q||null===(a=q.images)||void 0===a||null===(a=a.hero)||void 0===a?void 0:a.url;return i.useEffect((()=>{ge||(H.count("MissingImageChartsBackgroundImage",1,!1),k.c.count("MissingImageChartsBackgroundImage"),H.warn(`Missing hero image in ChartsBackgroundImage for title ${null==q?void 0:q.titleID}`))}),[]),i.createElement("section",{"data-testid":"charts-container",className:Rp},(null==x?void 0:x.title)&&i.createElement(jd,{title:null==x?void 0:x.title,facetText:null==x?void 0:x.facetText,offerType:null==x||null===(r=x.entitlementCues)||void 0===r?void 0:r.offerType,entitlementType:null==x||null===(o=x.entitlementCues)||void 0===o?void 0:o.entitledCarousel,icon:i.createElement(Jp(),null)}),i.createElement("div",{className:v(Wp,{[Bp]:B}),ref:w,"data-testid":"charts-content"},B&&i.createElement(i.Fragment,null,ge&&i.createElement(sp,{imageUrl:ge,ariaLabel:null==q?void 0:q.title,state:h,shouldLazyLoadImage:me,titleID:null==q?void 0:q.titleID}),(null==q||null===(l=q.link)||void 0===l?void 0:l.url)&&!ie&&i.createElement("a",{href:null==q||null===(s=q.link)||void 0===s?void 0:s.url,className:qp,"data-testid":"image-link",onClick:ae},null==q?void 0:q.displayTitle),U&&h!==ap.TrailerFinished&&!I.current&&R&&j&&!G&&i.createElement(ia,{key:z,className:v(Gp,oe),canPlay:!0,delay:2e3,playback:aa.Restart,prerolls:U,playing:ee,placement:zt.ChartsContainer,playerIsActive:!1,link:ie?null==q||null===(d=q.link)||void 0===d?void 0:d.url:void 0,draperParentListeners:{onClick:ae},refMarker:null==q?void 0:q.refMarker,titleID:null==q?void 0:q.titleID,onStateChange:C}),"Store"===V&&ue&&i.createElement("div",{className:Up,"data-testid":"charts-store-glow"})),i.createElement("div",{className:v(Hp,oe)}),i.createElement("div",{className:v({[Ap]:B})},B&&i.createElement("div",{className:v(Vp,Op),"data-testid":"charts-grid"},i.createElement(Np,{containerItem:q,playbackAction:ic(q,F),highValueMessage:null==pe?void 0:pe.highValueMessage,focusMessage:null==pe?void 0:pe.focusMessage,promotedAcquisitionGroup:null==F?void 0:F.promotedAcquisitionGroup,state:h,shouldLazyLoadImage:me,parentElement:K})),i.createElement(Ae,{cards:x.entities,wrapperClassName:zp,navigation:xe.Framed,className:Fp,renderCard:ne,onNavigate:(e,t)=>{g(!1);const n=t.min;if(e===re.Forward)return 1;const a=P.current?4:3;return P.current||8!==n?P.current&&7===n?-2:-a:-1},ref:L,scrollType:Me.FirstVisible,testID:"charts-carousel"}))))},eg="2 / 3",tg="16 / 9",ng="data-active-card",ag="z6Be-S",ig="_9ZO7CZ",rg="NRrJ0c",og="KRgchP",lg="rP-Fu8",sg="UcQ6j5",cg="_75e8mi",dg="d8MkGP",ug="btKtrY",mg="YK5FqF",pg="RGWdWq";function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},gg.apply(this,arguments)}const vg=[720,1080,1440,1920],hg=({imageUrl:e,children:t,titleID:n,...a})=>{const[r,o]=i.useState(void 0),l=i.useMemo((()=>{const e={};return r&&(e.backgroundImage=`url(${r})`),e}),[r]);return i.createElement("div",gg({style:l},a,{"data-testid":"expanded-background-art"}),e&&i.createElement(Ca,{src:e,wrapperClassName:mg,aspectRatio:yt.SixteenByNine,parentListeners:{onLoad:e=>o(e)},sizesOptions:{defaultSrcSize:1150,srcSizes:[{"max-tablet-lowest":550},{"max-laptop-lowest":700},{"max-desktop-lowest":830},{"max-desktop-hd-lowest":830},{"max-desktop-uhd-lowest":1150}]},srcSetWidths:vg,baseValue:1440,shouldLazyLoad:!1,debugID:n}),t)},fg="Yo4IxL",yg="fNAExp",bg="gdaliH",Eg="_4SWWvD",Cg="tnjXrr",_g="h-x9gl",Tg="a6K0J3";function kg(){return kg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kg.apply(this,arguments)}const wg=({entitlement:e,meta:t})=>{var n,a;const r=(0,V.h)()("DV_WEB_FABLE_BADGE_MIGRATION_708245");return i.createElement("footer",{className:fg},e&&i.createElement(nt,{message:e.message,icon:e.icon,className:_g,labelClassName:Tg}),t.customerReviews&&i.createElement($l,{customerReviews:t.customerReviews}),i.createElement("div",{className:yg},t.liveInfo&&i.createElement(i.Fragment,null,i.createElement(nc,{liveInfo:t.liveInfo,testID:"meta-liveliness",className:bg}),i.createElement(Vr,{className:Eg,"data-testid":"meta-date-time"},t.liveInfo.timeBadge)),t.maturityRatingBadge?r.isT1?i.createElement(Jl.MaturityRating,{rating:t.maturityRatingBadge.displayText,locale:null===(n=t.maturityRatingBadge.countryCode)||void 0===n?void 0:n.toLowerCase(),logoUrl:t.maturityRatingBadge.logoUrl,title:t.maturityRatingBadge.description,ariaLabel:t.maturityRatingBadge.description,className:Cg}):i.createElement(Ol.AgeRating,{rating:t.maturityRatingBadge.displayText,locale:null===(a=t.maturityRatingBadge.countryCode)||void 0===a?void 0:a.toLowerCase(),logoUrl:t.maturityRatingBadge.logoUrl,title:t.maturityRatingBadge.description,ariaLabel:t.maturityRatingBadge.description,className:Cg}):t.contentMaturityRating&&i.createElement(Fl,kg({},t.contentMaturityRating,{className:Cg}))))},Lg="zDUKPq",Ig="SjBBuH",Pg="tmvccl",Dg="K0VLBB",Sg=({title:e,link:t,titleId:n,titleLogoUrl:a,entitlement:r,playback:o,playbackGroup:l,promotedAcquisitionGroup:s,meta:c,carouselRefTag:d,shouldLazyLoadImage:u,parentElement:m})=>{const p=e?i.createElement(ns,{title:e,titleLogoOptions:a?{url:a,imageClassName:Dg,shouldLazyLoadImage:u}:void 0,headingClassName:Pg,url:null==t?void 0:t.url,titleID:n,parentElement:m}):null,g={eventTitle:e,triggerLocation:"SuperCarousel",liveInfo:c.liveInfo};return i.createElement("section",{className:v(ug),"data-testid":"card-controls"},p,i.createElement("span",null,i.createElement(Mu,{titleId:n,link:t,playbackAction:o,playbackGroup:l,promotedAcquisitionGroup:s,className:o?Lg:Ig,streamSelectorProps:g,carouselRefTag:d,parentElement:m})),i.createElement(wg,{entitlement:r,meta:c}))};var xg=n("./node_modules/@amzn/dvui/dist/Icons/Smile.js");const Mg="-KE+LZ",Ng="RC5WUV",Rg="AAcaWn",Ag="GdzN4h",Og="+imlHX",Vg=[375,500,750,900],Wg=({className:e,image:t,title:n,link:a,defaultCursor:r,onClick:o,liveEventMetadata:l,shouldLazyLoadImage:s,titleID:c,imageClassName:d})=>{const[u,m]=i.useReducer((()=>!1),!0),p=t=>{const l=null==a?void 0:a.url;return l?i.createElement("a",{className:h()(Mg,e,{[Rg]:r}),href:l,"aria-label":n,onClick:o},t):i.createElement("div",{className:h()(Mg,e)},t)};let g,v;return l&&(g=i.createElement(Qs,{dateTime:l.timeBadge,isSuperCarousel:!0}),v=i.createElement(nc,{liveInfo:l,className:Og})),p(t?i.createElement("div",{className:Ng},i.createElement(Ca,{src:t,alt:n,aspectRatio:yt.TwoByThree,imageClassName:h()(Ag,d),parentListeners:{onError:m},sizesOptions:{defaultSrcSize:430,srcSizes:[{"max-tablet-lowest":200},{"max-laptop-lowest":260},{"max-desktop-lowest":310},{"max-desktop-hd-lowest":310},{"max-desktop-uhd-lowest":430}]},srcSetWidths:Vg,baseValue:750,shouldLazyLoad:s,debugID:c}),g,v):n||!u?i.createElement("div",null,i.createElement(Gr,null,n),g,v):i.createElement(xg.Smile,null))},Bg=zg(tg),Gg=zg(eg),Hg={element:void 0,prevElement:void 0,elementIndex:-1,prevElementIndex:-1};function jg(e,t){return{prevElement:e.element,prevElementIndex:e.elementIndex,element:t?t.element:void 0,elementIndex:t?t.index:-1}}function $g(e,t,n){if(e.element!==e.prevElement&&e.element){const{cardStartCoordinate:a,height:i}=function(e,t,n){const{height:a,left:i,right:r}=e.getBoundingClientRect(),{left:o,right:l}=t.getBoundingClientRect();if(n)return{cardStartCoordinate:window.innerWidth-r-(window.innerWidth-l),height:a};return{cardStartCoordinate:i-o,height:a}}(e.element,t,n),r=!!e.prevElement&&e.prevElementIndex<e.elementIndex,o=i*Gg,l=i*Bg,s=t.clientWidth,c=l-o,d=r?a-c:a;let u=0;const m=E("--dv-carousel-column-margin");return d<m?u=d-m:d+l+m>s&&(u=d+l+m-s),n?-u:u}}function zg(e){const t=e.split("/");return t[0]&&t[1]?parseInt(t[0])/parseInt(t[1]):0}const Fg=i.createContext({});Fg.displayName="ScrollAnimationContext";const Ug=(0,s.s6)((e=>{const t=i.useRef(),n=i.useRef(),a=i.useRef(),[r,o]=i.useReducer(jg,Hg),{isSsmOpen:l}=i.useContext(pl),s=e=>{clearTimeout(t.current),t.current=window.setTimeout((()=>{o(e)}),250)},[c,d]=i.useState(void 0),u=i.useContext(se),{isCarouselHovered:m,isHoveringNavArrows:p,isCarouselFocused:g}=i.useContext(_e),{numOfCards:h}=i.useContext(iv),f=i.useCallback((e=>{u.connected&&u.scrollContainer.scrollBy({left:e})}),[u.connected&&u.scrollContainer]),y=i.useCallback((e=>{u.connected&&u.scrollContainer.scrollTo({left:e})}),[u.connected&&u.scrollContainer]),b=i.useCallback((()=>{if(function(e){if(e.prevElement){const t=e.prevElement;t&&t.removeAttribute(ng)}if(e.element){const t=e.element;t&&t.setAttribute(ng,"true")}}(r),clearTimeout(n.current),u.connected){var t,a;const i=null!==(t=null===(a=e.render)||void 0===a?void 0:a.isRTL)&&void 0!==t&&t,o=$g(r,u.scrollContainer,i);o&&(n.current=window.setTimeout((()=>{f(o)}),i?300:0))}}),[r]),C=i.useCallback((()=>{clearTimeout(a.current)}),[]),_=i.useCallback((()=>{var i,o;clearTimeout(t.current),clearTimeout(n.current);const l=null!==(i=null===(o=e.render)||void 0===o?void 0:o.isRTL)&&void 0!==i&&i,u=function(e,t,n,a){let i,r;if(t?(i=t.element,r=t.index):(i=e.element,r=e.elementIndex),!i)return null;const{height:o}=i.getBoundingClientRect(),l=(o*Gg*a+E("--dv-carousel-column-gap")*a)*Math.floor(r/a);return n?-l:l}(r,c,l,h);"number"==typeof u&&(y(u),l&&(a.current=window.setTimeout((()=>{y(u)}),550))),s(void 0),d(void 0)}),[r,c]),T=i.useCallback((()=>{c&&(s(c),d(void 0))}),[c]);i.useEffect((()=>{b()}),[r.element]),i.useEffect((()=>{l||(!1===m||!0===p?_():C())}),[m,p,l]),i.useEffect((()=>{u.connected&&u.isScrolling||T()}),[u.connected&&u.isScrolling]);const k=i.useCallback(((e,t)=>{u.connected&&u.isScrolling?d({element:e.closest("li"),index:t}):s({element:e.closest("li"),index:t})}),[u.connected&&u.isScrolling]),w=i.useMemo((()=>({openElementIndex:r.elementIndex,actions:{onMouseEnter:k}})),[r.elementIndex,k]);return i.createElement("div",{className:v({[og]:m||g})},i.createElement(Fg.Provider,{value:w},e.children))}));function qg(){return qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qg.apply(this,arguments)}const Kg=i.memo((({contentMaturityRating:e,customerReviews:t,entitlementCues:n,hasSubtitles:a,images:r,releaseYear:o,link:l,displayTitle:s,isVisibleInCarousel:d,isOnlyPoster:u,titleID:m,refMarker:p,widgetType:g,index:h,liveInfo:f,playbackActions:y,itemAnalytics:b,maturityRatingBadge:E})=>{var C,_,T,w;const[L,I]=i.useState(!1),[P,D]=i.useState(!1),S=i.useRef(null),[x,M]=i.useState(!1),R=i.useRef(),[A,O]=i.useState(!1),{isTouchEnabledWindowsDevice:V}=i.useContext(N),{touchMiniDetailsModalListeners:W,isMiniDetailsModalVisible:B,dismissMiniDetailsModal:G,removeContextMenuClass:H,removeDragAnimationClass:j,link:$}=fc(void 0!==m,l),{enrichments:z,isTrailerAutoplayEnabled:F,container:{impressionData:U,containerType:q},index:K,consumingWidgetType:Q}=i.useContext(_E),{openElementIndex:Z,actions:J}=i.useContext(Fg),{logger:X}=(0,c.L1)(),Y=pc(Q,q,K,h),ee=i.useCallback((e=>{const t=null==S?void 0:S.current;if(t||e===t)t&&!e&&Aa.unobserve(t);else{var n;const t=null==r||null===(n=r.poster2x3)||void 0===n?void 0:n.url;U&&t&&g&&p&&e&&Aa.observe(e,{collectionImpressionData:U,titleID:m,imageURL:t,refMarker:p,widgetType:g,carouselPosition:K,itemPosition:h,itemAnalytics:b})}S.current=e}),[]);i.useEffect((()=>()=>{window.clearTimeout(R.current)}),[]),i.useEffect((()=>{x?(window.clearTimeout(R.current),O(!0)):Z!==h&&(window.clearTimeout(R.current),R.current=window.setTimeout((()=>{O(!1)}),2e3))}),[x,Z,h]),i.useEffect((()=>{Z===h&&null!=S&&S.current&&Aa.logManualImpression(null==S?void 0:S.current,"Highlight")}),[Z,h]),i.useEffect((()=>{if(u)return;x&&d?(S.current&&J.onMouseEnter(S.current,h),I(!0)):I(!1)}),[x,d]);const te=i.useCallback((()=>{M(!0)}),[]),ne=i.useCallback((()=>{M(!1)}),[]),ae=()=>{null!=S&&S.current&&Aa.logManualImpression(null==S?void 0:S.current,"Select")},ie=null==z?void 0:z[null!=m?m:""];let re;null!=ie&&ie.prerolls&&F&&(re=i.createElement(ia,{className:dg,canPlay:L,prerolls:null==ie?void 0:ie.prerolls,delay:2e3,playback:aa.Restart,playerIsActive:!0,link:P?null==$?void 0:$.url:void 0,playing:D,draperParentListeners:{onClick:ae},refMarker:p,titleID:m,placement:zt.SuperCarousel}));const oe=rc(y,ie),le=oc(ie),se=ie?ie.entitlementCues:n,ce=i.useMemo((()=>({contentMaturityRating:e,customerReviews:t,releaseYear:o,hasSubtitles:a,liveInfo:f,maturityRatingBadge:E})),[]),de=null==r||null===(C=r.poster2x3)||void 0===C?void 0:C.url;i.useEffect((()=>{de||(X.count("MissingImageSuperCarouselCard",1,!1),k.c.count("MissingImageSuperCarouselCard"),X.warn(`Missing poster2x3 image in SuperCarouselCard for title ${m}`))}),[]);const ue={className:sg,image:de,title:s,link:!u&&A?void 0:$,liveEventMetadata:f,onClick:ae,shouldLazyLoadImage:Y,titleID:m,imageClassName:j};return i.createElement("article",qg({className:v(ag,rg,H),"data-testid":"super-carousel-card",onMouseEnter:te,onMouseLeave:ne,ref:ee},W),u?i.createElement(i.Fragment,null,i.createElement(Wg,ue),B&&i.createElement(is,{titleID:m,playbackAction:oe,playbackGroup:le,displayTitle:s,watchlistAction:null==ie?void 0:ie.watchlistAction,trailer:null==ie?void 0:ie.trailer,contentMaturityRating:e,maturityRatingBadge:E,isTouchEnabledWindowsDevice:V,recordSeasonTooltipText:null==ie||null===(_=ie.recordSeason)||void 0===_||null===(_=_.watchlistAddon)||void 0===_?void 0:_.tooltipText,showTouchModal:B,dismissTouchModal:G,detailsPageUrl:null==$?void 0:$.url})):i.createElement(hg,{className:cg,imageUrl:null==r||null===(T=r.hero)||void 0===T?void 0:T.url,titleID:m},A&&i.createElement(i.Fragment,null,re,(null==$?void 0:$.url)&&!P&&i.createElement("a",{href:null==$?void 0:$.url,className:v(pg),onClick:ae,"data-testid":"image-link"},s),i.createElement(Sg,{title:s,titleId:m,link:$,titleLogoUrl:null==r||null===(w=r.titleLogo)||void 0===w?void 0:w.url,entitlement:null==se?void 0:se.focusMessage,playback:oe,playbackGroup:le,promotedAcquisitionGroup:null==ie?void 0:ie.promotedAcquisitionGroup,meta:ce,carouselRefTag:p,shouldLazyLoadImage:Y,parentElement:null==S?void 0:S.current})),i.createElement(Wg,qg({},ue,{defaultCursor:!0}))))})),Qg=(0,s.s6)(Kg);function Zg(){return Zg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Zg.apply(this,arguments)}const Jg=2,Xg=2,Yg=3,ev=4,tv=5,nv=5,av=6,iv=i.createContext({}),rv=()=>{const{actions:e,container:t}=i.useContext(_E),n=t.entities,{isHoverEnabled:a,pageWidth:r,hasPageMounted:o,contingencies:l,isMiniDetailsMobileOn:s,isContentDensityExperimentOn:c}=i.useContext(N),[d,u]=i.useState(!0),m=i.useCallback((()=>{if(c){let e=av;return sc.is(lc.PHONE_PORTRAIT)?e=Jg:sc.is(lc.TABLET_SMALL)?e=Xg:sc.is(lc.TABLET)?e=Yg:sc.is(lc.LAPTOP)?e=ev:sc.is(lc.DESKTOP)&&(e=nv),e}{let e=tv;return sc.is(lc.PHONE_PORTRAIT)?e=Jg:sc.is(lc.TABLET_SMALL)?e=Xg:sc.is(lc.TABLET)?e=Yg:sc.is(lc.LAPTOP)&&(e=ev),e}}),[]),[p,g]=i.useState(o?m():c?av:tv);i.useEffect((()=>{g(m())}),[]),i.useEffect((()=>{u(!a||sc.isSmallerThan(lc.LAPTOP)||Boolean(null==l?void 0:l.disableHover)||Boolean(null==t?void 0:t.notExpandable)),g(m())}),[a,r]);const v=i.useCallback(((e,t,n)=>i.createElement(Qg,Zg({isVisibleInCarousel:t},e,{canPlay:t,index:n,isOnlyPoster:d}))),[d]),h=i.useCallback((t=>{if(!a&&!s)return;const i=n.filter(((e,n)=>t.has(n+1)));if(i.length>0){const t=i.filter((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID})).map((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID}));e.getEnrichments(t)}}),[n,e]),f=null==t?void 0:t.entitlementCues;return i.createElement(iv.Provider,{value:{numOfCards:p}},i.createElement(ce,null,i.createElement(Ae,{cards:n,wrapperClassName:ig,navigation:xe.Framed,isHalfSizedArrowFrame:!0,className:lg,header:t.title&&i.createElement(jd,{title:t.title,entitlementType:null==f?void 0:f.entitledCarousel,facetText:t.facetText,offerType:null==f?void 0:f.offerType}),renderCard:v,cardsVisibilityThreshold:.3,customCarouselContainer:Ug,performantRender:{maxCardNum:p,onFirstTimeCardRender:h},testID:"super-carousel"})))},ov="d+y-VB",lv="PFB4Sx",sv="mS+1wI",cv="uAuoES",dv="_08tkIy",uv=[1080,2160,2880,3840],mv=[{"max-tablet-lowest":450},{"max-laptop-lowest":880},{"max-desktop-lowest":1400},{"max-desktop-hd-lowest":1800},{"max-desktop-uhd-lowest":2400}],pv=({backgroundImage:e,title:t,entitledCarousel:n,theme:a,shouldLazyLoadImage:r})=>{const o="NotEntitled"===n,l="Store"===a;return i.createElement("div",{className:ov,"data-testid":"cover-background-root"},o&&!l&&i.createElement("div",{className:dv,"data-testid":"cover-mobile-gradient"}),(null==e?void 0:e.url)&&i.createElement(Ca,{alt:t,src:e.url,imageClassName:lv,aspectRatio:yt.ThirtyTwoByFifteen,sizesOptions:{defaultSrcSize:2400,srcSizes:mv},srcSetWidths:uv,baseValue:2880,shouldLazyLoad:r,debugID:t}),i.createElement("div",{className:sv,"data-testid":"cover-bottom-gradient"}),o&&!l&&i.createElement("div",{className:cv,"data-testid":"cover-bottom-start-gradient"}))},gv="_0rM3o9",vv="VrD8pe",hv="bA1o9y",fv="uoTA0G",yv="g73j2s",bv="H0BsV3",Ev="JNvLP2",Cv="_1sT8of",_v="Q4fi+w",Tv="S8BxNl",kv=[690,1035,1380,2070],wv=({title:e,description:t,shouldHideTitleOnSmallerDevices:n})=>i.createElement("div",{className:fv},e&&i.createElement("h2",{className:v(yv,{[bv]:n})},e),t&&i.createElement("p",{className:Ev},t)),Lv=({url:e,label:t,otherClassName:n})=>i.createElement("div",{className:n},i.createElement(Ur.PrimaryButton,{href:e,testID:"action"},t)),Iv=({entities:e,title:t,description:n,logoImage:a,action:r,baseContainerActions:o,enrichments:l,shouldLazyLoadImage:s})=>i.createElement("div",{className:gv,"data-testid":"cover-content-root"},i.createElement("div",{className:vv},(null==a?void 0:a.url)&&i.createElement(Ca,{alt:a.alternateText,src:a.url,wrapperClassName:hv,aspectRatio:yt.ThreeHundredFortyFiveByFiftySix,sizesOptions:{defaultSrcSize:920,srcSizes:[{"max-tablet-lowest":350},{"max-laptop-lowest":380},{"max-desktop-lowest":560},{"max-desktop-hd-lowest":650},{"max-desktop-uhd-lowest":920}]},srcSetWidths:kv,baseValue:1380,shouldLazyLoad:s,debugID:t}),(t||n)&&i.createElement(wv,{title:t,description:n,shouldHideTitleOnSmallerDevices:Boolean(t&&n&&(null==a?void 0:a.url))}),(null==r?void 0:r.url)&&(null==r?void 0:r.label)&&i.createElement(Lv,{url:r.url,label:r.label,otherClassName:Cv})),i.createElement(iu,{entities:e,actions:o,enrichments:l,otherWrapperClassName:Tv}),(null==r?void 0:r.url)&&(null==r?void 0:r.label)&&i.createElement(Lv,{url:r.url,label:r.label,otherClassName:_v})),Pv="boWXU+",Dv="vVQ5BU",Sv="PEOk1j",xv=()=>{const{container:e,actions:t,enrichments:n,consumingWidgetType:a,index:r}=i.useContext(_E),{theme:o,containerVisibility:l}=i.useContext(N),{entities:s,entitlementCues:c,backgroundImage:d,title:u,description:m,logoImage:p,action:g,containerType:h}=e,f=null==c?void 0:c.entitledCarousel,y="Store"===o,b=((null==l?void 0:l.min)||0)-2<r&&r<((null==l?void 0:l.max)||0)+2,E=pc(a,h,r,-1);return i.createElement("section",{className:v(Dv,Pv),"data-testid":"cover-container"},i.createElement(pv,{backgroundImage:d,title:u,entitledCarousel:f,theme:o,shouldLazyLoadImage:E}),i.createElement(Iv,{title:u,description:m,logoImage:p,action:g,entities:s,baseContainerActions:t,enrichments:n,shouldLazyLoadImage:E}),y&&b&&i.createElement("div",{className:Sv,"data-testid":"cover-page-store-glow"}))},Mv="_8feUpB",Nv="Lodp2z",Rv="oMPh6r",Av="O80U9r",Ov="+pD1ii",Vv="qLBcsq",Wv="v27j9y",Bv="glGxL6",Gv="_845O7N",Hv="oXTJJt",jv=1.5,$v=2,zv=3,Fv=4,Uv=5,qv=5,Kv=6,Qv=()=>{var e;const{pageWidth:t,hasPageMounted:n,isContentDensityExperimentOn:a}=i.useContext(N),{container:r,consumingWidgetType:o}=i.useContext(_E),{title:l,entities:s,firstEntityGroupSize:c,unentitledText:d,seeMoreLink:u}=r,m=i.useRef(null),p=i.useRef(Object.values(s).some((e=>{var t;return!(null===(t=e.entitlementCues)||void 0===t||null===(t=t.glanceMessage)||void 0===t||!t.message)}))),g="MyStuff"===o||s.length==c,h=(null!=c?c:0)-1,f=null!=c?c:0,y=f>0,b=f,E=null==r?void 0:r.entitlementCues,C=null==r||null===(e=r.entitlementCues)||void 0===e?void 0:e.entitledCarousel,_=null==E?void 0:E.offerType,T={"--number-of-circular-cards":b},k=i.useCallback((()=>{if(a){let e=Kv;return sc.is(lc.PHONE_PORTRAIT)?e=jv:sc.is(lc.TABLET_SMALL)?e=$v:sc.is(lc.TABLET)?e=zv:sc.is(lc.LAPTOP)?e=Fv:sc.is(lc.DESKTOP)&&(e=qv),e}{let e=Uv;return sc.is(lc.PHONE_PORTRAIT)?e=jv:sc.is(lc.TABLET_SMALL)?e=$v:sc.is(lc.TABLET)?e=zv:sc.is(lc.LAPTOP)&&(e=Fv),e}}),[]),[w,L]=i.useState(n?k():a?Kv:Uv);i.useEffect((()=>{L(k())}),[]),i.useEffect((()=>{L(k())}),[t]);return i.createElement(Ae,{className:ge,navigation:xe.Framed,cards:s,renderContainer:e=>i.createElement("div",{className:Hv,ref:m},i.createElement("div",{className:v(Mv,{[Nv]:1===b}),style:T},i.createElement("section",{className:Av},l&&y&&i.createElement("div",{"data-testid":"carousel-header",className:v({[Ov]:!g,[Wv]:g})},i.createElement(jd,{title:l,entitlementType:C,className:Gv,offerType:_},g&&u&&i.createElement(qd,{url:u.url,label:u.label}))),!g&&d&&i.createElement("div",{"data-testid":"carousel-upsell-header",className:Vv},i.createElement(jd,{title:d,entitlementType:"NotEntitled",offerType:_},u&&i.createElement(qd,{url:u.url,label:u.label,className:Bv})))),e)),renderCard:(e,t,n)=>{const a=n<f;return i.createElement(Id,{card:e,isVisible:t,isCircle:a,index:n,wrapperClassName:v({[Rv]:!g&&n===h}),renderGlanceSpaceIfNoGlanceMessage:p.current})},overrideScrollContainerRef:m,cardsVisibilityThreshold:.99,testID:"nodes-carousel",performantRender:{maxCardNum:w,startIndexForVirtualisation:f+1}})};Qv.displayName="Nodes";const Zv=Qv,Jv="xMo82q",Xv="_20Qx4g",Yv="Qpmg1P",eh="_9pxNG4",th="vDmXS1",nh="wH7mLc",ah="xkvvgo",ih="Io0kUZ",rh="mMpZEW",oh="I82JbU",lh="AoVl5S",sh=(0,c.ty)((({titleID:e,text:t,dismissModal:n,buttonStyle:a,textStyle:r,testID:o="watchlist-toggle-dropdown-action",logger:l})=>{const{actions:{onWatchlistToggle:s}}=i.useContext(_E);return i.createElement(Xr,{testId:o,requireModalConfirmation:!1,text:t,icon:i.createElement(wr(),null),buttonStyle:a,buttonTestId:"watchlist-toggle",textStyle:r,isInDropdown:!0,onPrimaryAction:t=>{s(t,e,void 0).then((()=>{n()})).catch((e=>{l.error("Failed to toggle watchlist",e)}))}})})),ch="vWki92",dh="QLcL+3",uh="wBtWAb",mh="yMBuvX",ph="BkVXA+",gh="Ve1A8x",vh=(0,c.ty)((({disabled:e,rootElement:t,card:n,logger:a})=>{const{consumingWidgetType:r}=i.useContext(_E),[o,l]=i.useState(!1),s=i.useCallback((e=>{null==e||e.preventDefault(),l(!0)}),[]),c=i.useCallback((e=>{null==e||e.preventDefault(),l(!1)}),[]),{overflowActions:d,overflowMenuHeader:u}=hh({card:n,dismissModal:c,consumingWidgetType:r,logger:a});return 0===d.length?null:i.createElement("div",{"data-testid":"actions-overflow-menu",className:ch},i.createElement("button",{"data-testid":"actions-menu-button",className:dh,onClick:s,disabled:e},i.createElement(fr(),{height:"var(--dvui-icon-height)",width:"var(--dvui-icon-width)"})),!e&&o&&i.createElement(Jr,{className:uh,testID:"actions-menu-modal",isVisible:o,onRequestClose:c,disableFooter:!0,titleText:u,body:i.createElement("ul",{className:mh},d.filter((e=>null!==e)).map(((e,t)=>i.createElement("li",{key:`action-${t}`,"data-testid":`action-menu-item-${t}`,className:"action-menu-item"},e)))),rootElement:t}))})),hh=({card:{titleID:e,overflowMenu:t},consumingWidgetType:n,dismissModal:a,logger:r})=>"MyStuff"!==n||"string"!=typeof e||void 0===t?{overflowActions:[],overflowMenuHeader:void 0}:{overflowMenuHeader:t.title,overflowActions:t.items.map((t=>{switch(t.itemType){case Wo.Np.LibraryAction:return no(e,t.action,gh,!0,ph,a);case Wo.Np.WatchlistAction:const n=t;return i.createElement(sh,{titleID:e,text:n.text,dismissModal:a,buttonStyle:ph,textStyle:gh});default:return r.error(`Unhandled menu item type '${t.itemType}'`),null}}))};function fh(){return fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fh.apply(this,arguments)}const yh=(0,s.s6)((({card:e,enrichment:t,index:n,modalRootElement:a})=>{var r,o,l,s,d,u,m;const p=i.useRef(null),{consumingWidgetType:g,container:{impressionData:v,containerType:f},index:y,removedItemsMap:b}=i.useContext(_E),{logger:E}=(0,c.L1)(),C=pc(g,f,y,n),{images:_,displayTitle:T,displayTitle:w,widgetType:L,refMarker:I,titleID:P,reactionAction:D}=e,{isTouchEnabledWindowsDevice:S}=i.useContext(N),{touchMiniDetailsModalListeners:x,isMiniDetailsModalVisible:M,dismissMiniDetailsModal:R,removeContextMenuClass:A,removeDragAnimationClass:O,link:V}=fc(void 0!==e.titleID,e.link),W=void 0!==e.titleID?null==b?void 0:b[e.titleID]:void 0,B=void 0!==W,G=null==W?void 0:W.removedOverlayMessage,H=null!==(r=null==W?void 0:W.canUndoRemoval)&&void 0!==r&&r,j=null==_||null===(o=_.cover)||void 0===o?void 0:o.url;i.useEffect((()=>{j||(E.count("MissingImageRanOverCard",1,!1),k.c.count("MissingImageRanOverCard"),E.warn(`Missing cover image in RanOverCard for title ${P}`))}),[]);const $=null!==(l=null==t?void 0:t.entitlementCues)&&void 0!==l?l:e.entitlementCues,z=i.useCallback((t=>{const a=null==p?void 0:p.current;a||t===a?a&&!t&&Aa.unobserve(a):v&&j&&L&&I&&t&&Aa.observe(t,{collectionImpressionData:v,titleID:P,imageURL:j,refMarker:I,widgetType:L,carouselPosition:y,itemPosition:n,itemAnalytics:e.itemAnalytics}),p.current=t}),[]);let F;D&&"Onboarding"===f&&(F=i.createElement(Xc,{gti:P,reactionAction:D,iconButtonClassname:lh}));const U=F?"article":"a",q=F?void 0:e=>{Aa.logManualImpression(e.currentTarget,"Select")},K=F||null==V?void 0:V.url;return i.createElement(i.Fragment,null,i.createElement(U,fh({ref:z,"aria-label":w,"data-testid":"flat-card","data-card-position":n,"data-card-title":e.title,"data-card-entity-type":e.entityType,href:K,onClick:q},x,{className:h()(A,{[oh]:F})}),i.createElement("div",{"data-testid":"ran-over-card-container",className:Jv},i.createElement("div",{className:Yv},!B&&i.createElement(oi,{className:h()(Xv),imageClassName:h()(eh,O),imageUrl:j,alternateText:null==_||null===(s=_.cover)||void 0===s?void 0:s.alternateText,fallbackTitle:T,parentElement:p.current,refMarker:e.refMarker,titleID:e.titleID,shouldLazyLoadImage:C}),B&&G&&i.createElement(mc,{message:G,className:rh})),i.createElement("div",{className:h()(th,{[ih]:B})},i.createElement(Hr,{className:nh},w),i.createElement("div",{className:ah},i.createElement(Br,null,null==e?void 0:e.releaseYear),i.createElement(Br,null,null==e?void 0:e.runtime)),$&&i.createElement(nt,{icon:null===(d=$.glanceMessage)||void 0===d?void 0:d.icon,message:null===(u=$.glanceMessage)||void 0===u?void 0:u.message}),M&&i.createElement(is,{titleID:P,playbackAction:ic(e,t),playbackGroup:oc(t),displayTitle:w,watchlistAction:null==t?void 0:t.watchlistAction,trailer:null==t?void 0:t.trailer,contentMaturityRating:e.contentMaturityRating,maturityRatingBadge:e.maturityRatingBadge,isTouchEnabledWindowsDevice:S,recordSeasonTooltipText:null==t||null===(m=t.recordSeason)||void 0===m||null===(m=m.watchlistAddon)||void 0===m?void 0:m.tooltipText,showTouchModal:M,dismissTouchModal:R,detailsPageUrl:null==V?void 0:V.url})),i.createElement(vh,{card:e,disabled:B&&!H,rootElement:a}),F)))})),bh="bUIMWe",Eh="IouS5j",Ch="evYCfE",_h=({card:e,index:t})=>{var n,a,r;const{container:o,consumingWidgetType:l,index:s}=i.useContext(_E),c=pc(l,o.containerType,s,t),{images:d}=e,u=null==d||null===(n=d.cover)||void 0===n?void 0:n.url,m=e.displayTitle,p=null==d||null===(a=d.cover)||void 0===a?void 0:a.alternateText,g=null!=o&&o.title?"h3":"h2";return i.createElement(g,{"aria-label":m,className:bh,"data-testid":"genre-card"},i.createElement("a",{"data-card-position":t,href:null==e||null===(r=e.link)||void 0===r?void 0:r.url,"aria-label":m},i.createElement(oi,{imageWrapperClassName:Eh,imageClassName:Ch,imageUrl:u,alternateText:p,refMarker:e.refMarker,titleID:e.titleID,shouldLazyLoadImage:c}),m&&i.createElement(Lc,{displayTitle:m,overlayTextPosition:e.overlayTextPosition||"Center_Center"})))},Th="OKS56b",kh="K0Kf63",wh="_9kJogN",Lh="AcFiK7",Ih="_0B0vPr",Ph="NwPFrz",Dh=({children:e})=>{const[t,n]=i.useReducer(Nd,null),{isSsmOpen:a}=i.useContext(pl),r=i.useCallback((e=>{a||n(e)}),[a]);i.useEffect((()=>{a||n({event:"FORCE_CLOSE"})}),[a]);const o=i.useMemo((()=>({connected:!0,cardIndexWithMiniDetails:t,actions:{reportHoverOrFocusEvent:r}})),[t,r]);return i.createElement("div",{"data-testid":"grid-mini-details-controller"},i.createElement(Is.Provider,{value:o},e))};var Sh=n("./src/util/utils/math.ts");const xh={init:!1,actualRowHeights:new Map,compoundedHeight:[]};function Mh(e,t){const{entitiesLength:n,commonRowHeight:a,cardsPerRow:i,logger:r}=t.context,o=Math.ceil(n/i);if("INIT"===t.action){const e=[];for(let t=0;t<o;t++){var l;const n=null!==(l=e[t-1])&&void 0!==l?l:0;e[t]=a+n}return{...xh,init:!0,compoundedHeight:e}}if(!e.init)return r.error(`[Grid container] heightsReducer(): Should not call ${t.action} before INIT`),e;const s=[...e.compoundedHeight];if(o>s.length)for(let e=s.length;e<o;e++){var c;const t=null!==(c=s[e-1])&&void 0!==c?c:0;s[e]=a+t}if("SET"==t.action){const{rowIndex:n,height:i}=t.data;if(e.actualRowHeights=new Map(e.actualRowHeights.set(n,i)),i!==a)for(let t=n;t<o;t++){var d,u;const n=null!==(d=s[t-1])&&void 0!==d?d:0,i=null!==(u=e.actualRowHeights.get(t))&&void 0!==u?u:a;s[t]=n+i}}return e.compoundedHeight=s,e}function Nh(){return window.scrollY}function Rh(e){window.addEventListener("scroll",e)}function Ah(e){window.removeEventListener("scroll",e)}const Oh=40,Vh=20;var Wh=n("./node_modules/react-intersection-observer/lib/index.js"),Bh=n("./node_modules/@amzn/dvui/dist/Icons/Spinner.js"),Gh=n.n(Bh);const Hh="_8SdHse",jh="_5aEY3d";var $h=function(e){return e.CannotPaginate="CannotPaginate",e.CanPaginate="CanPaginate",e.CanRequestLock="CanRequestLock",e.HasLock="HasLock",e.IsPaginating="IsPaginating",e}($h||{});const zh=[$h.HasLock,$h.IsPaginating],Fh=[$h.CanPaginate,$h.CanRequestLock,$h.HasLock],Uh=({onPaginateContainer:e})=>{const{index:t,hasMoreItems:n,isPaginatingContainer:a,container:r,consumingWidgetType:o}=i.useContext(_E),{entityWithLock:l,actions:s}=i.useContext(I),[c,d]=i.useState(!1),[u,m]=i.useState($h.CannotPaginate),p=i.useMemo((()=>(e=>"MyStuff"===e?"50%":"150%")(o)),[o]);return i.useEffect((()=>{"EpgGroup"===r.containerType&&s.hideBelow(t)}),[]),i.useEffect((()=>{n||s.unhideBelow(t)}),[n]),i.useEffect((()=>{let e=$h.CannotPaginate;const i="CONTAINER"===l.type&&l.containerIndex===t;a?e=$h.IsPaginating:n&&(e=$h.CanPaginate,c&&(e=$h.CanRequestLock,i&&(e=$h.HasLock))),m(e)}),[t,l,n,c,a,u]),i.useEffect((()=>{u===$h.CanRequestLock?s.lock(t):zh.includes(u)||s.unlock(t),u===$h.HasLock&&e(),Fh.includes(u)||d(!1)}),[u]),i.createElement(i.Fragment,null,a&&i.createElement("div",{className:jh},i.createElement(Gh(),null)),Fh.includes(u)&&i.createElement(Wh.Z,{rootMargin:`${p} 0px`,onChange:e=>d(!!e)},i.createElement("div",{className:Hh})))},qh=()=>{var e,t,n;const{actions:a,container:r,consumingWidgetType:o,enrichments:l}=i.useContext(_E),{entities:s}=r,{isDesktopDeviceVariant:d,isContentDensityExperimentOn:u}=i.useContext(N),m=i.useRef(new Set),p=i.useRef(null),g=i.useRef(null),v=i.useRef(null);let f;f="Categories"===o?"GenreCard":d?"Card":"RanOverCard";const y=i.useCallback((()=>{switch(f){case"RanOverCard":return"undefined"==typeof window||sc.isAtleast(lc.TABLET_SMALL)?2:1;case"Card":return u?sc.is(lc.DESKTOP)?5:sc.is(lc.LAPTOP)?4:sc.is(lc.TABLET)?3:sc.is(lc.PHONE_PORTRAIT)?1:sc.is(lc.PHONE)?2:6:sc.is(lc.LAPTOP)?4:sc.is(lc.TABLET)?3:sc.is(lc.PHONE_PORTRAIT)?1:sc.is(lc.PHONE)?2:5;case"GenreCard":return u?sc.is(lc.DESKTOP)?5:sc.is(lc.LAPTOP)?4:sc.is(lc.TABLET)?3:sc.is(lc.PHONE)?2:6:sc.is(lc.LAPTOP)?4:sc.is(lc.TABLET)?3:sc.is(lc.PHONE)?2:5}}),[f]);let b;switch(f){case"Card":b=wh;break;case"RanOverCard":b=Lh;break;case"GenreCard":b=Ih}const C="Card"===f?Dh:i.Fragment,{firstCardIndex:_,lastCardIndex:T,topSpacing:k,bottomSpacing:L}=function(e,t,n,a){var r,o,l;const{logger:s}=(0,c.L1)(),{isDesktopDeviceVariant:d,pageWidth:u}=i.useContext(N),m=d?Oh:Vh,[p,g]=i.useState(n>m),[v,h]=i.useReducer(Mh,xh),[f,y]=i.useState(0),[b,C]=i.useState(m),_=i.useRef(0),T=i.useCallback((e=>{e=Math.max(0,e);const t=n-b;e>t&&(e=Math.ceil(t/a)*a),e!==f&&y(e)}),[a,b,n,f]),k=i.useRef(0),L=i.useCallback((()=>{if(!p)return;if("undefined"==typeof window)return;if(k.current===u)return;k.current=u;const t=E("--dv-carousel-column-gap"),i=window.innerHeight,r=[],o=Math.ceil(b/a);for(let n=0;n<o;n++){const i=(c=n*a,d=void 0,null!==(d=null==(l=e)?void 0:l.children[c])&&void 0!==d?d:null);if(i){const e=parseFloat(getComputedStyle(i).height);r.push(e+t)}}var l,c,d;const m=Sh.m.mostRepeated(r);if(null===m)return;const g=Math.ceil(i/m)*a;_.current=m,C(2*g),h({action:"INIT",context:{entitiesLength:n,commonRowHeight:m,cardsPerRow:a,logger:s}})}),[e,b,a,p,n,s,u]),I=i.useCallback((()=>{if(!p)return;if(!t)return;if("undefined"==typeof window)return;const e=Nh(),i=e-(0,Ps.q7)(t,e)-.5*window.innerHeight,r=Object.entries(v.compoundedHeight).find((([e,t])=>t>i));if(r){const[e,t]=r;T(parseInt(e)*a)}else T(n-1)}),[a,p,n,v.compoundedHeight,T,t]),P=i.useCallback((()=>{if(!p)return;const t=Math.floor(f/a),i=Math.min(f+b-1,n-1),r=Math.floor(i/a);for(let i=t;i<=r;i++){const t=i*a;if(v.actualRowHeights.has(i))continue;const r=(l=t,null==(o=e)?void 0:o.querySelector(`[data-card-position="${l}"]`)),c=E("--dv-carousel-column-gap");if(r){const e=parseFloat(getComputedStyle(r).height);h({action:"SET",data:{rowIndex:i,height:e+c},context:{entitiesLength:n,commonRowHeight:_.current,cardsPerRow:a,logger:s}})}}var o,l}),[e,b,a,p,n,v.actualRowHeights,s,f]);if(i.useEffect((()=>{L()}),[]),i.useEffect((()=>{L()}),[u]),i.useEffect((()=>{const e=(0,w.D)(I,10);return p&&(L(),Rh(e)),()=>Ah(e)}),[p,I]),i.useEffect((()=>{P()}),[f,b]),i.useEffect((()=>{if(!p){if(!(n>m))return;g(!0)}v.init&&(h({action:"NEW_ENTITIES",context:{entitiesLength:n,commonRowHeight:_.current,cardsPerRow:a,logger:s}}),I())}),[n]),!p)return{firstCardIndex:0,lastCardIndex:n-1,topSpacing:0,bottomSpacing:0};const D=f,S=Math.floor(D/a)-1,x=null!==(r=v.compoundedHeight[S])&&void 0!==r?r:0,M=Math.min(f+b-1,n-1),R=Math.floor(M/a),A=v.compoundedHeight.length-1;return{firstCardIndex:D,lastCardIndex:M,topSpacing:x,bottomSpacing:(null!==(o=v.compoundedHeight[A])&&void 0!==o?o:0)-(null!==(l=v.compoundedHeight[R])&&void 0!==l?l:0)}}(p.current,g.current,s.length,y());i.useEffect((()=>{if("Onboarding"===r.containerType||"GenreCard"===f)return;const e=new Set;for(let t=_;t<=T;t++)m.current.has(t)||e.add(t);m.current=new Set([...m.current,...e]);const t=s.filter(((t,n)=>e.has(n)));if(t.length>0){const e=t.filter((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID})).map((e=>{var t;return null!==(t=e.entityID)&&void 0!==t?t:e.titleID}));a.getEnrichments(e)}}),[_,T]);const I=null==r||null===(e=r.entitlementCues)||void 0===e?void 0:e.entitledCarousel,P=null==r||null===(t=r.entitlementCues)||void 0===t?void 0:t.offerType,D=null==r?void 0:r.facetText,S=null!==(n=r.text)&&void 0!==n?n:r.title,x="MyStuff"!==o&&S;return i.createElement("div",{className:Th,"data-testid":"grid-container","data-card-total-count":s.length},x&&i.createElement(jd,{title:S,entitlementType:I,offerType:P,facetText:D}),i.createElement("div",{className:Ph,ref:g,style:{height:k}}),i.createElement(C,null,i.createElement("div",{className:h()(kh,b),ref:p},s.map(((e,t)=>{var n,a,r;if(t<_||t>T)return;const o=null==l?void 0:l[null!==(n=null!==(a=e.entityID)&&void 0!==a?a:e.titleID)&&void 0!==n?n:""];switch(f){case"Card":return i.createElement(Id,{key:t,index:t,card:e,isVisible:!0,enrichment:o});case"RanOverCard":return i.createElement(yh,{key:t,index:t,card:e,enrichment:o,modalRootElement:null!==(r=v.current)&&void 0!==r?r:void 0});case"GenreCard":return i.createElement(_h,{key:t,index:t,card:e})}})))),i.createElement("div",{className:Ph,style:{height:L}}),a.onPaginateContainer&&i.createElement(Uh,{onPaginateContainer:a.onPaginateContainer}),"MyStuff"===o&&i.createElement("div",{"data-testid":"modal-container",ref:v}))},Kh="DOAFpy",Qh=()=>{var e;const{container:t}=i.useContext(_E),n=null!==(e=t.text)&&void 0!==e?e:t.title;var a,r;return n?i.createElement("div",{className:Kh},i.createElement(jd,{title:n,entitlementType:null==t||null===(a=t.entitlementCues)||void 0===a?void 0:a.entitledCarousel,offerType:null==t||null===(r=t.entitlementCues)||void 0===r?void 0:r.offerType})):null},Zh=()=>{var e,t;const{container:{title:n,subtitle:a,delayedPopup:r,onboardingAction:o}}=i.useContext(_E),{containerVisibility:l,clickstream:s,clickstreamPageContext:c}=i.useContext(N),[d,u]=i.useState(!1),m=!d&&void 0!==(null==r?void 0:r.scrollDepth)&&null!==(e=l.visible.get(r.scrollDepth))&&void 0!==e&&e;i.useEffect((()=>{if(m){if(c&&"atv_hm_popup_ocx_close"===(null==r?void 0:r.dismissButton.reftag)&&Fn("atv_hm_popup_ocx_show","ATVModal","Onboarding",void 0,[gn.ModalRendered],vn.PopUp,c.clientVariant,s),!o)return void k.c.warn("OnboardingAction is not defined in the DelayedPopup component");Jc.getState().setOnboardingStatus("IMPRESSED_POPUP",o.csrfToken)}}),[m]);const p=()=>{u(!0),c&&"atv_hm_popup_ocx_close"===(null==r?void 0:r.dismissButton.reftag)&&Fn(null==r?void 0:r.dismissButton.reftag,"ATVModal","Onboarding",void 0,[gn.Click],vn.PageTouch,c.clientVariant,s)};return n&&a&&null!=r&&null!==(t=r.actionButton)&&void 0!==t&&t.label?i.createElement(Jr,{isVisible:m,onRequestClose:p,onSecondaryAction:p,titleText:n,bodyText:a,testID:"delayed-popup",primaryActionText:r.actionButton.label,primaryActionHref:r.actionButton.url,secondaryActionText:r.dismissButton.label}):null};Zh.displayName="DelayedPopup";const Jh=Zh,Xh="ixM6h0",Yh="_1Hokx8",ef="_1LtlWp",tf="-M3nlU",nf="J89F1+",af="RTVlok",rf="NtaKT3",of="Xc8EKK",lf="UJUN21",sf=(e,t,n)=>{const a=e?i.createElement(Ca,{src:e,alt:n,wrapperClassName:af,imageClassName:rf,baseValue:240,debugID:n,responsiveScaleDimension:da.HEIGHT}):i.createElement("div",{className:tf,"data-testid":"fixed-header-no-image"},i.createElement(Lo.Icon,{use:Lo.IconType.LOGO_PRIMEVIDEO}));return null!=t&&t.url?i.createElement("a",{href:t.url,className:nf,"aria-label":n,"data-testid":"fixed-header-image-link"},a):a},cf=()=>{const{container:e,enrichments:t,actions:n}=i.useContext(_E),{entities:a}=e;if(a.length<2)return null;const r=a.some((e=>{var t;return Boolean(null===(t=e.entitlementCues)||void 0===t||null===(t=t.glanceMessage)||void 0===t?void 0:t.message)}));return i.createElement("section",{className:Xh},Zd(e),(e=>{const[a,...o]=e;return i.createElement("div",{className:h()(Yh,{[lf]:r}),"data-testid":"fixed-header-carousel-row"},i.createElement("div",{className:ef,"data-testid":"fixed-header-cell"},(l=a)&&"Image"==l.itemType?sf(null===(s=l.image)||void 0===s?void 0:s.url,l.link,null===(c=l.image)||void 0===c?void 0:c.alternateText):i.createElement(i.Fragment,null)),i.createElement("div",{className:of},i.createElement(iu,{entities:o,actions:n,enrichments:t})));var l,s,c})(a))};cf.displayName="FixedHeaderCarousel";const df=cf,uf="tynqjQ",mf="ZpEvnm",pf="x0ahFx",gf="KNX38C",vf=()=>{const{container:{title:e,subtitle:t},index:n}=i.useContext(_E);return e||t?i.createElement("section",{className:h()(uf,{[gf]:0===n}),"data-testid":"text-widget"},e&&i.createElement(Hr,{className:mf},e),t&&i.createElement(Br,{className:pf},t)):null};vf.displayName="TextWidget";const hf=vf,ff="kJ8ONL",yf="_6RdhBl",bf="OjmhjP",Ef="-MXE7L",Cf="VKHGC9",_f=()=>{const{container:{buttons:e}}=i.useContext(_E),{clickstream:t,clickstreamPageContext:n}=i.useContext(N);if(!e||0===e.items.length)return null;const a=e.items[0];if(!a.label)return null;return i.createElement("section",{"data-testid":"action-button-collection",className:v(ff,{[bf]:"Right"===e.horizontalPosition,[Ef]:"Center"===e.horizontalPosition,[yf]:"Left"===e.horizontalPosition})},i.createElement(Ur.PrimaryButton,{href:a.url,className:Cf,onClick:()=>{"ATVHome"===(null==n?void 0:n.pageType)&&"Home"===(null==n?void 0:n.subPageType)&&Fn("atv_hm_ocx_continue","ATVModal","Onboarding",void 0,[gn.Click],vn.PageTouch,n.clientVariant,t)}},a.label))};_f.displayName="ActionButtonCollection";const Tf=_f,kf=()=>i.createElement(Xu,{isDynamicMobileVariant:!1});var wf=n("./node_modules/@amzn/dvui/dist/Fable/components/Radio/index.js");const Lf="iZr-9C",If="xKqJ0S",Pf="LWM42a",Df="POTIgi",Sf=e=>i.createElement("div",{className:Lf},i.createElement(Ur.PrimaryButton,{className:If,disabled:e.disablePrimaryButton,testID:"survey-primary-button",textAlign:"center",shape:"rectangle",onClick:e.primaryAction},e.primaryButtonText),e.secondaryButtonText&&i.createElement(qr(),{testID:"survey-close-button",textAlign:"center",shape:"rectangle",onClick:e.secondaryAction},e.secondaryButtonText)),xf={maxRetries:1},Mf=()=>yn;var Nf=n("./src/util/utils/query.ts");const Rf=()=>{const{container:{survey:e}}=i.useContext(_E),t=(0,c.L1)().logger,n=(0,m.getRequestContext)(),{clickstream:a,clickstreamPageContext:r}=i.useContext(N),[o,l]=i.useState(!0),[s,d]=i.useState(1),[u,p]=i.useState(""),g=e=>{e&&Fn(e,sn.ATVModal,cn.IAS,void 0,[gn.ModalRendered],vn.PopUp,null==r?void 0:r.clientVariant,a)},v=e=>{Fn(e,sn.ATVModal,cn.IAS,void 0,[gn.Click],vn.PageHit,null==r?void 0:r.clientVariant,a)};if(i.useEffect((()=>{1==s?g(null==e?void 0:e.notificationPopup.displayRefMarker):s==h&&g(null==e?void 0:e.thankYouPopup.displayRefMarker)}),[s]),!e||0===e.questions.length)return null;if(e.questions.length>0)for(const t of e.questions)if(0===t.options.length)return null;const h=e.questions.length+2,f=()=>{if(1==s)v(e.notificationPopup.clickRefMarker);else if(s>1&&s<h){const t=e.questions[s-2].options.filter((e=>e.optionId==u))[0].button.clickRefMarker;v(t),E()}p(""),d((e=>e+1))},y=()=>{l(!1),v(C())},b=e=>{p(e)},E=()=>{(async(e,t,n)=>{const a=new xn({logger:n,retryLogic:xf,logErrorAsWarning:!0}),i=`${bn(t)}/cdp/usage/RecordIASFeedback`,r={operationName:Dn.RecordIASFeedback,uri:i,query:{...En(t),deviceTypeID:Mf(),firmware:"DVWebNode"},opts:a.constructPostRequest({headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"},body:e})};try{await a.post(r)}catch(e){return n.error(`In-App Survey Failed to submit a response: ${e}`),!1}})({surveyResponses:[{surveyId:e.surveyId,questionId:e.questions[s-2].questionId,optionId:u,pageType:null==r?void 0:r.subPageType,pageId:void 0,clientTime:Date.now()}],geoToken:n.geoToken,deviceTypeId:Mf(),sessionId:n.sessionID,identityContext:n.identityContext,isTest:String(n.isInternal),testIdentificationKey:(0,Nf.RE)("surveyTest")?"QA_Validation_Test":void 0,clientVariant:null==r?void 0:r.clientVariant,clientId:n.customerID},n,t)},C=()=>{switch(s){case 1:return e.notificationPopup.closeButton.clickRefMarker;case h:return e.thankYouPopup.closeButton.clickRefMarker;default:return e.questions[s-2].skipButton.clickRefMarker}};return i.createElement(Jr,{isVisible:o,className:Pf,testID:(()=>{switch(s){case 1:return"survey-notification";case h:return"survey-thankyou";default:return"survey-question"}})(),size:"m",header:i.createElement("span",null,(()=>{switch(s){case 1:return e.notificationPopup.translatedText;case h:return e.thankYouPopup.translatedText;default:return e.questions[s-2].translatedText}})()),body:(()=>{if(1!==s&&s!==h)return i.createElement("div",{className:Df},i.createElement(wf.RadioGroup,{name:"survey-option",selected:u,onChange:b},e.questions[s-2].options.map((e=>i.createElement(wf.Radio,{key:e.optionId,value:e.optionId,label:e.button.translatedText})))))})(),footer:(()=>{switch(s){case 1:return i.createElement(Sf,{primaryButtonText:e.notificationPopup.startButton.translatedText,primaryAction:f,disablePrimaryButton:!1,secondaryButtonText:e.notificationPopup.closeButton.translatedText,secondaryAction:y});case h:return i.createElement(Sf,{primaryButtonText:e.thankYouPopup.closeButton.translatedText,primaryAction:y,disablePrimaryButton:!1});default:return i.createElement(Sf,{primaryButtonText:e.questions[s-2].submitButtonTranslatedText,primaryAction:f,disablePrimaryButton:""==u,secondaryButtonText:e.questions[s-2].skipButton.translatedText,secondaryAction:y})}})(),onRequestClose:y})},Af="YStocV",Of="_8X0hdk",Vf="j2L7H4",Wf="TsUD2x",Bf="+9WL-N",Gf="s86rXm",Hf="qbQjZU",jf="_6HPxhE",$f="se6bjC",zf="fiZRM7",Ff="nfgomr",Uf="pBXLwh",qf="cM7G5-",Kf="VyqPLu",Qf="ft1DJL",Zf="ehozsS",Jf="_6qm79J",Xf="_2fR0wI",Yf="mXKaIY",ey="hiq5X4",ty="k90wEc",ny="w9zmyZ",ay="QRO4j5";function iy(e,t){return(t-e)/6e4}const ry="Q-LvUD",oy="b-7bt8",ly=({startTime:e,endTime:t})=>{const n=kb(),a=Math.round(iy(e,n)),r=Math.round(iy(n,t)),o=Math.round(iy(e,t));return n<e?null:i.createElement("label",null,i.createElement("span",{className:oy,suppressHydrationWarning:!0},"currently airing, at ",a," minutes of ",o," minutes of content play time,"),i.createElement("progress",{role:"presentation",className:ry,value:o-r,max:o}))},sy="GRZ4PZ",cy="HpOtjz",dy="cCPxyE",uy="NKpvKh",my="FVzqqR",py="ixN1a+",gy="WH-k6U",vy="gJvy+4",hy="_2zaN2R",fy="eg51eO",yy="mAWgiT",by="CftJiO",Ey="ObVrDJ",Cy="Iuks5n",_y="nqySy3",Ty="krPlim",ky="KWzQGq",wy="xwZa2x",Ly=i.memo((({title:e,titleImage:t,startTime:n,endTime:a,showPlayArrow:r})=>{const o=h()(my,gy);return i.createElement("div",{className:sy},r&&i.createElement("div",{className:o},i.createElement("div",{className:cy},i.createElement(Po(),{color:"white"}))),i.createElement("img",{src:t,alt:e}),i.createElement("div",{className:uy}),i.createElement("div",{className:dy},i.createElement(ly,{startTime:n,endTime:a})))})),Iy="--Jlwf",Py=({renderButton:e,channelId:t,appFallbackUrl:n,fallbackUrl:a,signInUrl:r,refMarker:o,resumeTime:l,videoMaterialType:s,playbackEnvelope:c,correlationId:d,expiryTime:u,playbackExperiences:m})=>{const{onPlay:p,launchType:g}=(()=>{const e=i.useContext(dr);if(void 0===e)throw new Error("usePlayerContext must be used within a PlayerContext.Provider");return e})(),v=Tb(),h=e=>{t&&v.has(t)&&Aa.logManualImpression(v.get(t),"Select"),p&&a&&t&&(p({playbackUrl:a,fallbackUrl:n,signInUrl:r,contentConfig:{asin:t,videoType:s,trailer:!1,position:l||0,ref:o,playbackEnvelope:d&&c&&u?{correlationId:d,envelope:c,expiration:u}:void 0,playbackExperiences:m}}),e.preventDefault())},f=Boolean(t)&&"EMBEDDED"===g?void 0:a;return Boolean(t&&a)?f?i.createElement("a",{href:f,className:Iy,onClick:h,"data-testid":"play"},e(!0)):i.createElement("button",{type:"button",className:Iy,onClick:h,"data-testid":"play"},e(!0)):i.createElement("div",{className:Iy,"data-testid":"play"},e(!1))},Dy="kYjRkI",Sy="g4Zdop",xy="X3pLs1",My="_2pdinU",Ny="GW+Ly0",Ry="HQhb-P",Ay="XSg6ES",Oy="GRWa3j",Vy="sLbizp",Wy="_3eW2Z5",By="MHZyV6",Gy="OkZrwr";function Hy({nowPlaying:e,titleImage:t,title:n,seriesTitle:a,entitlementMessage:r,entitlementIcon:o,entitlementType:l,startTime:s,endTime:c,synopsis:d,stationTitle:u,nextBroadcastTitle:m,nextBroadcastStartTime:p,nextUp:g,contentMaturityRating:v,contentMaturityTitle:h,subscriptionLabel:f,subscriptionURL:y,onNowLabel:b,upcomingLabel:E,timeRemaining:C,label:_,appFallbackUrl:T,signInUrl:k,channelId:w,disableJs:L,fallbackUrl:I,playbackStatus:P,refMarker:D,resumeTime:S,sessionID:x,videoMaterialType:M,playbackEnvelope:N,correlationId:R,expiryTime:A}){let O=null;return e&&(O=i.createElement(Py,{appFallbackUrl:T,signInUrl:k,channelId:w,disableJs:L,fallbackUrl:I,playbackStatus:P,refMarker:D,resumeTime:S,sessionID:x,videoMaterialType:M,playbackEnvelope:N,correlationId:R,expiryTime:A,renderButton:e=>e?i.createElement(i.Fragment,null,i.createElement(so.PlayButton,{width:"2.5em",height:"2.5em"}),_):null})),l===Wo.Uz.UNENTITLED&&f&&y&&(O=i.createElement("a",{className:Gy,href:y},i.createElement(Oe.Text,null,f))),i.createElement("article",{className:Dy},i.createElement("div",{className:Sy},i.createElement(Ly,{title:null!=a?a:n,titleImage:t,startTime:s,endTime:c,showPlayArrow:!1})),r&&o&&i.createElement("div",{className:xy},i.createElement(nt,{message:r,icon:o})),O&&i.createElement("div",{className:My},O),i.createElement("h2",{id:"airingTitle",className:Ny},null!=a?a:n),a&&a!==n&&i.createElement("span",{id:"episodeTitle",className:Ry},n),i.createElement("div",{className:Ay},e&&i.createElement(i.Fragment,null,i.createElement(Fo.Badge,{variant:Fo.BadgeVariant.linear},b),i.createElement("span",null,C)),!e&&i.createElement(i.Fragment,null,i.createElement("span",{className:Oy},E),i.createElement("span",null,new Date(s).toLocaleTimeString(void 0,{timeStyle:"short"})))),v&&h&&i.createElement("div",{className:Vy},i.createElement(Ol.AgeRating,{rating:v,ariaLabel:h})),d&&i.createElement("p",{id:"airingSynopsis",className:Wy},d),u&&m&&p&&g&&i.createElement("div",{className:By},i.createElement(Zl,{stationTitle:u,nextBroadcastTitle:m,nextBroadcastStartTime:p,nextUpText:g})),i.createElement("div",null))}function jy(e){const t=i.useRef(null),n=i.useRef(!1);return i.useEffect((()=>{if(t.current){var a;const i=document.activeElement,r=t.current.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]');null===(a=r[0])||void 0===a||a.focus();const o=function(e,t){let n=0;return a=>{if("Escape"!==a.key){if("Tab"===a.key){if(a.preventDefault(),1===e.length)return void e[0].focus();const t=a.shiftKey?-1:1;e[n+t]?(e[n+t].focus(),n+=t):-1===t?(e[e.length-1].focus(),n=e.length-1):(e[0].focus(),n=0)}}else t()}}(r,e.callback);return document.addEventListener("keydown",o,!0),()=>{n.current||i.focus(),document.removeEventListener("keydown",o,!0)}}}),[e.callback]),i.useEffect((()=>{document.addEventListener("mousemove",(function(){n.current=!0}),{capture:!0,once:!0})}),[]),i.createElement("div",{ref:t},e.children)}const $y="qIIU6Y",zy="e10R8J",Fy="aFMvan",Uy="m4v4Uv",qy="BPJNVD",Ky="k2EFOZ",Qy="KCFUr3",Zy="CLJbTX",Jy="Va38SP",Xy="_04XrhP",Yy="GIDFX4";function eb(e){const t=i.useRef(null),n=i.useRef(!1);i.useEffect((()=>(document.documentElement.style.overflow="hidden",setTimeout((()=>{var e;null===(e=t.current)||void 0===e||e.classList.add(Qy),setTimeout((()=>{var e,a,i;null===(e=t.current)||void 0===e||e.addEventListener("transitionend",(()=>{var e;n.current=!0,null===(e=t.current)||void 0===e||e.classList.remove(Qy)}),{capture:!0,once:!0}),null===(a=t.current)||void 0===a||a.classList.add(qy),null===(i=t.current)||void 0===i||i.scrollTo({top:0})}),100)}),100),()=>{document.documentElement.style.overflow=""})),[]);const a=()=>{var a,i;n.current&&(n.current=!1,null===(a=t.current)||void 0===a||a.addEventListener("transitionend",e.onClose,{capture:!0,once:!0}),null===(i=t.current)||void 0===i||i.classList.add(Ky))};return i.createElement("div",{className:$y},i.createElement("button",{"data-testid":"station-modal-background-button",className:zy,onClick:a}),i.createElement("div",{"data-testid":"station-modal",className:Fy,id:Uy,ref:t,role:"dialog","aria-modal":"true","aria-labelledby":"airingTitle","aria-describedby":"airingSynopsis"},i.createElement(jy,{callback:a},i.createElement("div",null,e.children),i.createElement("button",{type:"button",onClick:a,className:Zy},i.createElement("div",{className:Jy}),i.createElement("div",{className:`${Jy} ${Xy}`}),i.createElement("span",{className:Yy},"Close modal")))),i.createElement("div",null))}const tb="(max-width: 27.99em)",nb="(min-width: 28em) and (max-width: 55em)",ab="(min-width: 54.99em) and (max-width: 87.5em)",ib="(min-width: 87.49em) and (max-width: 112.5em)",rb="(min-width: 112.49em) and (max-width: 150em)",ob="(min-width: 150.01em)",lb="shaTeH",sb="Qub7YV",cb="_8Jd7tK";function db(){const e=document.createElement("div");e.className=lb;const t=document.querySelector(".pv-station-window")||document.body;t.appendChild(e);const n=e.clientWidth,a=e.clientHeight;return t.removeChild(e),{width:n,height:a}}const ub=e=>Date.now();function mb(e=6e4,t=ub){const[n,a]=i.useState(Date.now());return i.useEffect((()=>{const n=new Date,i=1e3*(60-n.getSeconds())+n.getMilliseconds();let r=0;const o=window.setTimeout((()=>{a(t),clearTimeout(o),r=window.setInterval((()=>{a(t)}),e)}),i);return()=>{clearTimeout(o),clearInterval(r)}}),[e,t]),n}const pb="_9rkBNX",gb="Oj7d3z",vb=e=>{const[t,n]=i.useState(!1),a=i.useRef(void 0),r=i.useRef(new Set);i.useEffect((()=>{if("ATVLive"===e.pageType&&"Home"===e.subPageType)return a.current=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?(r.current.add(e.target.textContent),n(!0)):(r.current.delete(e.target.textContent),r.current.size<1&&n(!1))}))}),{threshold:[.1],rootMargin:"0px 0px -50% 0px"}),()=>{var e;null===(e=a.current)||void 0===e||e.disconnect()}}),[e.pageType,e.subPageType]),i.useEffect((()=>{let e=!1;const t=()=>{if(e)return;e=!0;document.querySelectorAll("[data-entitled=false]").forEach((e=>{var t;null===(t=a.current)||void 0===t||t.observe(e)})),setTimeout((function(){e=!1}),1e3)};return document.addEventListener("scroll",t),()=>{document.removeEventListener("scroll",t)}}),[a]);const o=h()(pb,{[gb]:t});return i.createElement("div",{className:o,role:"presentation"})},hb=i.createContext(void 0),fb=i.createContext(void 0),yb=i.createContext(void 0),bb=i.createContext(void 0),Eb=e=>{const[t,n]=i.useState(null),a=i.useRef(new Map),r=function(){const[e,t]=(0,i.useState)({label:"phone",mobile:!0,pixelsPerMinute:7,nowPlayingThumbnailWidth:0,nowPlayingExtraWidth:72,epgGapWidth:4,stationRowHeight:64});return(0,i.useEffect)((()=>{const e=db().height,n=[{mediaQueryList:window.matchMedia(tb),breakPointInfo:{label:"phone",mobile:!0,pixelsPerMinute:6,nowPlayingThumbnailWidth:0,nowPlayingExtraWidth:72,epgGapWidth:4,stationRowHeight:e}},{mediaQueryList:window.matchMedia(nb),breakPointInfo:{label:"tablet",mobile:!0,pixelsPerMinute:6,nowPlayingThumbnailWidth:0,nowPlayingExtraWidth:72,epgGapWidth:4,stationRowHeight:e}},{mediaQueryList:window.matchMedia(ab),breakPointInfo:{label:"tablet-landscape",mobile:!0,pixelsPerMinute:6,nowPlayingThumbnailWidth:0,nowPlayingExtraWidth:72,epgGapWidth:8,stationRowHeight:e}},{mediaQueryList:window.matchMedia(ib),breakPointInfo:{label:"laptop",mobile:!1,pixelsPerMinute:6,nowPlayingThumbnailWidth:176,nowPlayingExtraWidth:92,epgGapWidth:12,stationRowHeight:e}},{mediaQueryList:window.matchMedia(rb),breakPointInfo:{label:"desktop",mobile:!1,pixelsPerMinute:9,nowPlayingThumbnailWidth:208,nowPlayingExtraWidth:126,epgGapWidth:16,stationRowHeight:e}},{mediaQueryList:window.matchMedia(ob),breakPointInfo:{label:"desktop-large",mobile:!1,pixelsPerMinute:12,nowPlayingThumbnailWidth:240,nowPlayingExtraWidth:174,epgGapWidth:24,stationRowHeight:e}}];function a(e){return function(n){n.matches&&(e.stationRowHeight=db().height,t(e))}}const i="function"==typeof n[0].mediaQueryList.addEventListener;return n.forEach((e=>{e.mediaQueryList.matches&&t(e.breakPointInfo),i?e.mediaQueryList.addEventListener("change",e.listener=a(e.breakPointInfo)):e.mediaQueryList.addListener(e.listener=a(e.breakPointInfo))})),()=>{n.forEach((e=>{i?e.mediaQueryList.removeEventListener("change",e.listener):e.mediaQueryList.removeListener(e.listener)}))}}),[]),e}(),o=mb(e.interval,e.useTimeCallback);return i.createElement(yb.Provider,{value:a.current},i.createElement(bb.Provider,{value:o},i.createElement(hb.Provider,{value:n},i.createElement(fb.Provider,{value:r},i.createElement(vb,{pageType:e.pageType,subPageType:e.subPageType}),e.children)),t&&i.createElement(eb,{onClose:()=>{n(null)}},i.createElement(Hy,t))))},Cb=()=>{const e=i.useContext(hb);if(void 0===e)throw new Error("useDispatchContext must be used within a StationContextProvider");return e},_b=()=>{const e=i.useContext(fb);if(void 0===e)throw new Error("useBreakpointContext must be used within a StationContextProvider");return e},Tb=()=>{const e=i.useContext(yb);if(void 0===e)throw new Error("useCSMElementContext must be used within a StationContextProvider");return e},kb=()=>{const e=i.useContext(bb);if(void 0===e)throw new Error("useTimeContext must be used within a StationContextProvider");return e},wb="urGy6w",Lb="INH50t",Ib=Array.from({length:16}),Pb=i.memo((function({previous:e,onNowLabel:t}){const n=_b(),a=30*n.pixelsPerMinute;return i.createElement("div",{className:wb},Ib.map(((r,o)=>{const l=new Date(e);l.setMinutes(l.getMinutes()+30*o);let s={width:`${a}px`};return 0===o&&(s={width:`${a+n.nowPlayingExtraWidth}px`}),i.createElement("div",{key:l.toString(),className:Lb,style:s},0===o?null!=t?t:"On now":l.toLocaleTimeString(void 0,{timeStyle:"short"}))})))}));function Db(e){const t=new Date(e);t.setSeconds(0),t.setMilliseconds(0);const n=new Date(e);n.setSeconds(0),n.setMilliseconds(0);let a=0,i=0;const r=t.getMinutes();return r<30?(a=r,t.setMinutes(0),i=30-r,n.setMinutes(30)):(a=r-30,t.setMinutes(30),i=60-r,n.setHours(n.getHours()+1),n.setMinutes(0)),{next:n.getTime(),minutesToNext:i,previous:t.getTime(),minutesFromPrevious:a}}const Sb=new Map,xb=(e,t,n,a)=>{const i=JSON.stringify({start:e,end:t,pixelsPerMinute:n,epgGapWidth:a});if(Sb.has(i))return Sb.get(i);let r=0;r=(t-e)/6e4;const o=r/30;let l=0;o>1&&(l=(o-1)*a);const s=r*n+l;return Sb.set(i,s),s},Mb="rodmVA",Nb="xrPv4l",Rb="DSwTwf",Ab="YaVq+T",Ob="s6aP86",Vb="_8hrQue",Wb="e1b3MK",Bb="GGLbee",Gb=e=>{var t,n,a;const r=kb(),o=null!==(t=null===(n=(0,s.G4)().render)||void 0===n?void 0:n.isRTL)&&void 0!==t&&t,l=Cb(),c=_b(),d=i.useRef(null),u=i.useRef(null),m=i.useRef({collapsedDetailsWidth:0,hoveredDetailsWidth:0,hoveredDetailsOffset:0,initialImageWidth:0,initialDetailsWidth:0}),{minutesFromPrevious:p,previous:g}=Db(r),v=xb(g,e.endTime,c.pixelsPerMinute,c.epgGapWidth)+c.nowPlayingExtraWidth;i.useEffect((()=>{if(d.current&&u.current){var t;m.current.initialImageWidth=d.current.clientWidth;const n=document.createElement("div");n.style.width="auto",n.style.position="absolute",n.style.whiteSpace="nowrap",n.style.top="0px",n.style.padding="var(--dvui-spacing-400)";const a=document.createElement("span");a.style.fontSize="var(--font-size-body)",a.textContent=null!==(t=e.seriesTitle)&&void 0!==t?t:e.title;const i=document.createElement("span");i.style.fontSize="var(--font-size-metadata)",i.style.fontWeight="700",i.textContent=e.seriesTitle?e.title:"",n.appendChild(a),n.appendChild(document.createElement("br")),n.appendChild(i),u.current.appendChild(n),m.current.initialDetailsWidth=n.clientWidth,u.current.removeChild(n)}}),[e.title,e.seriesTitle]),i.useEffect((()=>{if(u.current){const e=1.25*m.current.initialImageWidth-m.current.initialImageWidth,t=-1*e;m.current={...m.current,collapsedDetailsWidth:v,hoveredDetailsWidth:Math.max(m.current.initialDetailsWidth,v),hoveredDetailsOffset:o?t:e},u.current.style.setProperty("--width-collapsed",`${m.current.collapsedDetailsWidth}px`),u.current.style.setProperty("--width-hovered",`${m.current.hoveredDetailsWidth}px`),u.current.style.setProperty("--offset-hovered",`${m.current.hoveredDetailsOffset}px`)}}),[v,o]),i.useEffect((()=>{if(u.current){const e=(30-p)/30*100,t=`calc(${p/30*100}% + ${c.nowPlayingExtraWidth/100*e}px)`;u.current.style.setProperty("--gradient-progress",t),u.current.style.setProperty("--background-size",`${30*c.pixelsPerMinute+c.epgGapWidth+c.nowPlayingExtraWidth}px`)}}),[c.epgGapWidth,c.pixelsPerMinute,c.nowPlayingExtraWidth,p]);const f=()=>{l(e),e.logModalOpen()},y=v+c.nowPlayingThumbnailWidth,b={width:0!==m.current.collapsedDetailsWidth?`${y}px`:"auto"},E=h()(py,Mb,{[fy]:e.isEntitled}),C=h()(hy,Rb);return i.createElement("div",{className:E,style:b},i.createElement("div",{className:vy,ref:d},i.createElement(Py,{appFallbackUrl:e.appFallbackUrl,signInUrl:e.signInUrl,channelId:e.channelId,disableJs:e.disableJs,fallbackUrl:e.fallbackUrl,playbackStatus:e.playbackStatus,refMarker:e.refMarker,resumeTime:e.resumeTime,sessionID:e.sessionID,videoMaterialType:e.videoMaterialType,playbackEnvelope:e.playbackEnvelope,correlationId:e.correlationId,expiryTime:e.expiryTime,renderButton:t=>{var n;const a=i.createElement(Ly,{title:null!==(n=e.seriesTitle)&&void 0!==n?n:e.title,titleImage:e.titleImage,startTime:e.startTime,endTime:e.endTime,showPlayArrow:t});return t?i.createElement(i.Fragment,null,a,i.createElement("span",{className:wy},e.label)):i.createElement("button",{type:"button",onClick:f,className:_y},a)}})),i.createElement("button",{type:"button",className:C,ref:u,onClick:f,"data-testid":"details"},i.createElement("div",{className:Nb},i.createElement("div",{className:yy},i.createElement("div",{className:by},e.timeRemaining),i.createElement("div",{className:ky},null!==(a=e.seriesTitle)&&void 0!==a?a:e.title),e.seriesTitle&&e.seriesTitle!==e.title&&i.createElement("div",{className:Ey},e.title),i.createElement("div",{className:Cy},e.contentMaturityRating),i.createElement("div",{className:Ty},i.createElement(ly,{startTime:e.startTime,endTime:e.endTime}))))))},Hb="pO0coK",jb="wS+H6E",$b="_84xDRG",zb="K7rJNV",Fb="Lf47qd",Ub="LaEiIu",qb="_70LQ-O",Kb="_8Wdb1I",Qb=i.memo((function(e){var t;const n=Cb(),{pixelsPerMinute:a,epgGapWidth:r}=_b(),o=xb(e.startTime,e.endTime,a,r),l={width:`${o}px`},s=i.useRef(null);i.useEffect((()=>{if(s.current){var t;const n=document.createElement("div");n.style.width="auto",n.style.position="absolute",n.style.whiteSpace="nowrap",n.style.top="0px",n.style.padding="var(--dvui-spacing-400)";const a=document.createElement("span");a.style.fontSize="var(--font-size-body)",a.textContent=null!==(t=e.seriesTitle)&&void 0!==t?t:e.title;const i=document.createElement("span");i.style.fontSize="var(--font-size-metadata)",i.style.fontWeight="700",i.textContent=e.seriesTitle?e.title:"",n.appendChild(a),n.appendChild(document.createElement("br")),n.appendChild(i),s.current.appendChild(n),s.current.style.setProperty("--width-collapsed",`${o}px`),s.current.style.setProperty("--width-hovered",`${Math.max(n.clientWidth,o)}px`),s.current.removeChild(n)}}),[e.title,e.seriesTitle,o]);const c=h()(Hb,Ab,{[$b]:e.isEntitled}),d=h()(jb,Rb),u=new Date(e.startTime).toLocaleTimeString(void 0,{timeStyle:"short"});return i.createElement("button",{type:"button",className:c,style:l,onClick:()=>{n(e),e.logModalOpen()},"data-testid":"details"},i.createElement("span",{className:d,ref:s},i.createElement("div",{className:Nb},i.createElement("div",{className:qb},i.createElement("div",{className:zb,suppressHydrationWarning:!0},u),i.createElement("div",{className:Kb},null!==(t=e.seriesTitle)&&void 0!==t?t:e.title),e.seriesTitle&&e.seriesTitle!==e.title&&i.createElement("div",{className:Fb},e.title),i.createElement("div",{className:Ub},e.contentMaturityRating)))))})),Zb="UBLm9e",Jb=i.memo((function({startTime:e,endTime:t}){const{pixelsPerMinute:n,epgGapWidth:a}=_b(),r={width:`${xb(e,t,n,a)}px`};return i.createElement("div",{className:Zb,style:r})}));function Xb(){return Xb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Xb.apply(this,arguments)}const Yb=`ElxsoC ${Ob}`,eE=e=>{const t=Tb(),{programs:n,refMarker:a,index:r}=e,{clickstream:o,clickstreamPageContext:l}=i.useContext(N),s=i.useCallback((()=>{l&&Fn(null!=a?a:"atv_unknown",l.pageType,l.subPageType,void 0,[gn.Click],void 0,l.clientVariant,o)}),[o,l,a]),c=i.useCallback((()=>{e.metrics.csm.titleID&&t.has(e.metrics.csm.titleID)&&Aa.logManualImpression(t.get(e.metrics.csm.titleID),"Highlight")}),[e.metrics.csm.titleID,t]),d=i.useCallback((()=>{e.metrics.csm.titleID&&t.has(e.metrics.csm.titleID)&&Aa.logManualImpression(t.get(e.metrics.csm.titleID),"Select")}),[e.metrics.csm.titleID,t]);return i.createElement("ol",{className:Yb,onMouseEnter:c,onClick:d,role:"presentation","data-index":r},n.map(((e,t)=>i.createElement("li",{"data-testid":"card",key:`${e.stationId}_${e.stationTitle}_${e.title}_${e.startTime.toString()}`},function(e,t,n){return 0===t?i.createElement(Gb,Xb({},e,{logModalOpen:n})):e.endsAfterScheduledTimeLimit?i.createElement(Jb,{startTime:e.startTime,endTime:e.endTime}):i.createElement(Qb,Xb({},e,{logModalOpen:n}))}(e,t,s)))))},tE=i.memo((function(e){const t=Tb(),n=i.useCallback((n=>{e.metrics.csm.titleID&&(n&&!t.has(e.metrics.csm.titleID)?(Aa.observe(n,e.metrics.csm),t.set(e.metrics.csm.titleID,n)):null===n&&t.has(e.metrics.csm.titleID)&&(Aa.unobserve(t.get(e.metrics.csm.titleID)),t.delete(e.metrics.csm.titleID)))}),[]),a=h()(lb,{[sb]:e.isEntitled});return i.createElement("div",{className:a,ref:n},i.createElement("div",{className:cb},i.createElement("img",{src:e.url,alt:e.title})))})),nE="efCJqo";const aE=i.forwardRef((function(e,t){const{pixelsPerMinute:n,epgGapWidth:a,nowPlayingThumbnailWidth:r,nowPlayingExtraWidth:o}=_b(),l=r+o+30*n*16+15*a,{data:s,itemHeight:c,offScreenCount:d,onScroll:u}=e,[{isScrolling:m,scrollOffset:p,numberOfVisibleItems:g},v]=i.useState({isScrolling:!1,scrollOffset:0,numberOfVisibleItems:10}),{actions:h}=function(){const e=i.useContext(_E);if(0===Object.keys(e).length)throw new Error("useBaseContainerContext must be used within a BaseContainerContext.Provider");return e}(),f=i.useRef(null);i.useEffect((()=>{const e=(0,w.D)((()=>{v((e=>({...e,isScrolling:!1})))}),150);function t(){v((e=>{if(f.current){const t=Nh(),n=f.current.getBoundingClientRect(),a=n.top+t;if(a>t+document.documentElement.clientHeight||n.bottom<0)return{...e,numberOfVisibleItems:0};const i=Math.max(0,Math.min(t,document.documentElement.scrollHeight-document.documentElement.clientHeight)),r=Math.max(0,i-a);return{numberOfVisibleItems:Math.min(Math.ceil(document.documentElement.clientHeight/c),Math.ceil((document.documentElement.clientHeight-Math.max(0,n.top))/c),Math.ceil(Math.min(document.documentElement.clientHeight,n.bottom)/c)),isScrolling:!0,scrollOffset:r}}return e})),e()}return Rh(t),()=>{Ah(t)}}),[c]),i.useEffect((()=>{u&&u({isScrolling:m,scrollOffset:p,numberOfVisibleItems:g})}),[m,p,g,u]);const[y,b]=function(e,t,n,a,i){const r=function(e,t,n){return Math.max(0,Math.min(e-1,Math.floor(n/t)))}(e,t,a),o=function(e,t,n){return Math.max(0,Math.min(e-1,t+n-1))}(e,r,n),l=Math.max(0,r-i),s=Math.min(e-1,o+i);return[l,s]}(s.length,c,g,p,d),E=[],C=[];for(let e=y;e<=b;e++)E.push(i.createElement(tE,{key:`${s[e].programs[0].stationId}_${s[e].title}`,title:s[e].title,url:s[e].url,isEntitled:s[e].isEntitled,metrics:s[e].metrics})),C.push(i.createElement(eE,{key:`${s[e].programs[0].stationId}_${s[e].programs[0].title}_${s[e].programs[0].startTime}`,index:e,programs:s[e].programs,metrics:s[e].metrics,refMarker:s[e].refMarker}));const _=y*c,T=(s.length-1-b)*c;return i.createElement("div",{className:"pv-station-window","data-testid":"station-window",ref:f},i.createElement("div",{style:{height:`${_}px`}}),i.createElement("div",{className:nE},i.createElement("div",{className:`${Jf} ${Zf}`,style:{pointerEvents:m?"none":"auto"}},E),i.createElement("div",{className:`${ny} ${Zf}`,ref:t,"data-station-scroll-sync":"true","data-testid":"station-carousels-list"},i.createElement("div",{className:ay,style:{width:`${l}px`,pointerEvents:m?"none":"auto"}},C))),i.createElement("div",{style:{height:`${T}px`}}),h.onPaginateContainer&&i.createElement(Uh,{onPaginateContainer:h.onPaginateContainer}))}));function iE(e){var t;const{pixelsPerMinute:n,epgGapWidth:a,nowPlayingThumbnailWidth:r,nowPlayingExtraWidth:o,mobile:l,stationRowHeight:s}=_b(),c=i.useRef(null),d=i.useRef(null),u=i.useRef(null),m=i.useRef(null),p=i.useRef(null);i.useEffect((()=>{var e,t,n;const a=document.getElementById("pv-nav-container"),i=2*(null!==(e=null==a?void 0:a.clientHeight)&&void 0!==e?e:0)+(null!==(t=null===(n=m.current)||void 0===n?void 0:n.clientHeight)&&void 0!==t?t:0),r=u.current;function o(){let e={top:0};var t,n,a,o,l,s;(m.current?e=m.current.getBoundingClientRect():d.current&&(e=d.current.getBoundingClientRect()),e.top<=i)?(null===(t=d.current)||void 0===t||t.classList.add(Uf),null===(n=m.current)||void 0===n||n.classList.add(Uf),null===(a=p.current)||void 0===a||a.classList.add(Uf),r&&(r.style.height=`${i}px`)):(null===(o=d.current)||void 0===o||o.classList.remove(Uf),null===(l=m.current)||void 0===l||l.classList.remove(Uf),null===(s=p.current)||void 0===s||s.classList.remove(Uf),r&&(r.style.height="0px"))}var l;return Rh(o),l={top:1,behavior:"smooth"},window.scrollBy(l),()=>{Ah(o),r&&(r.style.height="0px")}}),[l]),i.useEffect((()=>{(e=>{const t=new Set(document.querySelectorAll("[data-station-scroll-sync]"));let n=null;for(const l of t){var a,i,r,o;l.removeEventListener("scroll",l.syncOthersOnScroll,!1),null!==(a=n)&&void 0!==a||(n=null!==(i=l.storedScrollOffset)&&void 0!==i?i:0),l.scrollLeft=n,null===(r=l.closest(`.${Af}`))||void 0===r||r.classList.toggle(Of,Math.abs(l.scrollLeft)>0),null===(o=l.closest(`.${Af}`))||void 0===o||o.classList.toggle(Bf,l.scrollLeft!==e-l.clientWidth),l.addEventListener("scroll",l.syncOthersOnScroll=function(){const n=l.scrollLeft,a=n!==l.storedScrollOffset;var i,r;if(l.storedScrollOffset=n,l.classList.contains(ny))if(null===(i=l.closest(`.${Af}`))||void 0===i||i.classList.toggle(Of,Math.abs(n)>0),l.scrollLeft+l.clientWidth+4>=e)l.scrollLeft=Math.max(0,Math.min(l.scrollLeft,e-l.clientWidth)),null===(r=l.closest(`.${Af}`))||void 0===r||r.classList.toggle(Bf,!1);else if(l.scrollLeft!==e-l.clientWidth){var o;null===(o=l.closest(`.${Af}`))||void 0===o||o.classList.toggle(Bf,!0)}for(const e of t)e!==l&&(e.storedScrollOffset=n,a&&Math.round(e.scrollLeft-n)&&(e.scrollLeft=n))},{passive:!0})}})(r+o+(30*n*16+15*a))}),[n,a,r,o]);const g=i.useCallback((({currentTarget:t})=>{if(c.current){const{direction:a}=t.dataset,i=30*n*3,r=Math.floor(c.current.scrollLeft);let o=e.isRTL?r+i:r-i;"end"===a&&(o=e.isRTL?r-i:r+i),c.current.scrollTo({top:0,left:o,behavior:"auto"})}}),[n,e.isRTL]),{previous:v,minutesFromPrevious:f}=Db(e.currentTime),y=f/30*100+"%",b=e.isRTL?{right:y}:{left:y},E={width:`${30*n+a}px`},C=e.isRTL?{...E,right:`${o}px`}:{...E,left:`${o}px`},_=e.isEntitled||"Prime"===e.blockTitle,T=h()(Af,{[qf]:_,[Kf]:"Prime"===e.blockTitle}),k=h()(Xf,Wb),w=h()(Yf,Bb);return i.createElement("section",{className:T,"data-testid":"epg-container"},i.createElement("div",{className:Hf},i.createElement("div",{className:Qf,ref:u})),i.createElement("div",{className:Ff,"data-entitled":_,"data-testid":"station-heading",ref:d},i.createElement("h2",null,e.blockTitle)),i.createElement("div",{className:`${Vf} ${Wf}`},i.createElement("button",{type:"button",className:`${$f} ${Wf}`,"data-direction":"start",onClick:g,"data-testid":"left-arrow"},i.createElement(X(),null),i.createElement("span",{className:zf},"Scroll toward carousel start"))),i.createElement("div",{className:`${Vf} ${Gf}`},i.createElement("button",{type:"button",className:`${$f} ${Gf}`,"data-direction":"end",onClick:g,"data-testid":"right-arrow"},i.createElement("span",{className:zf},"Scroll toward carousel end"),i.createElement(X(),null))),i.createElement("div",{className:jf},i.createElement(aE,{data:e.stations,itemHeight:s+a,offScreenCount:2,ref:c})),!l&&i.createElement(i.Fragment,null,i.createElement("div",{className:k,"data-station-scroll-sync":"true","data-testid":"station-time-bar",ref:m},i.createElement(Pb,{previous:v,onNowLabel:null===(t=e.stations[0])||void 0===t||null===(t=t.programs[0])||void 0===t?void 0:t.onNowLabel})),i.createElement("div",{className:w,"data-station-scroll-sync":"true","data-testid":"station-time-tip",ref:p},i.createElement("div",{className:ey,style:{width:`${o+30*n*16+15*a}px`}},i.createElement("div",{className:ey,style:C},i.createElement("div",{className:ty,style:b},new Date(e.currentTime).toLocaleTimeString(void 0,{timeStyle:"short"})))))))}const rE=h()("jEKDaL",Vb),oE=i.memo((function({children:e}){return i.createElement("div",{className:rE},e)}));function lE(e,t,n,a){const i=iy(e,t);if(i/60>1){const e=Math.floor(i/60).toString(),t=Math.floor(i%60).toString();return n?n.replace("{h}",e).replace("{m}",t):`${e}hr ${t}min left`}const r=Math.floor(i).toString();return a?null==a?void 0:a.replace("{m}",r):`${r} min left`}const sE=new Map;function cE(e,t,n){const{previous:a}=Db(t),i=new Date(a);i.setHours(i.getHours()+7),i.setMinutes(i.getMinutes()+55);return e.entities.map(((a,r)=>{var o,l,s,c,d,u,m,p,g,v,h,f;if(!a.station)return null;const y=null!==(o=null===(l=a.station)||void 0===l||null===(l=l.strings)||void 0===l?void 0:l.timeLeftHours)&&void 0!==o?o:"{h}hr {m}min left",b=null!==(s=null===(c=a.station)||void 0===c||null===(c=c.strings)||void 0===c?void 0:c.timeLeftMinutes)&&void 0!==s?s:"{m} min left",E=null===(d=a.station)||void 0===d?void 0:d.schedule.map(((n,r,o)=>{var l,s,c,d,u,m,p,g,v,h,f,E,C,_,T,k,w,L,I,P,D,S,x,M,N,R,A,O,V,W,B,G,H,j,$,z,F,U,q,K;const Q=n.start,Z=n.end,J=Q<t;return{startTime:Q,endTime:Z,titleImage:null!==(l=null===(s=n.metadata.image)||void 0===s?void 0:s.url)&&void 0!==l?l:"",title:null!==(c=n.metadata.title)&&void 0!==c?c:"",seriesTitle:n.metadata.seriesTitle,synopsis:null!==(d=n.metadata.synopsis)&&void 0!==d?d:"",stationId:null!==(u=null===(m=a.station)||void 0===m?void 0:m.id)&&void 0!==u?u:"",stationTitle:null!==(p=null===(g=a.station)||void 0===g?void 0:g.name)&&void 0!==p?p:"",nextBroadcastTitle:null!==(v=null!==(h=null===(f=o[r+1])||void 0===f?void 0:f.metadata.seriesTitle)&&void 0!==h?h:null===(E=o[r+1])||void 0===E?void 0:E.metadata.title)&&void 0!==v?v:"",nextBroadcastTitleImage:null!==(C=null===(_=o[r+1])||void 0===_||null===(_=_.metadata.image)||void 0===_?void 0:_.url)&&void 0!==C?C:"",nextBroadcastStartTime:null===(T=o[r+1])||void 0===T?void 0:T.start,nextBroadcastEndTime:null===(k=o[r+1])||void 0===k?void 0:k.end,isEntitled:"Entitled"===(null===(w=e.entitlementCues)||void 0===w?void 0:w.entitledCarousel),entitlementMessage:null!==(L=null===(I=a.entitlementCues)||void 0===I||null===(I=I.focusMessage)||void 0===I?void 0:I.message)&&void 0!==L?L:"",entitlementIcon:null!==(P=null===(D=a.entitlementCues)||void 0===D||null===(D=D.focusMessage)||void 0===D?void 0:D.icon)&&void 0!==P?P:"OFFER_ICON",entitlementType:null!==(S=null===(x=a.entitlementCues)||void 0===x?void 0:x.entitlementType)&&void 0!==S?S:Wo.Uz.UNENTITLED,contentMaturityTitle:null!==(M=null===(N=n.metadata.contentMaturityRating)||void 0===N?void 0:N.title)&&void 0!==M?M:"",contentMaturityRating:null!==(R=null===(A=n.metadata.contentMaturityRating)||void 0===A?void 0:A.rating)&&void 0!==R?R:"",nextUp:null!==(O=null===(V=a.station)||void 0===V||null===(V=V.strings)||void 0===V?void 0:V.nextUp)&&void 0!==O?O:"",onNowLabel:null!==(W=null===(B=a.station)||void 0===B||null===(B=B.strings)||void 0===B?void 0:B.onNowLabel)&&void 0!==W?W:"",upcomingLabel:null!==(G=null===(H=a.station)||void 0===H||null===(H=H.strings)||void 0===H?void 0:H.upcomingLabel)&&void 0!==G?G:"",timeRemaining:J?lE(t,Z,y,b):"",...a.playbackAction,...null===(j=a.playbackAction)||void 0===j?void 0:j.playbackExperienceMetadata,refMarker:null!==($=null===(z=a.playbackAction)||void 0===z?void 0:z.refMarker)&&void 0!==$?$:"unknown",subscriptionLabel:null!==(F=null===(U=a.promotedAcquisitionGroup)||void 0===U?void 0:U.label)&&void 0!==F?F:"",subscriptionURL:null!==(q=null===(K=a.link)||void 0===K?void 0:K.url)&&void 0!==q?q:"",nowPlaying:J,endsAfterScheduledTimeLimit:Z>i.getTime()}})).filter((e=>e.endTime>t)),C=function(...e){var t,n,a,i;const r=e.join("_");if(sE.has(r))return sE.get(r);const o={csm:{collectionImpressionData:e[0],carouselPosition:e[1],itemPosition:e[2],widgetType:null!==(t=e[3])&&void 0!==t?t:"",refMarker:null!==(n=e[4])&&void 0!==n?n:"unknown",imageURL:null!==(a=e[5])&&void 0!==a?a:"",titleID:null!==(i=e[6])&&void 0!==i?i:"",itemAnalytics:e[7]}};return sE.set(r,o),o}(n.impressionData,n.carouselPosition,r,a.widgetType,a.refMarker,null===(u=a.station)||void 0===u?void 0:u.logo,null===(m=a.station)||void 0===m?void 0:m.id,a.itemAnalytics);return{url:null!==(p=null===(g=a.station)||void 0===g?void 0:g.logo)&&void 0!==p?p:"",title:null===(v=a.station)||void 0===v?void 0:v.name,programs:E,metrics:C,refMarker:null!==(h=a.refMarker)&&void 0!==h?h:"",isEntitled:"Entitled"===(null===(f=e.entitlementCues)||void 0===f?void 0:f.entitledCarousel)}})).filter((e=>!!e&&0!==(null==e?void 0:e.programs.length)))}function dE(){var e,t,n,a,r;const o=(0,s.G4)(),{container:l,index:c}=function(){const e=i.useContext(_E);if(0===Object.keys(e).length)throw new Error("useBaseContainerContext must be used within a BaseContainerContext.Provider");return e}(),d=kb(),u=cE(l,d,{carouselPosition:c,impressionData:null!==(e=l.impressionData)&&void 0!==e?e:""});if(0===u.length)return i.createElement(i.Fragment,null);const m=null!==(t=null===(n=o.render)||void 0===n?void 0:n.isRTL)&&void 0!==t&&t,p="Entitled"===(null===(a=l.entitlementCues)||void 0===a?void 0:a.entitledCarousel),g=null!==(r=l.title)&&void 0!==r?r:"";return i.createElement(oE,null,i.createElement(iE,{blockTitle:g,stations:u,isEntitled:p,isRTL:m,currentTime:d}))}const uE=(e,t)=>{const n={};return e.forEach(((e,a)=>{const i=e.entityID||e.titleID;i&&(n[i]=a+t)})),n},mE=e=>e.some((e=>"ActionButtonCollection"===e.containerType))?e.sort(((e,t)=>"ActionButtonCollection"===e.containerType&&"ActionButtonCollection"!==t.containerType?1:"ActionButtonCollection"!==e.containerType&&"ActionButtonCollection"===t.containerType?-1:0)):e,pE=(e,t)=>{var n;const a={...e};a.watchlistAction=t;const i=null===(n=a.overflowMenu)||void 0===n||null===(n=n.items)||void 0===n?void 0:n.find((e=>e.itemType===Wo.Np.WatchlistAction));return i&&(i.action=t,i.text=(0,ao.Wb)(t.text)),a};function gE(e,t){switch(t.type){case"HideThis":{const{container:n}=e,{entities:a}=n,{entityIndex:i}=t,r=[...a];return r[i]={...r[i],hideThisAction:t.payload},{...e,container:{...n,entities:r}}}case"OnNewEntities":{const{container:n,entityIDToIndexMap:a}=e,{entities:i}=n,{entities:r}=t.payload,o=[...i,...r],l=uE(r,i.length);return{...e,container:{...n,entities:o},entityIDToIndexMap:{...a,...l}}}case"ToggleWatchlist":{const{container:n}=e,{entityIndex:a,payload:i}=t,{entities:r}=n,o=[...r];return o[a]=pE(o[a],i),{...e,container:{...n,entities:o}}}case"RemoveItem":{const{removedItemsMap:n,container:a}=e,{entityIndex:i,payload:{removedOverlayMessage:r,canUndoRemoval:o,undo:l,undoMessage:s}}=t,{entities:c}=a,d={...n};return d[c[i].titleID]={removedOverlayMessage:r,canUndoRemoval:o,undo:l,undoMessage:s},{...e,removedItemsMap:d}}case"RestoreItem":{const{removedItemsMap:n,container:a}=e,{entityIndex:i}=t,{entities:r}=a,o={...n};return delete o[r[i].titleID],{...e,removedItemsMap:o}}case"SetReaction":{const{container:n}=e,{entities:a}=n,{entityIndex:i,payload:r}=t,o=[...a],l=o[i].reactionAction;return l?(o[i]={...o[i],reactionAction:{...l,reaction:r}},{...e,container:{...n,entities:o}}):e}default:return e}}function vE(e,t){switch(t.type){case"EnrichItemMetadata":return{...e,[t.entityID]:t.payload};case"ToggleWatchlist":{const n=e[t.entityID];if(!n)return e;const a=pE(n,t.payload);return{...e,[t.entityID]:a}}case"SetLiveEventsCustomerIntent":return((e,t)=>{const n={...e};return Object.keys(n).map((e=>{var a;null!==(a=n[e])&&void 0!==a&&a.recordSeason&&(n[e].recordSeason=((e,t)=>!t||t.error?e:"SSM_DISMISSED"===t.intent?{...e,checkbox:void 0}:"OPT_IN"===t.intent?{}:e)(n[e].recordSeason,t))})),n})(e,t.payload);default:return e}}const hE="_5noh4m",fE="_7K84BP";function yE({url:e,info:t}){if(void 0!==e&&"string"!=typeof e){new Ct.Oc(`DVWebNode:${t}:URLError`).error(e)}return e}const bE=({slotName:e,links:t})=>i.createElement("div",{className:hE,"data-testid":"strategy-bar"},e&&i.createElement("span",{className:fE},e),t&&t.map(((e,t)=>i.createElement("a",{className:fE,key:t,href:yE({url:e.url,info:"StrategyBar"}),target:"_blank"},e.label))));bE.displayName="StrategyBar";const EE=i.memo(bE),CE=i.createContext({});CE.displayName="PaginationApiContext";const _E=i.createContext({});_E.displayName="BaseContainerContext";const TE=i.memo((e=>{const{container:t,nextContainer:n,apiInteractions:a,isTrailerAutoplayEnabled:r,shouldDisplayStrategy:o,logger:l,consumingWidgetType:s,displayOverlayOnWatchlistRemoval:c,index:d,resiliencyCxMode:u}=e,p=(0,m.getRequestContext)(),{entities:g,paginationServiceToken:v,paginationTargetId:h}=t,[f,y]=i.useState(t.paginationStartIndex),[b,E]=i.useState(t.paginationServiceToken),[C,_]=i.useState(!1),[T,w]=i.useState(!0),L={container:t,entityIDToIndexMap:uE(g,0),removedItemsMap:{}},[P,D]=i.useReducer(gE,L),[S,x]=i.useTransition(),[M,R]=i.useReducer(vE,{}),[A,O]=i.useState(!1),{paginateContainer:V}=i.useContext(CE),{isInResiliencyMode:W,clickstream:B,clickstreamPageContext:G,contingencies:H}=i.useContext(N),{hideBelowContainerIndex:j}=i.useContext(I),{container:$,entityIDToIndexMap:z,removedItemsMap:F}=P,{debugData:U}=$,q=e=>{if(!e)return;const t=z[e],{entities:n}=$;return n[t]},K="StandardHero"===$.containerType&&"TENTPOLE"===u,Q=(()=>{if(V&&v&&h)return async()=>{if(!C)try{var e;_(!0);const t=null!=f?f:$.entities.length,n=await V({paginationTargetId:h,serviceToken:null!=b?b:v,startIndex:t,isPurchaseAndRentalCarousel:null===(e=$.seeMoreLink)||void 0===e||null===(e=e.url)||void 0===e?void 0:e.startsWith("/gp/video/mystuff/library/"),journeyIngressContext:$.journeyIngressContext});x((()=>{var e;D({type:"OnNewEntities",payload:{entities:n.entities}}),w(n.hasMoreItems),y(n.startIndex),E(null===(e=n.pagination)||void 0===e?void 0:e.serviceToken),_(!1)}))}catch(e){l.count(`DVWeb::${s}::BaseContainer::PaginateContainerError`,1,!1),k.c.count("DVWebBaseContainerError",{ConsumingWidgetType:s,ErrorType:"PaginateContainerError"}),l.warn(e),w(!1),_(!1)}}})(),Z=(({enrichments:e,entityIDToIndexMap:t,consumingWidgetType:n,context:a,displayOverlayOnWatchlistRemoval:i,clickstream:r,clickstreamPageContext:o,dispatchContainerData:l,dispatchEnrichments:s,logger:c,apiInteractions:d})=>{const u=async(e,r,o,p)=>{try{const n=await d.toggleWatchlist(e,a);if(!n)return;const{watchlistAction:c}=n;if(s({type:"ToggleWatchlist",entityID:r,payload:c}),"Add"===e.tag&&p){const e=await d.setLiveEventsCustomerIntent(p,a);s({type:"SetLiveEventsCustomerIntent",payload:e})}i&&("Remove"===e.tag?l({type:"RemoveItem",entityIndex:t[r],payload:{removedOverlayMessage:e.postActionOverlayMessage,canUndoRemoval:!0,undoMessage:e.undoMessage,undo:()=>{u(c,r,o)}}}):l({type:"RestoreItem",entityIndex:t[r]})),m(e,r,o)}catch(e){c.count(`DVWeb::${n}::BaseContainer::WatchlistToggleError`,1,!1),k.c.count("DVWebBaseContainerError",{ConsumingWidgetType:n,ErrorType:"WatchlistToggleError"}),c.warn(e)}},m=(e,t,n)=>{const a="remove"===e.tag.toLowerCase()?gn.RemoveFromWatchlist:gn.AddToWatchlist;Fn(`${null!=n?n:"atv_unknown"}_wtl_${a===gn.AddToWatchlist?"add":"rmv"}_hov`,null==o?void 0:o.pageType,null==o?void 0:o.subPageType,t,[a],void 0,null==o?void 0:o.clientVariant,r)};return async(t,n,a)=>{var i,r;null==t||t.preventDefault();const o=null===(i=e[n])||void 0===i?void 0:i.watchlistAction;if(!o)return;const l=null===(r=e[n])||void 0===r?void 0:r.recordSeason,s=l&&(e=>{const{customerIntentAction:t,watchlistAddon:n}=e;if(t&&n)return{id:t.query.id,token:t.query.token,scope:n.scope,intent:n.intent}})(l);return u(o,n,a,s)}})({enrichments:M,entityIDToIndexMap:z,consumingWidgetType:s,displayOverlayOnWatchlistRemoval:c,dispatchContainerData:D,dispatchEnrichments:R,context:p,clickstreamPageContext:G,clickstream:B,logger:l,apiInteractions:a}),J={container:$,nextContainer:n,enrichments:M,enrichmentAttempted:A,helpers:{getEntityFromContainer:q},actions:{getEnrichments:(e,t,n,i,r)=>!K&&!W&&!Boolean(null==H?void 0:H.disableEnrichItemMetadata)&&e.forEach((e=>(async(e,t,n,i,r)=>{const o=((e,t)=>{switch(e){case"Charts":return"TOP_CHART";case"StandardHero":return"STANDARD_HERO";case"IntermissionHero":return"INTERMISSION_HERO";case"TentpoleHero":return"TENTPOLE_HERO";default:return"DetailPage"===t?"DETAIL_BTF":"ActorPage"===t?"ACTOR":"HOVER"}})($.containerType,s),c="Charts"===$.containerType?$.impressionData:void 0;try{var d;const l=await a.fetchEnrichment(e,o,$.journeyIngressContext,t,n,i,r,c);R({type:"EnrichItemMetadata",entityID:e,payload:{...l,entitlementCues:(u=null===(d=q(e))||void 0===d?void 0:d.entitlementCues,m=l.entitlementCues,{glanceMessage:null!=m&&null!==(p=m.glanceMessage)&&void 0!==p&&p.message?m.glanceMessage:null==u?void 0:u.glanceMessage,focusMessage:null!=m&&null!==(g=m.focusMessage)&&void 0!==g&&g.message?m.focusMessage:null==u?void 0:u.focusMessage,highValueMessage:null!=m&&null!==(v=m.highValueMessage)&&void 0!==v&&v.message?m.highValueMessage:null==u?void 0:u.highValueMessage,entitlementType:null!=m&&m.entitlementType?m.entitlementType:null==u?void 0:u.entitlementType})}}),O(!0)}catch(e){l.count(`DVWeb::${s}::BaseContainer::FetchEnrichmentError`,1,!1),k.c.count("DVWebBaseContainerError",{ConsumingWidgetType:s,ErrorType:"FetchEnrichmentError"}),l.warn(e),O(!0)}var u,m,p,g,v})(e,t,n,i,r))),onHideThis:async(e,t,n)=>{var i;e.preventDefault();const r=z[t],{entities:o}=$,c=null===(i=o[r])||void 0===i?void 0:i.hideThisAction;if("number"==typeof r&&c)try{const e=await a.hideThis(c);if(!e)return;const{hideThisAction:t}=e;t&&(D({type:"HideThis",entityIndex:r,payload:t}),n&&n(e))}catch(e){l.count(`DVWeb::${s}::BaseContainer::HideTitleError`,1,!1),k.c.count("DVWebBaseContainerError",{ConsumingWidgetType:s,ErrorType:"HideTitleError"}),l.warn(e)}},onWatchlistToggle:Z,onPaginateContainer:Q,onLibraryAction:async(e,t)=>{try{(await a.libraryItemStateChange(t,p)).success&&D({type:"RemoveItem",entityIndex:z[e],payload:{removedOverlayMessage:t.overlayMessage,canUndoRemoval:!1}})}catch(e){l.count(`DVWeb::${s}::BaseContainer::LibraryItemActionError`,1,!1),k.c.count("DVWebBaseContainerError",{ConsumingWidgetType:s,ErrorType:"LibraryItemActionError"}),l.warn(e)}},onSetReaction:async(e,t,n,i,r,o,c)=>{var d;if(!i)return;const u=z[i],m=null===(d=$.entities[u])||void 0===d?void 0:d.reactionAction;if("number"!=typeof u||!m)return;const g=m.reaction;try{D({type:"SetReaction",entityIndex:u,payload:"Add"===t?e:"NoReaction"});const l=await a.setReaction(i,n,e,t,p,r);l&&l.success||(D({type:"SetReaction",entityIndex:u,payload:g}),null==o||o()),null==c||c(t)}catch(e){l.count(`DVWeb::${s}::BaseContainer::SetReactionError`,1,!1),k.c.count("DVWebBaseContainerError",{ConsumingWidgetType:s,ErrorType:"SetReactionError"}),l.warn(e),D({type:"SetReaction",entityIndex:u,payload:g}),null==o||o()}}},isTrailerAutoplayEnabled:r,index:d,consumingWidgetType:s,isPaginatingContainer:C,hasMoreItems:!!Q&&T,removedItemsMap:F,resiliencyCxMode:u};return i.createElement(_E.Provider,{value:J},i.createElement(vl,null,o&&i.createElement(EE,U),!(void 0!==j&&j<d)&&(e=>{switch(e){case"StandardCarousel":default:return i.createElement(ou,null);case"StandardHero":return i.createElement(Xu,{isDynamicMobileVariant:!1});case"StandardMobileHero":return i.createElement(Xu,{isDynamicMobileVariant:!0});case"TentpoleHero":return i.createElement(Jm,null);case"Charts":return i.createElement(Yp,null);case"SuperCarousel":return i.createElement(rv,null);case"Cover":return i.createElement(xv,null);case"Nodes":return i.createElement(Zv,null);case"Grid":case"Onboarding":return i.createElement(qh,null);case"TextContainer":return i.createElement(Qh,null);case"EpgGroup":return i.createElement(dE,null);case"DelayedPopup":return i.createElement(Jh,null);case"FixedHeaderCarousel":return i.createElement(df,null);case"TextWidget":return i.createElement(hf,null);case"ActionButtonCollection":return i.createElement(Tf,null);case"IntermissionHero":return i.createElement(kf,null);case"Survey":return i.createElement(Rf,null)}})($.containerType)))}));TE.displayName="BaseContainer";const kE=(0,s.s6)((0,c.ty)(TE));function wE(e,t){switch(t.type){case"INIT":return{containers:mE(t.payload),initTime:new Date};case"APPEND":return{...e,containers:mE([...e.containers,...t.payload])}}}var LE=n("./src/util/utils/serializeFormData.ts");const IE={hideThis:async e=>{var t,n,a,i,r;const o={tag:null===(t=e.endpoint)||void 0===t||null===(t=t.query)||void 0===t?void 0:t.tag,token:null===(n=e.endpoint)||void 0===n||null===(n=n.query)||void 0===n?void 0:n.token,titleId:null===(a=e.endpoint)||void 0===a||null===(a=a.query)||void 0===a?void 0:a.titleId,titleType:null===(i=e.endpoint)||void 0===i||null===(i=i.query)||void 0===i?void 0:i.titleType},l=null===(r=e.endpoint)||void 0===r?void 0:r.partialURL,s=(0,LE.V)(o);return PE(l,s)},toggleWatchlist:async(e,t)=>{var n,a,i;const r=null!==(n=null===(a=e.endpoint)||void 0===a?void 0:a.query)&&void 0!==n?n:{},o=null===(i=e.endpoint)||void 0===i?void 0:i.partialURL;if(!e.ajaxEnabled){const e=new URLSearchParams(r).toString();return void(window.location.href=`${o}?${e}`)}r.relatedRequestId=null==t?void 0:t.requestID;const l=(0,LE.V)(r);return PE(o,l)},setLiveEventsCustomerIntent:async(e,t)=>await(new r.e).SetLiveEventsCustomerIntent({context:t,...e}),libraryItemStateChange:async(e,t)=>await(new r.e).LibraryStateChange({context:t,titleID:e.titleID,token:e.token,state:e.state}),setReaction:async(e,t,n,a,i,o)=>await(new r.e).SetReaction({context:i,gti:e,csrfToken:t,reaction:n,reactionTag:a,feedbackSource:o})},PE=async(e,t)=>{const n=new ln.l;return await n.call(e,{credentials:"include",method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","x-requested-with":"XMLHttpRequest"},body:t})},DE=(e,t,n,a,i,r,o,l)=>{const s=(c=e)&&JSON.stringify(c);var c;const d=((e,t,n,a,i,r,o)=>({placement:e,playback:t,preroll:n,trailer:a,watchlist:i,badge:r,impressionData:o}))(t,n,a,i,r,o,l);var u;return{metadataToEnrich:(u=d)&&JSON.stringify(u),titleIDsToEnrich:s}};function SE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class xE{constructor(e=1500,t=!1){SE(this,"ctx",void 0),SE(this,"queueMap",{}),SE(this,"finished",[]),SE(this,"timeout",void 0),SE(this,"titleIdsForBadgeRequest",[]),SE(this,"isCleanSlateActive",!1),SE(this,"handleQueue",(e=>{if(!this.ctx||!this.getQueue(e)||0==this.getQueue(e).length)return;const t=this.getQueue(e).splice(0,30);this.finished=[...this.finished,...t];const n=t.map((e=>e.title)),a=JSON.parse(e),i=a.canRequestPreroll,o=a.canRequestTrailer,l=t.some((e=>this.titleIdsForBadgeRequest.includes(e.title))),s=DE(n,a.placement,!0,i,o,!0,l,a.impressionData);(new r.e).EnrichItemMetadata({context:this.ctx,...s,isCleanSlateActive:this.isCleanSlateActive,journeyIngressContext:a.journeyIngressContext}).then((t=>{this.clearTimer(e);const a=xE.enrichmentMap[e];xE.enrichmentMap={...xE.enrichmentMap,[e]:{...a,...t.enrichments}},this.broadcastChanges(t.enrichments,n,e),null!=t.isTrailerAutoplayEnabled&&(xE.isTrailerAutoplayEnabled=t.isTrailerAutoplayEnabled),this.queueFull(e)?this.handleQueue(e):this.getQueue(e).length>0&&this.setTimer(e)})).catch((()=>this.broadcastChanges({},n,e)))})),this.ctx=(0,m.getRequestContext)(),this.timeout=e,this.isCleanSlateActive=t}enrichmentFor(e,t="HOVER",n,a=!0,i=!0){var r;if(!e)return;const o=this.batchKey(t,n,void 0,a,i);return null===(r=xE.enrichmentMap[o])||void 0===r?void 0:r[e]}enrichmentPromise(e,t="HOVER",n,a=!1,i=!0,r=!0,o=!1,l){return new Promise(((s,c)=>{if(!e)return c();const d=this.batchKey(t,n,l,i,r),u={title:e,placement:t,journeyIngressContext:n,impressionData:l},m=this.isTitleDetailIncluded(this.finished,u)&&!a&&xE.enrichmentMap[d]&&xE.enrichmentMap[d][e],p=o&&m&&!this.titleIdsForBadgeRequest.includes(e);if(m&&!p)return s(m);{this.isTitleDetailIncluded(this.getQueue(d),u)||this.getQueue(d).push(u),o&&!this.titleIdsForBadgeRequest.includes(e)&&this.titleIdsForBadgeRequest.push(e);const t=this.getOrSet(xE.resolverMap,d,{})[e]||[];xE.resolverMap[d][e]=[...t,s];const n=this.getOrSet(xE.rejecterMap,d,{})[e]||[];xE.rejecterMap[d][e]=[...n,c],this.queueFull(d)?this.handleQueue(d):this.getTimer(d)||this.setTimer(d)}}))}batchKey(e,t,n,a,i){return JSON.stringify({placement:e,journeyIngressContext:t,impressionData:n,canRequestPreroll:a,canRequestTrailer:i})}getQueueAndTimer(e){return this.queueMap[e]||(this.queueMap[e]={timer:void 0,queue:[]}),this.queueMap[e]}getQueue(e){return this.getQueueAndTimer(e).queue}getTimer(e){return this.getQueueAndTimer(e).timer}isTitleDetailIncluded(e,t){return e.some((e=>e.title===t.title&&e.placement===t.placement&&e.journeyIngressContext===t.journeyIngressContext&&e.impressionData===t.impressionData))}getOrSet(e,t,n){return e[t]=e[t]||n,e[t]}queueFull(e){return this.getQueue(e).length>=30}setTimer(e){this.getQueueAndTimer(e).timer=window.setTimeout(this.handleQueue,this.timeout,e)}clearTimer(e){window.clearTimeout(this.getTimer(e)),this.getQueueAndTimer(e).timer=void 0}broadcastChanges(e,t,n){t.forEach((t=>{const a=e[t],i=xE.resolverMap[n][t],r=xE.rejecterMap[n][t];xE.resolverMap[n][t]=[],xE.rejecterMap[n][t]=[],i&&a?i.forEach((e=>e(a))):r&&!a&&r.forEach((e=>e(`EnrichItemMetadata failed to respond with enrichment for title ID ${t} with batch key ${n}`)))}))}}SE(xE,"enrichmentMap",{}),SE(xE,"resolverMap",{}),SE(xE,"rejecterMap",{}),SE(xE,"isTrailerAutoplayEnabled",!0);const ME="NsL8tJ",NE="TAFu+r",RE="D7O3L5",AE=({title:e,entitlementIntent:t,theme:n})=>i.createElement("h1",{"data-testid":"page-title",className:v(ME,{[NE]:"NotEntitled"===t,[RE]:"Store"===n})},e);var OE=n("./node_modules/@amzn/dvui/dist/Icons/ExpanderDown.js");const VE="vMgsn9",WE="wsxMim",BE="ICNxzs",GE="p+Vugy",HE="ECrmxp",jE="S0ePbs",$E="UTgAAs",zE="jNVzDt",FE="UBiO6q",UE="yU6sTz",qE="dgsz+x",KE="kS6Mq7",QE="maX2Gf",ZE="gQwJEs",JE="fRRenr",XE="M1dXNg",YE="KU3eMv",eC="D5IBkY",tC="yROaIs",nC="k0uWjy",aC="BCOvN9",iC="mefDZd",rC="uAlp4I",oC="_0Wd4fc",lC="AbYjcS",sC="tU8gSw",cC="iovUou",dC="_9p25pD",uC="UrY0Hx",mC="quO4ok",pC="WB59Ph",gC="vSuDIq",vC="_8A1dJ2",hC="g1yAmJ",fC="Di79n+",yC="kP-92q",bC="TSrWMv",EC="_0p0vDQ",CC="_8P4YZw",_C="ePeReH",TC="SPgvgU",kC="ip261X";var wC=n("./src/util/utils/history.ts");const LC=i.memo((e=>{const{isTheOnlyFilter:t,alignDropdownListEnd:n,testID:a}=e,{actions:r}=i.useContext(I),[o,l]=i.useState(!1),s=i.useRef(null);i.useEffect((()=>{const e=e=>{o&&s.current&&!s.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[o]);const c=t=>async()=>{var n;void 0===t.serviceToken&&"MyStuff"!==e.consumingWidgetType||(l(!1),t.href&&(0,wC.qA)(null,document.title,t.href),await e.onFilter({id:t.id,serviceToken:null!==(n=t.serviceToken)&&void 0!==n?n:""},r.resetAll))},d=()=>{const t=e.values.filter((e=>e.isCurrentlyApplied));return 0===t.length?e.text:t[0].text},u=(0,V.h)()("DV_WEB_FABLE_BUTTON_MIGRATION_651324");return i.createElement("div",{className:v(lC,{[sC]:t}),key:e.text,ref:s,"data-testid":"single-select-filter"},i.createElement("button",{className:v(dC,{[YE]:o,[uC]:u.isOn}),onClick:()=>l(!o),"data-testid":a||"single-select-filter-button","data-automation-id":a||"single-select-filter-button",disabled:e.isLoading},i.createElement("label",{className:v(HE,{[JE]:o})},e.text," "),i.createElement("div",{className:GE},i.createElement("label",{className:VE}," ",d()," ")),i.createElement("span",{className:v(XE,{[YE]:o})},i.createElement(OE.ExpanderDown,null)),i.createElement("div",{className:v(UE,{[YE]:d()!==e.text})},d())),i.createElement("ul",{className:v(mC,{[YE]:o,[pC]:n}),"data-testid":"single-select-filter-options"},null==(m=e.values)?void 0:m.map((t=>i.createElement("li",{className:gC,key:t.text,"data-testid":"single-select-filter-value"},i.createElement("button",{key:t.text,onClick:c(t),className:v(vC,{[JE]:t.isCurrentlyApplied}),"data-automation-id":a?`${a}-${t.id}${t.isCurrentlyApplied?"-active":""}`:"single-select-filter-value-button","data-testid":a?`${a}-${t.id}${t.isCurrentlyApplied?"-active":""}`:"single-select-filter-value-button",disabled:e.isLoading},i.createElement("div",{className:hC},i.createElement(yr.Tick,null)),i.createElement("div",{className:yC},t.text)))))));var m})),IC=i.memo((e=>{const{isTheOnlyFilter:t,testID:n}=e,[a,r]=i.useState(!1),o=i.useRef(null),{actions:l}=i.useContext(I);i.useEffect((()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);const s=t=>async()=>{void 0!==t.serviceToken&&(r(!1),t.href&&(0,wC.qA)(null,document.title,t.href),await e.onFilter({serviceToken:t.serviceToken},l.resetAll))},c=()=>e.values.filter((e=>e.isCurrentlyApplied)).length,d=(0,V.h)()("DV_WEB_FABLE_BUTTON_MIGRATION_651324");return i.createElement("div",{className:v(lC,{[sC]:t}),key:e.text,ref:o,"data-testid":"multi-select-filter"},i.createElement("button",{className:v(dC,{[YE]:a,[uC]:d.isOn}),onClick:()=>r(!a),"data-automation-id":n||"multi-select-filter-button","data-testid":n||"multi-select-filter-button",disabled:e.isLoading},i.createElement("label",{className:v(HE,{[JE]:a})},e.text," "),i.createElement("div",{className:v(GE)},i.createElement("label",{className:v(BE,{[WE]:c()>0})}," ",e.text," "),i.createElement("label",{className:v(VE,{[WE]:0==c()})},e.text),i.createElement("label",{className:v(QE,{[WE]:0==c()})},c())),i.createElement("label",{className:v(FE,{[WE]:0==c()})},c()),i.createElement("span",{className:v(XE,{[YE]:a})},i.createElement(OE.ExpanderDown,null))),i.createElement("ul",{className:v(mC,{[YE]:a}),"data-testid":"multi-select-filter-options"},null==(u=e.values)?void 0:u.map((e=>i.createElement("li",{className:gC,key:e.text,"data-testid":"multi-select-filter-value"},i.createElement("button",{key:e.text,onClick:s(e),className:v(vC,{[JE]:e.isCurrentlyApplied}),"data-automation-id":n?`${n}-${e.id}${e.isCurrentlyApplied?"-active":""}`:"multi-select-filter-value-button","data-testid":n?`${n}-${e.id}${e.isCurrentlyApplied?"-active":""}`:"multi-select-filter-value-button"},i.createElement("div",{className:fC},e.isCurrentlyApplied?i.createElement(Ko.CheckboxChecked,null):i.createElement(qo.Checkbox,null)),i.createElement("div",{className:yC},e.text)))))));var u})),PC=i.memo((e=>{const{actions:t}=i.useContext(I),n=e.values.map((e=>({title:e.text,id:e.id,serviceToken:e.serviceToken,isCurrentlyApplied:e.isCurrentlyApplied,href:e.href})));return i.createElement(Ae,{testID:"filter-carousel",cards:n,navigation:xe.Framed,renderCard:n=>{return i.createElement(qr(),{className:v(aC,{[iC]:n.isCurrentlyApplied}),onClick:(a=n,async()=>{var n;void 0===a.serviceToken&&"MyStuff"!==e.consumingWidgetType||(a.href&&(0,wC.qA)(null,document.title,a.href),await e.onFilter({id:a.id,serviceToken:null!==(n=a.serviceToken)&&void 0!==n?n:""},t.resetAll))}),disabled:e.isLoading,doNotMigrateToFable:!0,testID:"filter-carousel-filter"},n.title);var a},className:cC})}));function DC(){return DC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},DC.apply(this,arguments)}const SC=e=>{var t,n,a;const r=1===(null===(t=e.filters)||void 0===t?void 0:t.length);var o;return r&&"link"===(null===(n=e.filters)||void 0===n?void 0:n[0].selection)?i.createElement("div",{className:v(nC,{[oC]:e.noTopPadding})},i.createElement(PC,DC({},null===(o=e.filters)||void 0===o?void 0:o[0],{onFilter:e.onFilter,isLoading:e.isLoading}))):i.createElement("div",{className:v(rC,e.className,{[oC]:e.noTopPadding})},e.topContent,null===(a=e.filters)||void 0===a?void 0:a.map((t=>{switch(t.selection){case"exclusive":case"list_single_option":return i.createElement(LC,DC({},t,{key:t.id,consumingWidgetType:e.consumingWidgetType,onFilter:e.onFilter,isTheOnlyFilter:r,testID:e.testID,alignDropdownListEnd:e.alignDropdownListEnd,isLoading:e.isLoading}));case"inclusive":case"list_multiple_option":return i.createElement(IC,DC({},t,{key:t.id,onFilter:e.onFilter,isTheOnlyFilter:r,testID:e.testID,isLoading:e.isLoading}))}})))};var xC=n("./node_modules/@amzn/dvui/dist/Alert.js");const MC=e=>{var t;const{filters:n,isLoading:a,onFilter:r,noTopPadding:o,alignDropdownListEnd:l,filterButtonsClassName:s,consumingWidgetType:c,errorLoadingMessage:d,testID:u}=e,[m,p]=i.useState(!1),g=1===n.items.length&&"link"===(null===(t=n.items)||void 0===t?void 0:t[0].selection);return i.createElement(i.Fragment,null,!g&&i.createElement("div",{className:v(jE,{[oC]:e.noTopPadding})},i.createElement(qr(),{className:bC,onClick:()=>p(!0)},n.text)),i.createElement("div",{className:v({[eC]:!g,[tC]:!e.pageHasTitle,[WE]:!m})},!g&&i.createElement(i.Fragment,null,i.createElement("div",{className:v($E)},n.text,i.createElement("button",{className:EC,onClick:()=>p(!1)},i.createElement(Pr.Close,{height:rt,width:ot}))),a&&i.createElement("div",{className:v(TC),"data-automation-id":"filter-loading-spinner"},i.createElement(Lo.Icon,{use:Lo.IconType.SPINNER,className:v(_C)}))),i.createElement(SC,{filters:n.items,onFilter:r,noTopPadding:o,alignDropdownListEnd:l,topContent:i.createElement(i.Fragment,null,i.createElement(RC,{show:"FAILED"===e.error,type:"Mobile",errorLoadingMessage:d}),"NO_CONTENT"===e.error&&i.createElement("p",{className:KE},e.noMatchErrorMessage)),className:s,consumingWidgetType:c,testID:u,isLoading:a}),i.createElement(RC,{show:"FAILED"===e.error,type:"Desktop",errorLoadingMessage:d}),!g&&i.createElement("div",{className:v(zE)},i.createElement("button",{className:CC,onClick:()=>p(!1),"data-automation-id":"filter-close-button"},n.callToActionText))),"NO_CONTENT"===e.error&&i.createElement("p",{className:kC},e.noMatchErrorMessage))},NC={Mobile:qE,Desktop:ZE},RC=({type:e,show:t,errorLoadingMessage:n})=>{if(!t)return null;const a=NC[e];return i.createElement("p",{className:a},i.createElement(xC.ErrorAlert,null,n))};var AC=n("./src/util/utils/network.ts");function OC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class VC{constructor(e=12e4,t=3,n=document){OC(this,"scriptTimeoutMs",void 0),OC(this,"maxAttempts",void 0),OC(this,"documentInstance",void 0),OC(this,"scriptErrorCount",0),OC(this,"scriptLoaded",!1),OC(this,"scriptTimerId",void 0),OC(this,"src",void 0),OC(this,"objectNameToValidate",void 0),OC(this,"elementId",void 0),OC(this,"onNonFatal",void 0),OC(this,"resolve",void 0),OC(this,"reject",void 0),OC(this,"load",(({url:e,elementId:t,onNonFatal:n,objectNameToValidate:a})=>new Promise(((i,r)=>{this.src=e,this.objectNameToValidate=a,this.onNonFatal=n,this.elementId=t,this.resolve=i,this.reject=r,this.loadScript()})))),OC(this,"loadScript",(()=>{var e,t,n;const a=this.documentInstance.getElementById(null!==(e=this.elementId)&&void 0!==e?e:"");null!==a&&this.documentInstance.head.removeChild(a);const i=this.documentInstance.createElement("script");this.scriptTimerId=setTimeout((()=>{this.onScriptError(i,new Error(`Script load timed out. Loading ${this.objectNameToValidate} via ${this.src}`))}),this.scriptTimeoutMs),i.type="text/javascript",i.crossOrigin="anonymous",i.id=null!==(t=this.elementId)&&void 0!==t?t:"",i.async=!0,i.defer=!0,i.onload=i.onreadystatechange=()=>{this.scriptLoaded||void 0!==i.readyState&&"loaded"!==i.readyState&&"complete"!==i.readyState||(this.objectExists()?(clearTimeout(this.scriptTimerId),this.scriptLoaded=!0,i.onload=i.onerror=i.onreadystatechange=null,this.resolve&&this.objectNameToValidate&&this.resolve(window[this.objectNameToValidate])):this.onScriptError(i,new Error(`Script loaded but missing expected global object. Loading ${this.objectNameToValidate} via ${this.src}`)))},i.onerror=()=>{this.onScriptError(i,new Error(`Script onerror fired. Loading ${this.objectNameToValidate} via ${this.src}`))},i.src=null!==(n=this.src)&&void 0!==n?n:"",this.documentInstance.head.appendChild(i)})),OC(this,"onScriptError",((e,t)=>{e&&(e.onload=e.onerror=e.onreadystatechange=null),clearTimeout(this.scriptTimerId),this.objectExists()||(++this.scriptErrorCount<this.maxAttempts?(this.onNonFatal&&this.onNonFatal(t),this.loadScript()):this.reject&&this.reject(t))})),this.scriptTimeoutMs=e,this.maxAttempts=t,this.documentInstance=n}objectExists(){return!!this.objectNameToValidate&&void 0!==window[this.objectNameToValidate]}}const WC="player-script",BC=e=>new Promise(((t,n)=>{const a=e=>{n(`DVWebPlayer:${e}:load:failure`),k.c.count("DVWebPlayerLoadFailureType",1,{errorType:e})};if(window.WebPlayer)t(new window.WebPlayer);else if(document.getElementById(WC))(()=>{let e,n=0;const i=()=>{n<60?(n+=1,window.WebPlayer?t(new window.WebPlayer):e=setTimeout(i,1e3)):a("Timeout")};i(),document.getElementById(WC).onload=()=>{clearTimeout(e),window.WebPlayer?t(new window.WebPlayer):a("Loading")}})();else{let n=null;n=(new VC).load({url:"https://js-assets.aiv-cdn.net/playback/web_player/"+("1"===new URLSearchParams(window.location.search).get("playerBeta")?`webplayer_gamma.js?timestamp=${(new Date).getTime()}`:"WebLoader.js"),elementId:WC,objectNameToValidate:"WebPlayer"}).catch((t=>{throw e.error("Error loading WebPlayer",t),t})),n.then((()=>{t(new window.WebPlayer),k.c.count("DVWebPlayerLazyLoadSuccess")})).catch((()=>{a("Deferred")}))}}));function GC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const HC=["closed","asinChanged","aborted"],jC=e=>({trailer:e.trailer,position:Number(e.position||0),videoType:e.videoType,live:Boolean(e.lcid),asin:e.lcid||e.asin,ref:e.ref,playbackEnvelope:e.playbackEnvelope,privacyConsent:e.privacyConsent,playbackExperiences:e.playbackExperiences,isAVOD:e.isAVOD}),$C=e=>({...e,startEpoch:Math.floor(Date.now()/1e3)});class zC{constructor(e,t,n,a){GC(this,"player",void 0),GC(this,"logger",void 0),GC(this,"liveIncompatibleCallback",void 0),GC(this,"playerConfigData",void 0),GC(this,"playerConfig",void 0),GC(this,"currentContentConfig",null),GC(this,"pubSub",void 0),GC(this,"lastTitle",void 0),GC(this,"capabilities",void 0),GC(this,"_test",void 0),GC(this,"playbackLaunchedTime",void 0),this.player=e,this.logger=a,this._test={player:e},this.liveIncompatibleCallback=n,this.pubSub=(0,tr.M)(),this.playerConfigData=t,this.playerConfig=er(t),this.lastTitle=null,this.init(),this.capabilities=new Promise((t=>{e.on("playerCapabilities",(({capabilities:e})=>{t(e)}))}))}init(){const e=Yi(this.playerConfigData.pageType);HC.forEach((e=>{this.player.on(e,(async t=>{await this.callAction(e),t&&"asinChanged"===e&&(this.lastTitle=$C(jC(t)))}))})),this.player.on("playing",(()=>{if(this.playbackLaunchedTime){const t=Date.now()-this.playbackLaunchedTime;this.logCounter("playbackdelay",t),this.playbackLaunchedTime=null,qi({action:Ui.PlaybackStarted,pageType:e,logger:this.logger,videoType:this.getVideoType()})}})),this.on("closed",(()=>qi({action:Ui.PlayerClosed,pageType:e,logger:this.logger,videoType:this.getVideoType()}))),this.on("asinChanged",(()=>qi({action:Ui.PlayerTitleChanged,pageType:e,logger:this.logger,videoType:this.getVideoType()}))),this.on("beforePlay",(e=>this.liveIncompatibleCheck(e))),this.player.initialize(this.playerConfig)}async callAction(e){return await Promise.all(this.pubSub.query(e).map((e=>e(this.lastTitle))))}on(e,t){return this.pubSub.subscribe(e,t)}async prepare(e){await this.callAction("prepare"),this.player.prepare(this.playerConfig,{...jC(e),immediateConsumption:!1})}async liveIncompatibleCheck(e){var t;if(!("Live"!==(t=e).videoType&&!t.lcid&&!t.live||(await this.capabilities).supportsLive))throw this.liveIncompatibleCallback(),"Live Incompatible"}async play(e){const t=jC(e);this.lastTitle=$C(t),this.currentContentConfig=t,this.playbackLaunchedTime=Date.now(),await this.callAction("beforePlay"),await this.callAction("play");const n={clickstreamRefMarker:e.ref||"atv_dp_unknown",playbackInitiatedTime:Date.now()};this.player.play(this.playerConfig,t,n)}async stop(){await this.callAction("stop"),this.player.initialize(this.playerConfig),this.currentContentConfig=null,this.playbackLaunchedTime=null,await this.callAction("closed")}getVideoType(){return this.currentContentConfig&&this.currentContentConfig.videoType||"unknown"}logCounter(e,t=1){const n=`dvweb:playback:${e}:${this.playerConfigData.pageType}:web:${this.getVideoType()}`.toLocaleLowerCase();this.logger.count(n,t,!1),k.c.count("DVWebPlayerPlayback",1,{metric:e,pageType:this.playerConfigData.pageType,platform:"web",videoType:this.getVideoType()})}}const FC={instance:null};function UC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const qC=(e,t)=>{const n=document.createEvent("CustomEvent");n.initCustomEvent(e,!0,!0,t),document.dispatchEvent(n)},KC=e=>{document.getElementsByTagName("body")[0].style.overflow=e},QC=e=>{document.getElementById(Ki).className=e},ZC=e=>{QC("dv-player-fullscreen"),KC("hidden")},JC=e=>{QC(""),KC("visible")};class XC extends i.Component{constructor(e){super(e),UC(this,"logger",void 0),UC(this,"player",void 0),UC(this,"playerFailedToLoad",void 0),UC(this,"unsubscribeHandlers",void 0),UC(this,"loadPlayer",(async(e=!1)=>{const{playerConfig:t,whisperCacheData:n,liveIncompatibleCallback:a,capabilities:i,onPlayerLoadErrorCallback:r}=this.props;try{this.player=await((e,t,n,a=!1)=>(FC.instance=!a&&FC.instance||BC(n).then((a=>new zC(a,e,t,n))).catch((t=>{throw qi({action:Ui.PlayerFailedToLoad,pageType:Yi(e.pageType),logger:n,videoType:"unknown"}),t})),FC.instance))(t,a,this.logger,e),this.attachRefreshEventHandlers(),n&&await this.handlePrepareRequest(n)}catch(e){"string"==typeof e?this.logFatal(e):this.logger.fatal(e),this.playerFailedToLoad=!0,r&&r()}})),UC(this,"handleNetworkChange",(async()=>{!this.player&&AC.Zc.isOnline()&&this.loadPlayer(!0)})),this.logger=e.logger||new Ct.Oc(`DVWebNode:Player:${this.props.playerConfig.pageType}`),this.unsubscribeHandlers=[],this.playerFailedToLoad=!1}logFatal(e){this.count(e),this.logger.fatal(e)}count(e){const{pageType:t}=this.props.playerConfig;return this.logger.count(`${e}:${t}`,1,!1)}async attachRefreshEventHandlers(){const{onPlay:e,onClosed:t,downloadGateway:n,onAsinChanged:a,onInitialized:i,onPrepare:r,onPlayerCapabilities:o,playerConfig:l}=this.props,s=this.player,c=(e,t)=>{this.unsubscribeHandlers.push(s.on(e,(e=>t(e))))};c("play",ZC),c("play",(e=>qC("PVVideoPlayerPlay",e))),e&&c("play",e),c("closed",JC),c("closed",(e=>qC("PVVideoPlayerClosed",e))),t&&c("closed",t),n&&c("closed",n.onPlayerClosed),c("asinChanged",(e=>qC("PVVideoPlayerTitleChanged",e))),a&&c("asinChanged",a),c("initialized",(()=>qC("PVVideoPlayerInitialized",void 0))),i&&c("initialized",i),c("prepare",(()=>qC("PVVideoPlayerPrepared",void 0))),r&&c("prepare",r),c("aborted",(()=>{this.count("DVWebPlayer:aborted"),k.c.count("DVWebPlayerAborted",1,{pageType:l.pageType})}));const d=await s.capabilities;(e=>{rr=e})(d),d.supportsDrm||(this.count("DVWebPlayer:missingDrm"),k.c.count("DVWebPlayerMissingDrm",1,{pageType:l.pageType})),qC("PVVideoPlayerCapabilities",d),o&&o(d)}async componentDidMount(){this.loadPlayer(),AC.Zc.onNetworkChange(this.handleNetworkChange)}componentDidUpdate({playbackLinkData:e,whisperCacheData:t}){const{playbackLinkData:n,whisperCacheData:a}=this.props;n&&!e&&this.handlePlayRequest(n),!n&&a&&a!==t&&this.handlePrepareRequest(a)}async componentWillUnmount(){this.unsubscribeHandlers.forEach((e=>e())),AC.Zc.offNetworkChange(this.handleNetworkChange)}async handlePrepareRequest(e){this.player&&this.player.prepare(e)}async handlePlayRequest({contentConfig:e,signInUrl:t}){const{onPlayFailure:n,playerConfig:a}=this.props;let i=!0;if(this.player)if(t)r=t,window.location.assign(r);else try{await this.player.play(e)}catch(t){this.logger.fatal(t,`Playback failed { contentConfig: ${e} }`),i=!1}else this.playerFailedToLoad?(this.count("DVWebPlayer:FailedToLoad"),k.c.count("DVWebPlayerFailedToLoad",1,{pageType:a.pageType}),this.logger.warn(`Player failed to load ${JSON.stringify({contentConfig:e})}`)):(this.count("DVWebPlayer:notReady"),k.c.count("DVWebPlayerNotReady",1,{pageType:a.pageType}),this.logger.warn(`Player not ready ${JSON.stringify({contentConfig:e})}`)),i=!1;var r;!i&&n&&n()}render(){return null}}const YC=Fi(XC),e_=()=>{},t_=({playerConfigPageType:e,launchType:t,whisperCacheData:n,liveIncompatibleCallback:a,isEnabled:r=!0,children:o,avlString:l,gvlString:s,hasAmazonAdvertisingPublisherConsent:c,isCookieConsentApplicable:d,pageType:u,subPageType:p,clientVariant:g,clickstream:v})=>{const[h,f]=(0,i.useState)(),{sessionID:y,marketplaceID:b,customerID:E,locale:C,deviceID:_,isInternal:T}=(0,m.getRequestContext)(),k={avlString:l,gvlString:s,hasAmazonAdvertisingPublisherConsent:void 0!==c&&c,isCookieConsentApplicable:void 0!==d&&d},w={sessionId:y,marketplaceId:b,customerId:E,deviceId:_,locale:C,playerBeta:!1,useDefaultView:!0,pageType:e,isInternal:T},L=h?{...h,contentConfig:{...h.contentConfig,privacyConsent:k}}:void 0;return r?i.createElement(i.Fragment,null,"EMBEDDED"===t&&i.createElement(YC,{playerConfig:w,playbackLinkData:L,whisperCacheData:n,liveIncompatibleCallback:null!=a?a:e_,onClosed:()=>f(void 0)}),i.createElement(vr,{playerConfigPageType:e,onPlay:f,launchType:t,trailerLaunchType:t,pageType:u,subPageType:p,clientVariant:g,clickstream:v},o)):i.createElement(i.Fragment,null,o)};t_.displayName="SimplePlayerComponent";const n_=(0,s.s6)(t_);var a_=n("./node_modules/@amzn/dvui/dist/Spinner.js");const i_="vT0ALj",r_="hHjWp8";function o_(){return o_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o_.apply(this,arguments)}const l_=e=>{const{isLoading:t,label:n,paginate:a,url:r,ariaLabel:o,consumingWidgetType:l}=e;return t?i.createElement("div",{className:v(i_,"tst-pagination-loader"),"data-testid":"pagination-loader"},i.createElement(a_.Spinner,null)):i.createElement("div",{className:i_},i.createElement("a",{className:v(r_,"tst-pagination-link"),href:yE({url:r,info:`${l}:Pagination`}),onClick:e=>{e.preventDefault(),a()},"data-testid":"page-pagination-button","aria-label":o,rel:"next"},n))},s_=e=>{const{loadMoreContent:t,isLoading:n}=e,[a,r]=i.useState(!1),[o,l]=i.useState(!1),{entityWithLock:s,hideBelowContainerIndex:c}=i.useContext(I),[d,u]=i.useState(!1),m=async()=>{const{success:e}=await t();l(!e)};i.useEffect((()=>{let e="PAGE"===s.type;(n||o||void 0!==c)&&(e=!1),u(e)}),[s.type,n,o,c]),i.useEffect((()=>{d&&a&&m()}),[d,a]),i.useEffect((()=>{d||r(!1)}),[d]);const p=void 0===c?i.createElement(l_,o_({},e,{paginate:m})):null;return d?i.createElement(Wh.Z,{rootMargin:"100% 0px",onChange:e=>r(!!e),"data-testid":"page-pagination-marker"},p):p};s_.displayName="Pagination";const c_=i.memo(s_),d_=()=>{const e=(0,m.getRequestContext)(),{isTouchDevice:t}=i.useContext(N);return t||"Fogg"!==e.domain?null:i.createElement("div",{"aria-hidden":"true",className:xd,"data-testid":"page-clearance"})},u_="akpvoo",m_="H+-UFj";function p_(){return p_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},p_.apply(this,arguments)}const g_=({title:e,logoImage:t})=>{if(null==t||!t.persistLogoImageOnPage||(null==t||!t.url)&&!e)return i.createElement(i.Fragment,null);const n={src:t.url,baseValue:35,baseType:da.HEIGHT,format:ua.png};return i.createElement("div",{className:u_,"data-testid":"persistent-logo"},i.createElement("div",{className:m_},null!=t&&t.url?i.createElement("img",p_({},Ea(n),{alt:e})):e))},v_="qypT9n",h_="EgEd8j",f_="o9Q7c+",y_="MvXJ-m",b_="p7p73Y",E_=({shouldAddNavSliderClearance:e})=>{const{isDesktopDeviceVariant:t}=i.useContext(N);return i.createElement("div",{"data-testid":"spinner-panel-container",className:h()(v_,{[b_]:e})},i.createElement("div",{className:h()(h_,{[f_]:!t})},i.createElement(a_.Spinner,{className:y_})))};E_.displayName="SpinnerPanel";const C_=e=>{var t,n;return{disableHover:null!==(t=null==e?void 0:e.disableHover)&&void 0!==t&&t,disableEnrichItemMetadata:null!==(n=null==e?void 0:e.disableEnrichItemMetadata)&&void 0!==n&&n}};var __=n("./node_modules/@amzn/dvui/dist/Fable/components/Banner/index.js");const T_=({heading:e,body:t,presentation:n,closeButtonAriaLabel:a,actionButton:r,testID:o})=>{const l=a?{ariaLabel:a}:void 0;return i.createElement(__.Banner,{heading:e,presentation:n.toLowerCase(),actionLinkProps:{href:null==r?void 0:r.link,children:null==r?void 0:r.label},closeButtonProps:l,dismissible:!0,"data-testid":null!=o?o:"alert-banner"},t)};function k_(){return k_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},k_.apply(this,arguments)}const w_="NoContentForFiltersError";class L_ extends Error{constructor(e){super(e),this.name=w_}}const I_=e=>{var t,n,a,r,o,l,s;const{page:d,isTrailerAutoplayEnabled:u,pageMetadata:p,strings:g,playbackLaunchType:v,filteringFunction:f,paginatingFunction:y,clickstream:b,clickstreamPageContext:E,enableVerticalPerformantRender:C,featureSwitches:T,requiresMinimumPageWidth:L,availabilityMessage:I,redirectedMessage:P,shouldUseReducedMotion:D,resiliencyCxMode:S,swiftPageParameters:x,notification:M,alertBanner:N}=e,R=null==T?void 0:T.isMiniDetailsMobileOn,J=(t=null==T?void 0:T.disableWinAppMaxContainersLimit,null==T?void 0:T.shouldRemoveAutoCrop),X="Browse"===d?1:2,Y=(0,m.getRequestContext)(),ee=new _.AS(Y.userAgent,Y.appName).getVariant(!0),te=new _.AS(Y.userAgent,Y.appName).getOS(),{logger:ne}=(0,c.L1)(),[ae,ie]=i.useState(e.filters),[re,oe]=i.useState(e.pagination),[le,se]=i.useReducer(wE,{containers:mE(e.containers),initTime:new Date}),[ce,de]=i.useState(!1),[ue]=i.useState(new xE(500,!0)),me=i.useRef(new Date),[pe,ge]=i.useState(!1),[ve,he]=i.useState(void 0),[fe,ye]=i.useState(!1),be=i.useRef(!1),Ee="NotEntitled"===(null==p?void 0:p.entitlementIntent)?"Store":"Default",Ce=(0,V.h)()("DV_WEB_FABLE_BANNER_MIGRATION_744953"),_e=i.useCallback((async()=>{const e={success:!0},t={success:!1};if(!y||!re)return t;ye(!0),be.current=!1;try{const n=await y(re);return be.current?t:(se({type:"APPEND",payload:n.containers}),oe(n.pagination),ye(!1),e)}catch(e){return ne.count(`DVWebNode::${d}::Pagination::Failed`,1,!1),k.c.count("DVWebPageComponentStatus",{Page:d,Component:"Pagination",Status:"Failed"}),ne.warn(e),be.current?t:(ye(!1),t)}}),[le.containers.length,ne,d,y,re]),Te=i.useCallback((async(e,t)=>{if(!f)return;fe&&(be.current=!0,ye(!1)),ge(!0),he(void 0);const n=new Date;me.current=n;try{const a=await f(e);if(me.current!==n)return;ie(a.filters),se({type:"INIT",payload:a.containers}),oe(a.pagination),ge(!1),t()}catch(e){if(ne.count(`DVWebNode::${d}::GetFilteredPage::Failed`,1,!1),k.c.count("DVWebPageComponentStatus",{Page:d,Component:"GetFilteredPage",Status:"Failed"}),ne.warn(e),me.current!==n)return;const t=(null==e?void 0:e.name)===w_;he(t?"NO_CONTENT":"FAILED"),ge(!1)}}),[f,fe,ne,d]);i.useEffect((()=>{(0,W.Do)("amafeature")&&de(!0),Ce.isOn&&P&&(0,Ic.toast)(P)}),[]),i.useEffect((()=>{if((0,B.KL)(),k.c.latency.timeToInteractive(),"undefined"!=typeof document&&"LandingPage"===d&&L){const e=(0,w.D)((()=>{const{scrollLeft:e}=document.documentElement,t=document.querySelector(`.${H}`);null!=t&&t.style&&(t.style.left=`${e}px`)}),100);return e(),document.addEventListener("scroll",e),()=>{document.removeEventListener("scroll",e)}}}),[]),i.useEffect((()=>{if(!ae||0==ae.items.length||"undefined"==typeof window)return;const e=()=>{window&&(window.location.href=window.location.href)};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}}),[]),i.useEffect((()=>{le.containers.some((e=>"Onboarding"===e.containerType))&&"LandingPage"===d&&"ATVHome"===(null==E?void 0:E.pageType)&&"Home"===(null==E?void 0:E.subPageType)&&Fn("atv_hm_hom_ocx_open","ATVModal","Onboarding",void 0,[gn.ModalRendered],vn.PopUp,E.clientVariant,b)}),[]);const[ke,we]=i.useState({...bt,disableRightClick:(0,G.D1)(Y.marketplaceID),updateContext:e=>{we(e)}}),Le=ae?le.containers.slice(0,null==ae?void 0:ae.position):[],Ie=ae?le.containers.slice(null==ae?void 0:ae.position):le.containers,Pe={consumingWidgetType:d,apiInteractions:{...IE,fetchEnrichment:ue.enrichmentPromise.bind(ue)},isTrailerAutoplayEnabled:null!=u&&u,shouldDisplayStrategy:ce,resiliencyCxMode:S},De=pe&&Le.length>0,Se=De&&Le[0].entities.length>1,xe=i.createElement(i.Fragment,null,!0===(null==p||null===(n=p.logoImage)||void 0===n?void 0:n.persistLogoImageOnPage)?i.createElement(g_,{title:null==p?void 0:p.title,logoImage:{url:null==p||null===(a=p.logoImage)||void 0===a?void 0:a.url,persistLogoImageOnPage:null==p||null===(r=p.logoImage)||void 0===r?void 0:r.persistLogoImageOnPage}}):(null==p?void 0:p.title)&&i.createElement(AE,{title:null==p?void 0:p.title,entitlementIntent:null==p?void 0:p.entitlementIntent,theme:Ee}),De&&i.createElement(E_,{shouldAddNavSliderClearance:Se}),!pe&&Le.map(((e,t)=>i.createElement(i.Fragment,{key:t},i.createElement(kE,k_({key:`${le.initTime.getTime()}::${t}`,index:t,container:e},Pe)),t===X-1&&i.createElement(B.Xd,{marker:B.RI.AboveTheFold})))),ae&&i.createElement(MC,{filters:ae,onFilter:Te,isLoading:pe,noTopPadding:!(null==p||!p.title),error:ve,errorLoadingMessage:null!==(o=g.DV_WEB_DISCOVER_FILTERING_FAILED)&&void 0!==o?o:"",noMatchErrorMessage:null!==(l=g.DV_WEB_DISCOVER_NO_MATCH)&&void 0!==l?l:"",pageHasTitle:Boolean(null==p?void 0:p.title)}),pe&&i.createElement(E_,null),!pe&&Ie.map(((e,t,n)=>{const a=t+Le.length;return i.createElement(i.Fragment,{key:e.webUid},i.createElement(kE,k_({key:`${le.initTime.getTime()}::${e.webUid}`,index:a,container:e,nextContainer:n[t+1]},Pe)),a===X-1&&i.createElement(B.Xd,{marker:B.RI.AboveTheFold}))})),M&&("DelayedPopup"===M.containerType||"Survey"===M.containerType&&"LandingPage"==d)&&i.createElement(kE,k_({container:M,index:le.containers.length},Pe))),Me=e.page.toLowerCase()+(S?`-resiliency-${S.toLocaleLowerCase()}`:"");return i.createElement("main",{"data-testid":Me,className:h()(H,{[F]:D})},I&&i.createElement(rl.MessageBlock,{testID:"availability-message",type:rl.MessageTypes.warning,fableBannerTypeOverride:"info"},I),!Ce.isOn&&P&&i.createElement(rl.MessageBlock,{testID:"redirected-message",className:q,type:rl.MessageTypes.prime,dismissSeconds:10},i.createElement(Lo.Icon,{className:K,use:Lo.IconType.ALERT_PRIME_SUCCESS}),i.createElement(Oe.Text,{className:Q,tag:"h1",string:e.redirectedMessage})),N&&i.createElement(T_,N),i.createElement(A,{deviceVariant:ee,os:te,strings:g,theme:Ee,shouldUseReducedMotion:D,clickstream:b,clickstreamPageContext:E,enableVerticalPerformantRender:C,swiftPageParameters:x,isMiniDetailsMobileOn:R,contingencies:C_(T),shouldRemoveAutoCrop:null!=J&&J,isContentDensityExperimentOn:null!==(s=null==T?void 0:T.isContentDensityExperimentOn)&&void 0!==s&&s},i.createElement(O.DvuiContainer,{className:h()($,j,{[U]:L,[z]:"Store"===Ee,[Z]:null==T?void 0:T.isContentDensityExperimentOn})},i.createElement(n_,{playerConfigPageType:d,launchType:v},i.createElement(Et.Provider,{value:ke},i.createElement(Eb,{pageType:null==E?void 0:E.pageType,subPageType:null==E?void 0:E.subPageType},xe,re&&!pe&&(le.containers.length,!0)&&i.createElement(c_,k_({},re,{consumingWidgetType:d,loadMoreContent:_e,isLoading:fe})),i.createElement(d_,null)))))))},P_=new r.e,D_=(0,s.s6)((({children:e,swiftPageParameters:t,swiftCustomerFeature:n,isDiscoverActive:a,isLivePageActive:r,myStuffViewType:o,myStuffManageFilter:l,requestFeatureSwitches:s})=>{const c=i.useMemo((()=>{if(!t||!n)return{paginateContainer:void 0};return{paginateContainer:async e=>{const{paginationTargetId:i,serviceToken:c,startIndex:d,isPurchaseAndRentalCarousel:p,journeyIngressContext:g}=e,v=(0,m.getRequestContext)(),h=await P_.PaginateCollection({context:v,pageType:t.pageType,pageId:t.pageId,collectionType:"Container",paginationTargetId:i,serviceToken:c,startIndex:d,isCleanSlateActive:!0,isDiscoverActive:a,isLivePageActive:r,...o&&{myStuffViewType:o},...l&&{myStuffManageFilter:l},...p&&{isPurchaseAndRentalCarousel:p},...(0,u.Xc)(v,n,s,{isCleanSlate:!0,isLivePageActive:r}),journeyIngressContext:g});return{entities:h.entities,hasMoreItems:h.hasMoreItems,startIndex:h.startIndex,pagination:h.pagination}}}}),[a,r,n,t,o,l]);return i.createElement(CE.Provider,{value:c},e)}));function S_(){const[e,t]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{const e=window.matchMedia("screen and (prefers-reduced-motion: reduce)");function n(e){t(e.matches)}t(e.matches||window&&window.location.search.includes("useReducedMotion"));const a="function"==typeof e.addEventListener;return a?e.addEventListener("change",n):e.addListener(n),()=>{a?e.removeEventListener("change",n):e.removeListener(n)}}),[]),e}const x_=new r.e,M_={name:"landing-page",getProps:async({context:e,isLivePageActive:t,requestFeatureSwitches:n,isBK4C:a,resiliencyConfiguration:i,resiliencyPageOverride:s,enableVerticalPerformantRender:c},d,{logger:u})=>{const m=new r.e(d),[p,v]=await Promise.all([m.GetLandingPage(g(t,n),a,i,s),(0,o.Ty)(e.geoToken,u)]);return{...p,clickstreamPageParams:(0,l.Mi)(),isLivePageActive:t,isBK4C:a,homeRegion:v,requestFeatureSwitches:n,enableVerticalPerformantRender:c}},Component:(0,s.s6)((0,c.ty)((e=>{const{filters:t,containers:n,pagination:a,isTrailerAutoplayEnabled:r,pageMetadata:o,playbackLaunchType:l,swiftPageParameters:s,availabilityMessage:c,customerMessage:d,redirectedMessage:u,strings:m,isLivePageActive:p,isBK4C:v,resiliencyCxMode:h,requestFeatureSwitches:f,featureSwitches:y,clickstreamPageParams:b,homeRegion:E,notification:C,alertBanner:_,enableVerticalPerformantRender:T}=e,k=zn({homeRegion:E||void 0}),w=un.Explore;return i.createElement(D_,{swiftPageParameters:s,swiftCustomerFeature:"LandingPage",isDiscoverActive:!0,isLivePageActive:p,requestFeatureSwitches:f},i.createElement(I_,{page:"LandingPage",pageMetadata:o,filters:t,filteringFunction:async e=>{const t=await x_.GetLandingPage(g(p,f,void 0,e),v);if(t.hasFailed)throw new L_;return{containers:t.containers,filters:t.filters,pagination:t.pagination}},containers:n,pagination:a,paginatingFunction:async e=>{if(null==e||!e.serviceToken)throw new Error("serviceToken cannot be undefined for Browse pagination");const t=await x_.GetLandingPage(g(p,f,e),v);return{containers:t.containers,pagination:t.pagination}},availabilityMessage:c||d,redirectedMessage:u,isTrailerAutoplayEnabled:r,strings:m,playbackLaunchType:l,clickstream:k,clickstreamPageContext:{...b,clientVariant:w},featureSwitches:y,requiresMinimumPageWidth:null==y?void 0:y.requiresMinimumPageWidth,shouldUseReducedMotion:S_(),resiliencyCxMode:h,swiftPageParameters:s,notification:C,alertBanner:_,enableVerticalPerformantRender:T}))})))};(0,a.y)(M_)},"./src/shared/Stores/context.ts":(e,t,n)=>{n.r(t),n.d(t,{getRequestContext:()=>r,isInternal:()=>s,isRetail:()=>c,setRequestContext:()=>o,updateRequestContext:()=>l});var a=n("./node_modules/zustand/esm/vanilla.mjs");const i=(0,a.M)((()=>({context:void 0}))),r=()=>{let e;var t;if(e=i.getState().context,void 0===e&&"undefined"!=typeof window&&window.DVWebNode&&(e=null===(t=window.DVWebNode.stores)||void 0===t?void 0:t.getState().context),void 0===e)throw new Error("Attempting to retrieve a RequestContext that is currently not set in the Zustand stores");return e},o=e=>{i.setState({context:e}),"undefined"!=typeof window&&window.DVWebNode&&(void 0===window.DVWebNode.stores&&(window.DVWebNode.stores=(0,a.M)((()=>({context:void 0})))),window.DVWebNode.stores.setState({context:e}))},l=e=>{const t=r();o({...t,...e})},s=()=>r().isInternal,c=()=>"Retail"===r().domain},"./src/shared/deviceProxy/marketplaceUtils.ts":(e,t,n)=>{n.r(t),n.d(t,{getCompanyName:()=>l,getDeviceProxyEndpoint:()=>i,getRatingBadgeLocale:()=>s,getRegionFromMarketplaceId:()=>r,getStringFromMarketplaceId:()=>o});var a=n("./src/util/utils/marketplace.ts");const i=(e,t)=>{let n="";switch(n=(0,a.is)()===a.wQ.ROW&&t?t:r(e),n){case a.yp.EU:return`atv-ps-eu${(0,a.is)()}`;case a.yp.FE:return`atv-ps-fe${(0,a.is)()}`;case a.yp.NA:default:return`atv-ps${(0,a.is)()}`}},r=e=>{switch(e){case a.HZ.UK:case a.HZ.DE:case a.HZ.ROW_EU:case a.HZ.ROE_EU:return a.yp.EU;case a.HZ.JP:case a.HZ.ROW_FE:return a.yp.FE;case a.HZ.US:case a.HZ.ROW_NA:default:return a.yp.NA}},o=e=>{switch(e){case a.HZ.UK:return"UK";case a.HZ.DE:return"DE";case a.HZ.ROW_EU:return"ROWEU";case a.HZ.ROE_EU:return"ROEEU";case a.HZ.JP:return"JP";case a.HZ.ROW_FE:return"ROWFE";case a.HZ.US:return"US";case a.HZ.ROW_NA:return"ROWNA";default:return"UNKNOWN"}},l=e=>{switch(e){case a.HZ.UK:return"Amazon Digital UK Limited";case a.HZ.DE:return"Amazon.com Int'l Sales, Inc";case a.HZ.JP:return"Amazon.com Sales, Inc";case a.HZ.US:default:return"Amazon.com Services LLC"}},s=e=>{switch(e){case a.HZ.UK:return"uk";case a.HZ.DE:return"de";default:return}}}},n={};function a(e){var i=n[e];if(void 0!==i)return i.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,a),r.exports}a.m=t,e=[],a.O=(t,n,i,r)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,i,r]=e[d],l=!0,s=0;s<n.length;s++)(!1&r||o>=r)&&Object.keys(a.O).every((e=>a.O[e](n[s])))?n.splice(s--,1):(l=!1,r<o&&(o=r));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,i,r]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.j=6781,(()=>{var e={6781:0};a.O.j=t=>0===e[t];var t=(t,n)=>{var i,r,[o,l,s]=n,c=0;if(o.some((t=>0!==e[t]))){for(i in l)a.o(l,i)&&(a.m[i]=l[i]);if(s)var d=s(a)}for(t&&t(n);c<o.length;c++)r=o[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(d)},n=self.webpackChunk_amzn_dvwebnode=self.webpackChunk_amzn_dvwebnode||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=a.O(void 0,[1216,9351],(()=>a("./src/entrypoints/hydration/landing-page.tsx")));i=a.O(i)})();
//# sourceMappingURL=http://sourcemaps.aka.amazon.com/9d9124ef284f458061e47dcf0e0a06a0cbc1f35bb8fb13d5091b8ae3ea8577cdd06e280bd2550beb2450db81197a9a8e886e56938c5afc3fe461e0de4e3e1ba20e627adc46e3aabed308608faeee73d51eee4857268709e4856069eb1a15d4e2eb8f7ddcc3667e44c6784355796c529bef7caddbdedc69f8d70f0a8b29e47778d72d2ef307e538123e23c6b94960ceb315090b1c6f6056e53b28450550ff58844385c3f94684506df7b8dc8abf15acce4ca9705d41cadad2a1382439ae7f0836a228ea1fef731be44c39948f70c6d77eaad402882b763e3aba12c3a856e9cd2d2eb8516b0a80ad390e6dbbae11984f1f453f92e6877be7abb651ca83236b839e?np=1